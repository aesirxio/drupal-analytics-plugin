"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[6521],{56646:(e,t)=>{var i="circle-info",a=["info-circle"],s="f05a",n="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z";t.DF={prefix:"fas",iconName:i,icon:[512,512,a,s,n]},t.DB=t.DF},66521:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var a,s=i(17177),n=i(65677),l=(i(30769),i(86842),i(33270)),o=i(90298),r=(i(84361),i(20734),i(16505)),c=i(28949),d=i(15218),m=i(20513),h=i(70069),u=i(23541),p=i(67294),g=i(34051),w=i(31555),E=i(91072),b=i(38585),v=i(73022),_=i(16550),N=i(30381),M=i.n(N),x=i(26982),f=i(42444),V=i(70982),C=i(56646),S=i(12086),P=(0,E.Zh)()((0,_.EN)((e=>{const{data:t,isPagination:i=!0,simplePagination:a=!1,pagination:s,selectPage:n,selectPageSize:l,status:o,limit:d,isPaginationAPI:h=!!i,t:u,sortAPI:g,handleSort:w,sortBy:E}=e,b=p.useMemo((()=>t?.header?.map(((e,t)=>{let i="";switch(e?.accessor){case v.lF8.NUMBER_OF_VISITORS:i="txt_tooltip_acquisition";break;case v.lF8.NUMBER_OF_PAGE_VIEWS:i="txt_tooltip_page_views";break;case v.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS:i="txt_tooltip_unique_page_views";break;case v.lF8.BOUNCE_RATE:i="txt_tooltip_bounce_rate";break;case v.lF8.NUMBER_OF_PAGES_PER_SESSION:i="txt_tooltip_page_session";break;case v.lF8.AVERAGE_SESSION_DURATION:i="txt_tooltip_avg_session_duration";break;default:i=""}return{...e,className:`px-15 py-16 fs-sm fw-semibold border-bottom border-gray-800 align-middle ${0!==t?"rounded-top-end-3 text-end":""} ${0===t?"rounded-top-start-3":""}`,width:e.width?e.width:0===t?"auto":170,allowSort:e?.allowSort||!1,Header:p.createElement("span",{className:"align-middle text-gray-900 fw-medium"},u(e.Header),i&&p.createElement(p.Fragment,null,p.createElement(V.G,{"data-tooltip-id":"tooltipTable","data-tooltip-content":u(i),className:"mx-sm fs-12 mb-1",icon:C.DB}),p.createElement(f.u,{id:"tooltipTable"})))}}))),[t?.header]),_=p.useMemo((()=>t?.data),[t?.data]);return p.createElement(p.Fragment,null,o===m.r.LOADING?p.createElement(x.QI,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):t?p.createElement(r.k,{classNameTable:"mb-0",columns:b,data:_,canSort:!0,pagination:i,paginationClass:"fs-14 border-top mt-2",isPaginationAPI:h,paginationResponse:s,selectPage:n,selectPageSize:l,simplePagination:a,limit:d,sortAPI:g,sortAPIHandle:w,sortBy:E}):p.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},p.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},p.createElement(c.x,{icons:v.OBj.PUBLIC_URL+"/assets/images/ic_project.svg",title:u("txt_no_data"),width:"w-50"}))))}))),L=(0,b.Pi)(class extends p.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{statusTopTable:e}=this.listViewModel;return p.createElement("div",{className:"position-relative h-100"},p.createElement("div",{className:"bg-white rounded-3 shadow-sm h-100 position-relative ChartWrapper"},p.createElement(P,{data:this.listViewModel?.channelTableData?.list?.toChannelTableTop(this.props.integration),pagination:this.listViewModel?.channelTableData?.pagination,selectPage:async e=>{await this.listViewModel.handleFilterPages({page:e})},selectPageSize:async e=>{await this.listViewModel.handleFilterPages({page:1,page_size:e})},status:e,sortAPI:!0,handleSort:this.props.handleSort,sortBy:this.listViewModel?.sortBy,...this.props})))}}),I=(0,E.Zh)()((0,_.EN)(L)),D=(0,b.Pi)((a=class extends p.Component{constructor(e){super(e),(0,u.o)(this,"componentDidMount",(()=>{this.acquisitionListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[acquisition]":!0},{},{...this.params?.pagination&&{page:this.params?.pagination}})})),(0,u.o)(this,"componentDidUpdate",(e=>{this.props.location===e.location&&this.props.activeDomain===e.activeDomain||this.acquisitionListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[acquisition]":!0},{},{...this.params?.pagination&&{page:this.params?.pagination}})})),(0,u.o)(this,"handleDateRangeChange",((e,t)=>{this.acquisitionListViewModel.handleFilterDateRange(e??t,t??e)})),(0,u.o)(this,"generateCard",(()=>{const{t:e}=this.props;return[{className:"col-3 mb-24",title:e("txt_visitors"),value:v.WtE.numberWithCommas(this.acquisitionListViewModel.metricsData?.[v.lF8.TOTAL_NUMBER_OF_VISITORS]),isIncrease:!1,loading:this.acquisitionListViewModel.statusMetrics},{className:"col-3 mb-24",title:e("txt_page_session"),value:v.WtE.numberWithCommas(this.acquisitionListViewModel?.metricsData?.[v.lF8.NUMBER_OF_PAGES_PER_SESSION]),isIncrease:!1,loading:this.acquisitionListViewModel?.statusMetrics},{className:"col-3 mb-24",title:e("txt_bounce_rate"),value:v.WtE.numberWithCommas(this.acquisitionListViewModel?.metricsData?.[v.lF8.BOUNCE_RATE])+"%",isIncrease:!1,loading:this.acquisitionListViewModel?.statusMetrics},{className:"col-3 mb-24",title:e("txt_acg_session_duration"),value:(this.acquisitionListViewModel?.metricsData?.[v.lF8.AVERAGE_SESSION_DURATION]?M().utc(1e3*this.acquisitionListViewModel?.metricsData?.[v.lF8.AVERAGE_SESSION_DURATION]).format("HH:mm:ss"):"00:00:00")+"s",isIncrease:!1,loading:this.acquisitionListViewModel.statusMetrics}]})),(0,u.o)(this,"handleSort",(async e=>{this.acquisitionListViewModel.getPages({"filter[domain]":this.context.biListViewModel.activeDomain},{},{"sort[]":e?.id,"sort_direction[]":"desc"===this.acquisitionListViewModel?.sortBy["sort_direction[]"]?"asc":"desc"})})),(0,u.o)(this,"handleSearch",(async e=>{this.acquisitionListViewModel.getPages({"filter[domain]":this.context.biListViewModel.activeDomain},{},{},{"filter[url]":e})}));const{viewModel:t}=e;this.viewModel=t||null,this.acquisitionListViewModel=this.viewModel?this.viewModel.getAcquisitionListViewModel():null,this.params=S.Z.parse(e.location.search)}render(){const{t:e}=this.props,t=this.generateCard();return p.createElement("div",{className:"py-4 px-4"},p.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24"},p.createElement("div",null,p.createElement("h2",{className:"fw-bold mb-8px"},e("txt_acquisition")),p.createElement("p",{className:"mb-0"},e("txt_analytic_details"))),p.createElement("div",{className:"position-relative"},p.createElement(d.r,{onChange:this.handleDateRangeChange}))),p.createElement(n.u,{data:t??[]}),p.createElement(g.Z,{className:"mb-24 ChartWrapper"},p.createElement(w.Z,{lg:8},p.createElement(o.m,{bars:["visits"],barColors:["#0066FF"],isSelection:!1,listViewModel:this.acquisitionListViewModel,status:this.acquisitionListViewModel?.statusOverview,data:this.acquisitionListViewModel?.visitsData?.toAreaChart(),filterData:this.acquisitionListViewModel?.visitsData?.getFilterName()})),p.createElement(w.Z,{lg:4},p.createElement("div",{className:"mb-24 ChartWrapper bg-white rounded-3 d-flex align-items-center w-100 h-100 position-relative"},p.createElement("div",{className:"w-100"},this.acquisitionListViewModel?.channelTableData?.list?.data?.length?p.createElement(s.S,{height:300,data:this.acquisitionListViewModel?.channelTableData?.list?.toPieChart(),status:this.acquisitionListViewModel?.statusTopTable,colors:["#0066FF","#4747EB","#96C0FF","#D5EEFF"],legendPosition:"bottom"}):p.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},p.createElement(c.x,{icons:v.OBj.PUBLIC_URL+"/assets/images/ic_project.svg",title:e("txt_no_data"),width:"w-50"})))))),p.createElement(I,{listViewModel:this.acquisitionListViewModel,handleSort:this.handleSort,handleSearch:this.handleSearch,...this.props}))}},(0,u.o)(a,"contextType",h.Fv),a)),y=(0,E.Zh)()((0,_.EN)((0,l.s)(D)))},65677:(e,t,i)=>{i.d(t,{u:()=>d});var a=i(30769),s=i(86842),n=i(67294),l=i(91072),o=i(38585),r=i(16550),c=(0,o.Pi)(class extends n.Component{constructor(e){super(e)}render(){return n.createElement("div",{className:"row gx-24"},this.props.data.length>0?this.props.data.map(((e,t)=>n.createElement("div",{className:e.className,key:t},n.createElement(a.T,{title:e.title,icon:e.icon,iconColor:e.iconColor,value:e.value,isIncrease:e.isIncrease,loading:e.loading,options:e.options,defaultValue:e.defaultValue})))):null)}}),d=(0,l.Zh)()((0,r.EN)((0,s.P)(c)))},90298:(e,t,i)=>{i.d(t,{m:()=>c});var a=i(84361),s=i(67294),n=i(91072),l=i(38585),o=i(16550),r=(0,l.Pi)(class extends s.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{t:e,status:t,bars:i,barColors:n,data:l,filterData:o}=this.props;return s.createElement("div",{className:"position-relative h-100"},s.createElement(a.l,{height:500,data:l,colors:["#1AB394"],layout:"horizontal",barColors:n,bars:i,hiddenGrid:{vertical:!1},XAxisOptions:{axisLine:!0,padding:{left:50,right:50}},defaultValue:{label:"Visitors",value:"visitors"},options:[{label:"Visitors",value:"visitors"}],loading:t,tooltipComponent:{header:e("txt_in_total"),value:1===i?.length&&i[0]+":"},status:t,filterData:o,isSelection:!1,isLegend:!0,filterButtons:["days","months","weeks"]}))}}),c=(0,n.Zh)()((0,o.EN)(r))},86842:(e,t,i)=>{i.d(t,{P:()=>l,b:()=>n});var a=i(67294),s=a.createContext(),n=({children:e,viewModel:t})=>a.createElement(s.Provider,{value:t},e),l=e=>t=>a.createElement(e,{...t,viewModel:a.useContext(s)})},30769:(e,t,i)=>{i.d(t,{$:()=>o,T:()=>r});var a=i(20513),s=i(67294),n=i(26982),l=i(73022);document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode("/*\n * @copyright   Copyright (C) 2022 AesirX. All rights reserved.\n * @license     GNU General Public License version 3, see LICENSE.\n */\n.icon-card {\n  width: 56px;\n  height: 56px;\n}\n.icon-card .icon {\n  width: 100%;\n  height: 100%;\n  background-color: var(--sidebar-menu-item-color);\n}\n\n.icon-grown {\n  width: 18px;\n  height: 18px;\n}"));function o(e,t){var i=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return t?"rgba("+i+", "+a+", "+s+", "+t+")":"rgb("+i+", "+a+", "+s+")"}var r=({title:e,icon:t,iconColor:i,value:r,isIncrease:c,percent:d,textPercent:m,options:h,defaultValue:u,loading:p})=>{const[g,w]=(0,s.useState)(u??null),[E,b]=(0,s.useState)(r);(0,s.useEffect)((()=>{let e=h?.find((e=>e?.value===g?.value));b(e?e?.actualValue:r)}),[r]);return s.createElement("div",{className:"bg-white p-24 shadow-sm rounded-3 h-100"},s.createElement("div",{className:"d-flex justify-content-between align-items-center mb-16"},s.createElement("div",{className:"d-flex align-items-center position-relative"},t&&s.createElement("div",{className:"icon-card rounded-circle me-16 ",style:{background:o(i,.15)}},s.createElement("span",{className:"icon arrow d-inline-block align-text-bottom ms-auto",style:{WebkitMaskImage:`url(${t})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",backgroundColor:o(i)}})),s.createElement("h6",{className:"mb-0 fw-medium text-gray-900"},e)),h&&s.createElement(n.nW,{value:g,options:h,className:"fs-sm",isBorder:!0,onChange:e=>{w(e),e?.actualValue&&b(e?.actualValue)},isSearchable:!1})),s.createElement("div",{className:"d-flex justify-content-between position-relative"},p===a.r.LOADING&&s.createElement(n.DC,{className:"d-flex justify-content-start align-items-center bg-white",size:"10px"}),s.createElement("h3",{className:"mb-0 fw-medium fs-24"},E),s.createElement("div",{className:"d-flex flex-wrap align-item-center"},d&&s.createElement("div",{className:"d-flex w-100 mb-sm justify-content-end"},s.createElement("span",{className:"icon-grown arrow d-inline-block align-text-bottom ms-auto text-primary "+(c?"bg-green":"bg-red"),style:{WebkitMaskImage:`url(${l.OBj.PUBLIC_URL}${c?"/assets/images/grown-up.svg":"/assets/images/grown-down.svg"})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center"}}),s.createElement("span",{className:(c?"text-green":"text-danger")+" fw-semibold"},c?"+":"-",d)),s.createElement("div",{className:"w-100 text-gray fs-sm text-end"},m))))}}}]);