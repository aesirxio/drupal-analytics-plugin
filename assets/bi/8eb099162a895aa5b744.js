"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[587],{5587:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a,i,l,o=s(96349),r=s(61887),n=(s(90346),s(85322)),d=s(73524),c=(s(62359),s(80677)),m=s(83874),h=s(20513),g=s(70069),u=s(23541),p=s(67294),E=s(91072),_=s(38585),b=s(16550),w=s(68949),v=s(40872),N=s(38994),M=s(30381),S=s.n(M),x=s(34051),V=s(31555),R=s(47116),F=s.n(R),O=(s(7034),class{constructor(){(0,u.o)(this,"getMetrics",(async(e,t,s,a)=>{try{const i=new v.Q2,l=await i.getMetrics(e,t);l?(0,w.z)((()=>{s(l)})):(0,w.z)((()=>{a({message:"Something went wrong from Server response"})}))}catch(e){(0,w.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,u.o)(this,"getVisitors",(async(e,t,s,a)=>{try{const i=new v.Q2,l=await i.getVisitors(e,t);l?(0,w.z)((()=>{s(l)})):a({message:"Something went wrong from Server response"})}catch(e){(0,w.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,u.o)(this,"getCountries",(async(e,t,s,a)=>{try{const i=new v.Q2,l=await i.getCountries(e,t);l?(0,w.z)((()=>{s(l)})):a({message:"Something went wrong from Server response"})}catch(e){(0,w.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,u.o)(this,"getBrowsers",(async(e,t,s,a)=>{try{const i=new v.Q2,l=await i.getBrowsers(e,t);l?(0,w.z)((()=>{s(l)})):a({message:"Something went wrong from Server response"})}catch(e){(0,w.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,u.o)(this,"getPages",(async(e,t,s,a)=>{try{const i=new v.Q2,l=await i.getPages(e,t);l?(0,w.z)((()=>{s(l)})):a({message:"Something went wrong from Server response"})}catch(e){(0,w.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}}),I=class{constructor(e,t){(0,u.o)(this,"dashboardStore",null),(0,u.o)(this,"status",h.r.READY),(0,u.o)(this,"globalStoreViewModel",null),(0,u.o)(this,"summaryData",null),(0,u.o)(this,"visitorData",null),(0,u.o)(this,"countriesData",null),(0,u.o)(this,"browsersData",null),(0,u.o)(this,"pagesTableData",null),(0,u.o)(this,"initialize",((e,t)=>{this.getMetrics(e,t),this.getVisitors(e,t),this.getCountries(e,t),this.getBrowsers(e,t),this.getPages(e,t)})),(0,u.o)(this,"getMetrics",((e,t)=>{this.status=h.r.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.dashboardStore.getMetrics(this.dataFilter,s,this.callbackOnSummaryDataSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"getVisitors",((e,t)=>{this.status=h.r.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.dashboardStore.getVisitors({...this.dataFilter,page_size:"1000"},s,this.callbackOnVisitorSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"getCountries",((e,t)=>{this.status=h.r.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.dashboardStore.getCountries({...this.dataFilter,page_size:"10","sort[]":"number_of_page_views","sort_direction[]":"desc"},s,this.callbackOnCountriesSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"getBrowsers",((e,t)=>{this.status=h.r.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.dashboardStore.getBrowsers({...this.dataFilter,page_size:"10","sort[]":"number_of_page_views","sort_direction[]":"desc"},s,this.callbackOnBrowsersSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"getPages",(async(e,t)=>{this.status=h.r.LOADING,this.dataFilterPages={page_size:"10","sort[]":"number_of_page_views","sort_direction[]":"desc",...this.dataFilterPages,...e};const s={...this.globalStoreViewModel.dateFilter,...t};await this.dashboardStore.getPages(this.dataFilterPages,s,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"handleFilter",(e=>{this.status=h.r.LOADING,this.dataFilter={...this.dataFilter,...e};const t={...this.globalStoreViewModel.dateFilter};this.dashboardStore.getMetrics(this.dataFilter,t,this.callbackOnDataSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"handleFilterDateRange",((e,t)=>{this.status=h.r.LOADING;let s={date_start:S()(e).format("YYYY-MM-DD"),date_end:S()(t).endOf("day").format("YYYY-MM-DD")};this.initialize(this.dataFilter,s)})),(0,u.o)(this,"handleFilterPages",(async e=>{this.statusTopTable=h.r.LOADING,this.dataFilterPages={...this.dataFilterPages,...e};const t={...this.globalStoreViewModel.dateFilter};await this.dashboardStore.getPages(this.dataFilterPages,t,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"callbackOnErrorHandler",(e=>{this.status=h.r.READY,(0,N.j5)(e.message,"error")})),(0,u.o)(this,"callbackOnSummaryDataSuccessHandler",(e=>{e?(this.status=h.r.READY,this.summaryData=e):(this.status=h.r.ERROR,this.data=[])})),(0,u.o)(this,"callbackOnVisitorSuccessHandler",(e=>{if(e){this.status=h.r.READY;const t=new n.Iv(e.list,this.globalStoreViewModel);this.visitorData=t}else this.status=h.r.ERROR,this.data=[]})),(0,u.o)(this,"callbackOnCountriesSuccessHandler",(e=>{if(e){const t=new d.N(e.list,this.globalStoreViewModel);this.countriesData=t.toCountries(),this.status=h.r.READY}else this.status=h.r.ERROR,this.data=[]})),(0,u.o)(this,"callbackOnBrowsersSuccessHandler",(e=>{if(e){const t=new n.Co(e.list,this.globalStoreViewModel);this.browsersData=t.toBrowsersTableTop(),this.status=h.r.READY}else this.status=h.r.ERROR,this.data=[]})),(0,u.o)(this,"callbackOnPagesSuccessHandler",(e=>{if(e){this.status=h.r.READY;const t=new n.nu(e.list,this.globalStoreViewModel);this.pagesTableData={list:t.toPagesTableTopDashboard(),pagination:e.pagination}}else this.status=h.r.ERROR,this.data=[]})),(0,w.ky)(this),this.dashboardStore=e,this.globalStoreViewModel=t}},f=class{constructor(e,t){(0,u.o)(this,"dashboardListViewModel",null),(0,u.o)(this,"getDashboardListViewModel",(()=>this.dashboardListViewModel)),e&&(this.dashboardListViewModel=new I(e,t))}},A=(0,_.Pi)((a=class extends p.Component{constructor(e){super(e);const{viewModel:t}=e;this.viewModel=t||null,this.state={loading:!1},this.dashboardListViewModel=this.viewModel?this.viewModel.getDashboardListViewModel():null}render(){const{t:e}=this.props,{status:t}=this.dashboardListViewModel;return p.createElement("div",{className:"position-relative ChartWrapper h-100"},t===h.r.LOADING?p.createElement(N.QI,{className:"d-flex justify-content-center align-items-center bg-white"}):p.createElement(p.Fragment,null,p.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24"},p.createElement("h4",{className:"me-24 mb-0 text-blue-0 fw-semibold"},e("txt_Countries")),p.createElement("a",{className:"fs-14 text-body cursor-pointer",onClick:()=>{this.props.integration?this.context.biListViewModel.setIntegrationLink("region-country"):this.props.history.push(`${this.context.biListViewModel.activeDomain}/region-country`)}},p.createElement("span",{className:"pe-1 text-color"},e("txt_view_more")),p.createElement("span",{className:"icon arrow d-inline-block align-text-bottom ms-auto bg-success",style:{WebkitMaskImage:`url(${v.OB.PUBLIC_URL}/assets/images/arrow-right.svg)`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",width:"10px",height:"16px"}}))),this.dashboardListViewModel?.countriesData?.length?p.createElement(x.Z,{className:"align-items-center"},p.createElement(V.Z,{lg:7},p.createElement(o.C,{data:this.dashboardListViewModel?.countriesData,continent:"world"})),p.createElement(V.Z,{lg:5},p.createElement("div",{className:"d-flex align-items-center justify-content-between text-gray fw-semibold pb-1 mb-15 text-uppercase border-bottom"},p.createElement("div",null,e("txt_Country")),p.createElement("div",null,e("txt_views"))),this.dashboardListViewModel?.countriesData?.map(((e,t)=>p.createElement("div",{key:t,className:"d-flex align-items-center justify-content-between mb-15 fs-14 text-gray-900"},p.createElement("div",{className:"d-flex align-items-center"},p.createElement("span",null,p.createElement("span",{className:`me-1 fi fi-${e[v.Fb.COUNTRY_CODE]?.toLowerCase()}`}),e.country)),p.createElement("div",null,e.views)))))):p.createElement(m.x,{icons:v.OB.PUBLIC_URL+"/assets/images/ic_project.svg",title:e("txt_no_data"),width:"w-50"})))}},(0,u.o)(a,"contextType",g.Fv),a)),U=(0,E.Zh)()((0,b.EN)((0,r.P8)(A))),L=(0,_.Pi)((i=class extends p.Component{constructor(e){super(e);const{viewModel:t}=e;this.viewModel=t||null,this.state={loading:!1},this.dashboardListViewModel=this.viewModel?this.viewModel.getDashboardListViewModel():null}render(){const{t:e}=this.props,{status:t}=this.dashboardListViewModel;return p.createElement("div",{className:"position-relative ChartWrapper h-100"},t===h.r.LOADING?p.createElement(N.QI,{className:"d-flex justify-content-center align-items-center bg-white"}):p.createElement(p.Fragment,null,p.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24"},p.createElement("h4",{className:"me-24 mb-0 text-blue-0 fw-semibold"},e("txt_browser"))),this.dashboardListViewModel?.browsersData?.data?.length?p.createElement(x.Z,{className:"align-items-center"},p.createElement(V.Z,{lg:12},p.createElement("div",{className:"d-flex align-items-center justify-content-between text-gray fw-semibold pb-1 mb-15 text-uppercase border-bottom"},p.createElement("div",null,e("txt_browser")),p.createElement("div",null,e("txt_views"))),this.dashboardListViewModel?.browsersData?.data?.map(((e,t)=>p.createElement("div",{key:t,className:"d-flex align-items-center justify-content-between mb-15 fs-14 text-gray-900"},p.createElement("div",{className:"d-flex align-items-center"},p.createElement("span",null,e[v.fp.BROWSER_NAME])),p.createElement("div",null,e[v.lF.NUMBER_OF_VISITORS])))))):p.createElement(m.x,{icons:v.OB.PUBLIC_URL+"/assets/images/ic_project.svg",title:e("txt_no_data"),width:"w-50"})))}},(0,u.o)(i,"contextType",g.Fv),i)),D=(0,E.Zh)()((0,b.EN)((0,r.P8)(L))),C=(0,_.Pi)((l=class extends p.Component{constructor(e){super(e),(0,u.o)(this,"componentDidUpdate",(e=>{this.props.location===e.location&&this.props.activeDomain===e.activeDomain||this.dashboardListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain})})),(0,u.o)(this,"componentDidMount",(()=>{this.dashboardListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain})})),(0,u.o)(this,"handleDateRangeChange",((e,t)=>{this.dashboardListViewModel.handleFilterDateRange(e??t,t??e)})),(0,u.o)(this,"generateCard",(()=>{const{t:e}=this.props;return[{className:"col-lg-3 mb-2 mb-lg-0",title:e("txt_visitors"),icon:v.OB.PUBLIC_URL+"/assets/images/visitor.svg",iconColor:"#1AB394",value:v.Wt.numberWithCommas(this.dashboardListViewModel.summaryData?.[v.lF.NUMBER_OF_VISITORS]),isIncrease:!0,loading:this.dashboardListViewModel.status},{className:"col-lg-3 mb-2 mb-lg-0",title:e("txt_page_views"),icon:v.OB.PUBLIC_URL+"/assets/images/view.svg",iconColor:"#2E71B1",value:v.Wt.numberWithCommas(this.dashboardListViewModel.summaryData?.[v.lF.NUMBER_OF_PAGE_VIEWS]),isIncrease:!1,loading:this.dashboardListViewModel.status,options:[{label:e("txt_all"),value:v.lF.NUMBER_OF_PAGE_VIEWS,actualValue:v.Wt.numberWithCommas(this.dashboardListViewModel.summaryData?.[v.lF.NUMBER_OF_PAGE_VIEWS])},{label:e("txt_unique"),value:v.lF.NUMBER_OF_UNIQUE_PAGE_VIEWS,actualValue:v.Wt.numberWithCommas(this.dashboardListViewModel.summaryData?.[v.lF.NUMBER_OF_UNIQUE_PAGE_VIEWS])}],defaultValue:{label:e("txt_all"),value:v.lF.NUMBER_OF_PAGE_VIEWS,actualValue:v.Wt.numberWithCommas(this.dashboardListViewModel.summaryData?.[v.lF.NUMBER_OF_PAGE_VIEWS])}},{className:"col-lg-3 mb-2 mb-lg-0",title:e("txt_acg_session_duration"),icon:v.OB.PUBLIC_URL+"/assets/images/duration.svg",iconColor:"#EF3737",value:(this.dashboardListViewModel?.summaryData?.[v.lF.AVERAGE_SESSION_DURATION]?S().utc(1e3*this.dashboardListViewModel?.summaryData?.[v.lF.AVERAGE_SESSION_DURATION]).format("HH:mm:ss"):"00:00:00")+"s",isIncrease:!1,loading:this.dashboardListViewModel.status},{className:"col-lg-3 mb-2 mb-lg-0",title:e("txt_page_session"),icon:v.OB.PUBLIC_URL+"/assets/images/page.svg",iconColor:"#FFBE55",value:v.Wt.numberWithCommas(this.dashboardListViewModel?.summaryData?.[v.lF.NUMBER_OF_PAGES_PER_SESSION]),isIncrease:!1,loading:this.dashboardListViewModel.status}]}));const{viewModel:t}=e;this.viewModel=t||null,this.dashboardListViewModel=this.viewModel?this.viewModel.getDashboardListViewModel():null}render(){const{t:e}=this.props,t=this.generateCard();return p.createElement("div",{className:"py-4 px-3 h-100 d-flex flex-column"},p.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24 flex-wrap"},p.createElement("div",{className:"position-relative"},p.createElement("h2",{className:"text-blue-0 fw-bold mb-8px"},e("txt_dashboard")),p.createElement("p",{className:"mb-0 text-color"},e("txt_dashboard_below"))),p.createElement("div",{className:"position-relative"},p.createElement(c.r,{onChange:this.handleDateRangeChange}))),p.createElement(r.uw,{data:t??[]}),p.createElement("div",{className:"row mt-24"},p.createElement("div",{className:"col-lg-6"},p.createElement(r.mI,{lines:["visits","page_views"],areaColors:["#3BB346","#9747FF"],lineColors:["#0FC6C2","#9747FF"],listViewModel:this.dashboardListViewModel,status:this.dashboardListViewModel?.status})),p.createElement("div",{className:"col-lg-6"},p.createElement("div",{className:"bg-white rounded-3 p-24 shadow-sm h-100 position-relative"},p.createElement(r.tw,{data:this.dashboardListViewModel?.pagesTableData?.list,pagination:this.dashboardListViewModel?.pagesTableData?.pagination,isPagination:!1,selectPage:async e=>{await this.dashboardListViewModel.handleFilterPages({page:e})},selectPageSize:async e=>{await this.dashboardListViewModel.handleFilterPages({page:1,page_size:e})},status:this.dashboardListViewModel?.status,...this.props})))),p.createElement(x.Z,{className:"my-24 pb-24"},p.createElement(V.Z,{lg:6},p.createElement("div",{className:"bg-white rounded-3 p-24 shadow-sm h-100 position-relative"},p.createElement(U,{...this.props}))),p.createElement(V.Z,{lg:6},p.createElement("div",{className:"bg-white rounded-3 p-24 shadow-sm h-100 position-relative"},p.createElement(D,{...this.props})))))}},(0,u.o)(l,"contextType",g.Fv),l)),P=(0,E.Zh)()((0,b.EN)((0,r.P8)(C))),B=(0,_.Pi)(class extends p.Component{constructor(e){super(e),(0,u.o)(this,"dashboardStore",null),(0,u.o)(this,"dashboardViewModel",null);const{viewModel:t}=e;this.viewModel=t||null,this.biListViewModel=this.viewModel?this.viewModel.getBiListViewModel():null,this.dashboardStore=new O,this.dashboardViewModel=new f(this.dashboardStore,this.biListViewModel)}render(){return p.createElement(r.bG,{viewModel:this.dashboardViewModel},p.createElement(F(),{trigger:()=>p.createElement("a",{className:`btn btn-success me-2 text-nowrap fw-semibold py-16 lh-sm printButton ${this.props?.i18n?.language}`,href:"#"},this.props.t("txt_export_pdf")),content:()=>this.componentRef}),p.createElement(y,{ref:e=>this.componentRef=e}))}}),y=(0,_.Pi)(class extends p.Component{constructor(e){super(e)}render(){return p.createElement(P,{...this.props})}}),k=(0,E.Zh)()((0,b.EN)((0,g.NQ)(B)))},90346:(e,t,s)=>{s.d(t,{$:()=>r,T:()=>n});var a=s(20513),i=s(67294),l=s(38994),o=s(40872);document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode("/*\n * @copyright   Copyright (C) 2022 AesirX. All rights reserved.\n * @license     GNU General Public License version 3, see LICENSE.\n */\n.icon-card {\n  width: 56px;\n  height: 56px;\n}\n.icon-card .icon {\n  width: 100%;\n  height: 100%;\n  background-color: var(--sidebar-menu-item-color);\n}\n\n.icon-grown {\n  width: 18px;\n  height: 18px;\n}"));function r(e,t){var s=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return t?"rgba("+s+", "+a+", "+i+", "+t+")":"rgb("+s+", "+a+", "+i+")"}var n=({title:e,icon:t,iconColor:s,value:n,isIncrease:d,percent:c,textPercent:m,options:h,defaultValue:g,loading:u})=>{const[p,E]=(0,i.useState)(g??null),[_,b]=(0,i.useState)(n);(0,i.useEffect)((()=>{b(n)}),[n]);return i.createElement("div",{className:"bg-white p-24 shadow-sm rounded-3 h-100"},i.createElement("div",{className:"d-flex justify-content-between align-items-center mb-16"},i.createElement("div",{className:"d-flex align-items-center position-relative"},t&&i.createElement("div",{className:"icon-card rounded-circle me-16 ",style:{background:r(s,.15)}},i.createElement("span",{className:"icon arrow d-inline-block align-text-bottom ms-auto",style:{WebkitMaskImage:`url(${t})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",backgroundColor:r(s)}})),i.createElement("h6",{className:"mb-0 fw-semibold text-blue-0"},e)),h&&i.createElement(l.nW,{value:p,options:h,className:"fs-sm",isBorder:!0,onChange:e=>{E(e),e?.actualValue&&b(e?.actualValue)},isSearchable:!1})),i.createElement("div",{className:"d-flex justify-content-between position-relative"},u===a.r.LOADING&&i.createElement(l.DC,{className:"d-flex justify-content-start align-items-center bg-white",size:"10px"}),i.createElement("h3",{className:"mb-0 fw-semibold fs-24 text-color"},_),i.createElement("div",{className:"d-flex flex-wrap align-item-center"},c&&i.createElement("div",{className:"d-flex w-100 mb-sm justify-content-end"},i.createElement("span",{className:"icon-grown arrow d-inline-block align-text-bottom ms-auto text-primary "+(d?"bg-green":"bg-red"),style:{WebkitMaskImage:`url(${o.OB.PUBLIC_URL}${d?"/assets/images/grown-up.svg":"/assets/images/grown-down.svg"})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center"}}),i.createElement("span",{className:(d?"text-green":"text-danger")+" fw-semibold"},d?"+":"-",c)),i.createElement("div",{className:"w-100 text-gray fs-sm text-end"},m))))}},85322:(e,t,s)=>{s.d(t,{Co:()=>d,Iv:()=>n,nu:()=>c});var a=s(23541),i=s(30381),l=s.n(i),o=s(40872),r=s(67294),n=class{constructor(e,t){(0,a.o)(this,"data",[]),(0,a.o)(this,"globalViewModel",null),(0,a.o)(this,"toRaw",(()=>this.data)),(0,a.o)(this,"toAreaChart",(()=>{const e=(0,o.F9)(this.globalViewModel?.dateFilter?.date_start,this.globalViewModel?.dateFilter?.date_end).map((e=>{const t=this.data.find((t=>l()(t.date).format("YYYY-MM-DD")===e));return{name:e&&l()(e,"YYYY-MM-DD").format("MM-DD"),visits:t?.[o.zA.VISITS]??0,page_views:t?.[o.zA.TOTAL_PAGE_VIEWS]??0}}));return[{visitors:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(((e,t)=>{const s=this.data.filter((e=>l()(e?.date).month()===t));let a=0,i=0;return s&&(a=s.reduce(((e,t)=>e+t[o.zA.VISITS]),0),i=s.reduce(((e,t)=>e+t[o.zA.TOTAL_PAGE_VIEWS]),0)),{name:e,visits:a,page_views:i}}))},{visitors:e}]})),(0,a.o)(this,"getFilterName",(()=>[{label:"Visitors",value:"visitors"}])),e&&(this.data=e??[],this.globalViewModel=t)}},d=class{constructor(e,t){(0,a.o)(this,"data",[]),(0,a.o)(this,"globalViewModel",null),(0,a.o)(this,"toRaw",(()=>this.data)),(0,a.o)(this,"toBrowsersTableTop",(()=>{const e=["txt_browser","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[o.fp.BROWSER_NAME,o.lF.NUMBER_OF_VISITORS,o.lF.NUMBER_OF_PAGE_VIEWS,o.lF.NUMBER_OF_UNIQUE_PAGE_VIEWS,o.lF.BOUNCE_RATE,o.lF.NUMBER_OF_PAGES_PER_SESSION,o.lF.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,width:t===o.fp.BROWSER_NAME?250:t===o.lF.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,Cell:({cell:e,column:t})=>t.id===o.fp.BROWSER_NAME?r.createElement("div",{className:"px-15"},""===e?.value?"Unknown":e?.value):t.id===o.lF.BOUNCE_RATE?r.createElement("div",{className:"px-3 text-end"},e?.value+"%"):t.id===o.lF.AVERAGE_SESSION_DURATION?r.createElement("div",{className:"px-3 text-end"},e?.value?l().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):r.createElement("div",{className:"px-15 text-end"},o.Wt.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})})))?.sort(((e,t)=>t[o.lF.NUMBER_OF_VISITORS]-e[o.lF.NUMBER_OF_VISITORS]));return{header:s,data:a}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},c=class{constructor(e,t){(0,a.o)(this,"data",[]),(0,a.o)(this,"globalViewModel",null),(0,a.o)(this,"toRaw",(()=>this.data)),(0,a.o)(this,"toPagesTableTopDashboard",(()=>{const e=["txt_page","txt_page_views","txt_time_on_page"],t=[o.RM.URL,o.lF.NUMBER_OF_PAGE_VIEWS,o.lF.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,Cell:({cell:e,column:t})=>{const s=t.id===o.RM.URL&&new URL(e?.value);return t.id===o.RM.URL?r.createElement("div",{className:"px-15"},""===s?"Unknown":s.pathname+s.search):t.id===o.lF.AVERAGE_SESSION_DURATION?r.createElement("div",{className:"px-15 text-end"},e?.value?l().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):r.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})})))?.sort(((e,t)=>t[o.lF.NUMBER_OF_PAGE_VIEWS]-e[o.lF.NUMBER_OF_PAGE_VIEWS]));return{header:s,data:a}}return{header:[],data:[]}})),(0,a.o)(this,"toPagesTableTop",(()=>{const e=["txt_page","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[o.RM.URL,o.lF.NUMBER_OF_VISITORS,o.lF.NUMBER_OF_UNIQUE_PAGE_VIEWS,o.lF.BOUNCE_RATE,o.lF.NUMBER_OF_PAGES_PER_SESSION,o.lF.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,width:t===o.RM.URL?300:t===o.lF.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,tooltip:t===o.lF.NUMBER_OF_UNIQUE_PAGE_VIEWS?"txt_bounce_rate":"",Cell:({cell:e,column:t})=>{const s=t.id===o.RM.URL&&new URL(e?.value);return t.id===o.RM.URL?r.createElement("div",{className:"px-15"},""===s?"Unknown":s.pathname+s.search):t.id===o.lF.BOUNCE_RATE?r.createElement("div",{className:"px-3 text-end"},e?.value+"%"):t.id===o.lF.AVERAGE_SESSION_DURATION?r.createElement("div",{className:"px-15 text-end"},e?.value?l().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):r.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})})))?.sort(((e,t)=>t[o.lF.NUMBER_OF_PAGE_VIEWS]-e[o.lF.NUMBER_OF_PAGE_VIEWS]));return{header:s,data:a}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}}},61887:(e,t,s)=>{s.d(t,{P8:()=>b,bG:()=>_,mI:()=>M,tw:()=>S,uw:()=>v});var a=s(90346),i=s(62359),l=s(83874),o=s(20513),r=s(67294),n=s(91072),d=s(38585),c=s(16550),m=s(38994),h=s(40872),g=s(42444),u=s(70982),p=s(56646),E=r.createContext(),_=({children:e,viewModel:t})=>r.createElement(E.Provider,{value:t},e),b=e=>t=>r.createElement(e,{...t,viewModel:r.useContext(E)}),w=(0,d.Pi)(class extends r.Component{constructor(e){super(e)}render(){return r.createElement("div",{className:"row gx-24"},this.props.data.length>0?this.props.data.map(((e,t)=>r.createElement("div",{className:e.className,key:t},r.createElement(a.T,{title:e.title,icon:e.icon,iconColor:e.iconColor,value:e.value,isIncrease:e.isIncrease,loading:e.loading,options:e.options,defaultValue:e.defaultValue})))):null)}}),v=(0,n.Zh)()((0,c.EN)(b(w))),N=(0,d.Pi)(class extends r.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{t:e,status:t,lines:s,lineColors:a,areaColors:l}=this.props;return r.createElement("div",{className:"position-relative h-100"},r.createElement(i.J,{chartTitle:e("txt_menu_overview"),height:420,data:this?.listViewModel?.visitorData?.toAreaChart(),colors:["#1AB394"],lineType:"monotone",areaColors:l,lineColors:a,lines:s,isDot:!0,hiddenGrid:{vertical:!1},XAxisOptions:{axisLine:!0,padding:{left:50,right:50}},defaultValue:{label:"Visitors",value:"visitors"},options:[{label:"Visitors",value:"visitors"}],loading:t,tooltipComponent:{header:e("txt_in_total"),value:1===s?.length&&s[0]+":"},status:t,filterData:this?.listViewModel?.visitorData?.getFilterName(),isSelection:!1,isLegend:!0}))}}),M=(0,n.Zh)()((0,c.EN)(N)),S=(0,n.Zh)()((0,c.EN)((e=>{const{data:t,isPagination:s=!0,pagination:a,selectPage:i,selectPageSize:n,status:d,t:c}=e,E=r.useMemo((()=>t?.header?.map(((e,t)=>{let s="";switch(e?.accessor){case h.lF.NUMBER_OF_VISITORS:s="txt_tooltip_visitors";break;case h.lF.NUMBER_OF_PAGE_VIEWS:s="txt_tooltip_page_views";break;case h.lF.NUMBER_OF_UNIQUE_PAGE_VIEWS:s="txt_tooltip_unique_page_views";break;case h.lF.BOUNCE_RATE:s="txt_tooltip_bounce_rate";break;case h.lF.NUMBER_OF_PAGES_PER_SESSION:s="txt_tooltip_page_session";break;case h.lF.AVERAGE_SESSION_DURATION:s="txt_tooltip_avg_session_duration";break;default:s=""}return{...e,className:`px-15 py-16 fs-sm fw-semibold border-bottom border-gray-800 align-middle ${0!==t?"rounded-top-end-3 text-end":""} ${0===t?"rounded-top-start-3":""}`,width:e.width?e.width:0===t?"auto":170,Header:r.createElement("span",{className:"align-middle"},c(e.Header),s&&r.createElement(r.Fragment,null,r.createElement(u.G,{"data-tooltip-id":"tooltipTable","data-tooltip-content":c(s),className:"mx-sm fs-12 mb-1",icon:p.DB}),r.createElement(g.u,{id:"tooltipTable"})))}}))),[t?.header]),_=r.useMemo((()=>t?.data),[t?.data]);return r.createElement(r.Fragment,null,d===o.r.LOADING?r.createElement(m.QI,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):t?r.createElement(l.k,{classNameTable:"mb-0 table table-striped",columns:E,data:_,canSort:!0,pagination:s,paginationClass:"fs-14 px-4",isPaginationAPI:!0,paginationResponse:a,selectPage:i,selectPageSize:n}):r.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},r.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},r.createElement(l.x,{icons:h.OB.PUBLIC_URL+"/assets/images/ic_project.svg",title:c("txt_no_data"),width:"w-50"}))))})))}}]);