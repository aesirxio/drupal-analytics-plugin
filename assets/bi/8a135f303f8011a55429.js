"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[288],{95288:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var i,s=a(61887),l=(a(90346),a(77746)),n=(a(62359),a(80677)),o=(a(83874),a(20513),a(70069)),r=a(23541),c=a(67294),d=a(34051),m=a(31555),u=a(91072),p=a(38585),g=a(40872),h=a(16550),w=a(30381),E=a.n(w),v=a(17905),b=a(91136),_=(a(7034),(0,p.Pi)(class extends c.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{t:e}=this.props,{statusTopTable:t}=this.listViewModel;return c.createElement("div",{className:"position-relative h-100"},c.createElement(v.Z.Container,{id:"left-tabs-example",defaultActiveKey:"country"},c.createElement(d.Z,{className:"gx-24"},c.createElement(m.Z,{sm:3},c.createElement("div",{className:"bg-white rounded-3 p-24 shadow-sm"},c.createElement(b.Z,{variant:"pills",className:"flex-column"},c.createElement(b.Z.Item,null,c.createElement(b.Z.Link,{eventKey:"country",className:"ps-0"},e("txt_Country"))),c.createElement(b.Z.Item,null,c.createElement(b.Z.Link,{eventKey:"city",className:"ps-0"},e("txt_City"))),c.createElement(b.Z.Item,null,c.createElement(b.Z.Link,{eventKey:"browser",className:"ps-0"},e("txt_browser"))),c.createElement(b.Z.Item,null,c.createElement(b.Z.Link,{eventKey:"language",className:"ps-0"},e("txt_language")))))),c.createElement(m.Z,{sm:9},c.createElement("div",{className:"bg-white rounded-3 shadow-sm h-100 position-relative"},c.createElement(v.Z.Content,null,c.createElement(v.Z.Pane,{eventKey:"country"},c.createElement(s.tw,{data:this.listViewModel?.countriesTableData?.list,pagination:this.listViewModel?.countriesTableData?.pagination,selectPage:async e=>{await this.listViewModel.handleFilterCountries({page:e})},selectPageSize:async e=>{await this.listViewModel.handleFilterCountries({page:1,page_size:e})},status:t,...this.props})),c.createElement(v.Z.Pane,{eventKey:"city"},c.createElement(s.tw,{data:this.listViewModel?.citiesTableData?.list,pagination:this.listViewModel?.citiesTableData?.pagination,selectPage:async e=>{await this.listViewModel.handleFilterCities({page:e})},selectPageSize:async e=>{await this.listViewModel.handleFilterCountries({page:1,page_size:e})},status:t,...this.props})),c.createElement(v.Z.Pane,{eventKey:"browser"},c.createElement(s.tw,{data:this.listViewModel?.browsersTableData?.list,pagination:this.listViewModel?.browsersTableData?.pagination,selectPage:async e=>{await this.listViewModel.handleFilterBrowsers({page:e})},selectPageSize:async e=>{await this.listViewModel.handleFilterCountries({page:1,page_size:e})},status:t,...this.props})),c.createElement(v.Z.Pane,{eventKey:"language"},c.createElement(s.tw,{data:this.listViewModel?.languagesTableData?.list,pagination:this.listViewModel?.languagesTableData?.pagination,selectPage:async e=>{await this.listViewModel.handleFilterLanguages({page:e})},selectPageSize:async e=>{await this.listViewModel.handleFilterLanguages({page:1,page_size:e})},status:t,...this.props}))))))))}})),N=(0,u.Zh)()((0,h.EN)(_)),x=(0,p.Pi)((i=class extends c.Component{constructor(e){super(e),(0,r.o)(this,"componentDidMount",(()=>{this.audienceListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain})})),(0,r.o)(this,"componentDidUpdate",(e=>{this.props.location===e.location&&this.props.activeDomain===e.activeDomain||this.audienceListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain})})),(0,r.o)(this,"handleDateRangeChange",((e,t)=>{this.audienceListViewModel.handleFilterDateRange(e??t,t??e)})),(0,r.o)(this,"generateCard",(()=>{const{t:e}=this.props;return[{className:"col-12 mb-24",title:e("txt_visitors"),icon:g.OB.PUBLIC_URL+"/assets/images/visitor.svg",iconColor:"#1AB394",value:g.Wt.numberWithCommas(this.audienceListViewModel.metricsData?.[g.lF.NUMBER_OF_VISITORS]),isIncrease:!0,loading:this.audienceListViewModel.statusMetrics},{className:"col-12 mb-24",title:e("txt_acg_session_duration"),icon:g.OB.PUBLIC_URL+"/assets/images/duration.svg",iconColor:"#EF3737",value:(this.audienceListViewModel?.metricsData?.[g.lF.AVERAGE_SESSION_DURATION]?E().utc(1e3*this.audienceListViewModel?.metricsData?.[g.lF.AVERAGE_SESSION_DURATION]).format("HH:mm:ss"):"00:00:00")+"s",isIncrease:!1,loading:this.audienceListViewModel.statusMetrics},{className:"col-12",title:e("txt_page_session"),icon:g.OB.PUBLIC_URL+"/assets/images/page.svg",iconColor:"#FFBE55",value:g.Wt.numberWithCommas(this.audienceListViewModel?.metricsData?.[g.lF.NUMBER_OF_PAGES_PER_SESSION]),isIncrease:!1,loading:this.audienceListViewModel.statusMetrics}]}));const{viewModel:t}=e;this.viewModel=t||null,this.audienceListViewModel=this.viewModel?this.viewModel.getAudienceListViewModel():null}render(){const{t:e}=this.props,t=this.generateCard();return c.createElement("div",{className:"py-4 px-3"},c.createElement("div",{className:"d-flex align-items-center justify-content-between mb-3"},c.createElement("div",null,c.createElement("h2",{className:"text-blue-0 fw-bold mb-8px"},e("txt_audience")),c.createElement("p",{className:"mb-0 text-color"},e("txt_analytic_details"))),c.createElement("div",{className:"position-relative"},c.createElement(n.r,{onChange:this.handleDateRangeChange}))),c.createElement(d.Z,{className:"mb-24"},c.createElement(m.Z,{lg:9},c.createElement(s.mI,{lines:["visits"],areaColors:["#3BB346"],lineColors:["#0FC6C2"],isSelection:!1,listViewModel:this.audienceListViewModel,status:this.audienceListViewModel?.statusOverview})),c.createElement(m.Z,{lg:3},c.createElement(s.uw,{data:t??[]}))),c.createElement(N,{listViewModel:this.audienceListViewModel}))}},(0,r.o)(i,"contextType",o.Fv),i)),M=(0,u.Zh)()((0,h.EN)((0,l.b)(x)))},90346:(e,t,a)=>{a.d(t,{$:()=>o,T:()=>r});var i=a(20513),s=a(67294),l=a(38994),n=a(40872);document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode("/*\n * @copyright   Copyright (C) 2022 AesirX. All rights reserved.\n * @license     GNU General Public License version 3, see LICENSE.\n */\n.icon-card {\n  width: 56px;\n  height: 56px;\n}\n.icon-card .icon {\n  width: 100%;\n  height: 100%;\n  background-color: var(--sidebar-menu-item-color);\n}\n\n.icon-grown {\n  width: 18px;\n  height: 18px;\n}"));function o(e,t){var a=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return t?"rgba("+a+", "+i+", "+s+", "+t+")":"rgb("+a+", "+i+", "+s+")"}var r=({title:e,icon:t,iconColor:a,value:r,isIncrease:c,percent:d,textPercent:m,options:u,defaultValue:p,loading:g})=>{const[h,w]=(0,s.useState)(p??null),[E,v]=(0,s.useState)(r);(0,s.useEffect)((()=>{v(r)}),[r]);return s.createElement("div",{className:"bg-white p-24 shadow-sm rounded-3 h-100"},s.createElement("div",{className:"d-flex justify-content-between align-items-center mb-16"},s.createElement("div",{className:"d-flex align-items-center position-relative"},t&&s.createElement("div",{className:"icon-card rounded-circle me-16 ",style:{background:o(a,.15)}},s.createElement("span",{className:"icon arrow d-inline-block align-text-bottom ms-auto",style:{WebkitMaskImage:`url(${t})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",backgroundColor:o(a)}})),s.createElement("h6",{className:"mb-0 fw-semibold text-blue-0"},e)),u&&s.createElement(l.nW,{value:h,options:u,className:"fs-sm",isBorder:!0,onChange:e=>{w(e),e?.actualValue&&v(e?.actualValue)},isSearchable:!1})),s.createElement("div",{className:"d-flex justify-content-between position-relative"},g===i.r.LOADING&&s.createElement(l.DC,{className:"d-flex justify-content-start align-items-center bg-white",size:"10px"}),s.createElement("h3",{className:"mb-0 fw-semibold fs-24 text-color"},E),s.createElement("div",{className:"d-flex flex-wrap align-item-center"},d&&s.createElement("div",{className:"d-flex w-100 mb-sm justify-content-end"},s.createElement("span",{className:"icon-grown arrow d-inline-block align-text-bottom ms-auto text-primary "+(c?"bg-green":"bg-red"),style:{WebkitMaskImage:`url(${n.OB.PUBLIC_URL}${c?"/assets/images/grown-up.svg":"/assets/images/grown-down.svg"})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center"}}),s.createElement("span",{className:(c?"text-green":"text-danger")+" fw-semibold"},c?"+":"-",d)),s.createElement("div",{className:"w-100 text-gray fs-sm text-end"},m))))}},61887:(e,t,a)=>{a.d(t,{P8:()=>v,bG:()=>E,mI:()=>x,tw:()=>M,uw:()=>_});var i=a(90346),s=a(62359),l=a(83874),n=a(20513),o=a(67294),r=a(91072),c=a(38585),d=a(16550),m=a(38994),u=a(40872),p=a(42444),g=a(70982),h=a(56646),w=o.createContext(),E=({children:e,viewModel:t})=>o.createElement(w.Provider,{value:t},e),v=e=>t=>o.createElement(e,{...t,viewModel:o.useContext(w)}),b=(0,c.Pi)(class extends o.Component{constructor(e){super(e)}render(){return o.createElement("div",{className:"row gx-24"},this.props.data.length>0?this.props.data.map(((e,t)=>o.createElement("div",{className:e.className,key:t},o.createElement(i.T,{title:e.title,icon:e.icon,iconColor:e.iconColor,value:e.value,isIncrease:e.isIncrease,loading:e.loading,options:e.options,defaultValue:e.defaultValue})))):null)}}),_=(0,r.Zh)()((0,d.EN)(v(b))),N=(0,c.Pi)(class extends o.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{t:e,status:t,lines:a,lineColors:i,areaColors:l}=this.props;return o.createElement("div",{className:"position-relative h-100"},o.createElement(s.J,{chartTitle:e("txt_menu_overview"),height:420,data:this?.listViewModel?.visitorData?.toAreaChart(),colors:["#1AB394"],lineType:"monotone",areaColors:l,lineColors:i,lines:a,isDot:!0,hiddenGrid:{vertical:!1},XAxisOptions:{axisLine:!0,padding:{left:50,right:50}},defaultValue:{label:"Visitors",value:"visitors"},options:[{label:"Visitors",value:"visitors"}],loading:t,tooltipComponent:{header:e("txt_in_total"),value:1===a?.length&&a[0]+":"},status:t,filterData:this?.listViewModel?.visitorData?.getFilterName(),isSelection:!1,isLegend:!0}))}}),x=(0,r.Zh)()((0,d.EN)(N)),M=(0,r.Zh)()((0,d.EN)((e=>{const{data:t,isPagination:a=!0,pagination:i,selectPage:s,selectPageSize:r,status:c,t:d}=e,w=o.useMemo((()=>t?.header?.map(((e,t)=>{let a="";switch(e?.accessor){case u.lF.NUMBER_OF_VISITORS:a="txt_tooltip_visitors";break;case u.lF.NUMBER_OF_PAGE_VIEWS:a="txt_tooltip_page_views";break;case u.lF.NUMBER_OF_UNIQUE_PAGE_VIEWS:a="txt_tooltip_unique_page_views";break;case u.lF.BOUNCE_RATE:a="txt_tooltip_bounce_rate";break;case u.lF.NUMBER_OF_PAGES_PER_SESSION:a="txt_tooltip_page_session";break;case u.lF.AVERAGE_SESSION_DURATION:a="txt_tooltip_avg_session_duration";break;default:a=""}return{...e,className:`px-15 py-16 fs-sm fw-semibold border-bottom border-gray-800 align-middle ${0!==t?"rounded-top-end-3 text-end":""} ${0===t?"rounded-top-start-3":""}`,width:e.width?e.width:0===t?"auto":170,Header:o.createElement("span",{className:"align-middle"},d(e.Header),a&&o.createElement(o.Fragment,null,o.createElement(g.G,{"data-tooltip-id":"tooltipTable","data-tooltip-content":d(a),className:"mx-sm fs-12 mb-1",icon:h.DB}),o.createElement(p.u,{id:"tooltipTable"})))}}))),[t?.header]),E=o.useMemo((()=>t?.data),[t?.data]);return o.createElement(o.Fragment,null,c===n.r.LOADING?o.createElement(m.QI,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):t?o.createElement(l.k,{classNameTable:"mb-0 table table-striped",columns:w,data:E,canSort:!0,pagination:a,paginationClass:"fs-14 px-4",isPaginationAPI:!0,paginationResponse:i,selectPage:s,selectPageSize:r}):o.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},o.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},o.createElement(l.x,{icons:u.OB.PUBLIC_URL+"/assets/images/ic_project.svg",title:d("txt_no_data"),width:"w-50"}))))})))}}]);