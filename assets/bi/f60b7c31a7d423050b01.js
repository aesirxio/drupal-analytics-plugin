"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[176],{90176:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var s,i,l=a(54372),o=a(84361),r=(a(20734),a(16505)),n=a(28949),c=a(15218),d=a(20513),h=a(70069),m=a(23541),u=a(67294),g=a(91072),p=a(38585),E=a(16550),_=a(68949),w=a(73022),v=a(26982),b=a(30381),R=a.n(b),M=a(41330),S=a(34051),f=a(31555),N=a(12086),x=a(70982),F=a(59417),V=a(42444),D=a(56646),O=(a(7034),class{constructor(){(0,m.o)(this,"getVisits",(async(e,t,a,s)=>{try{const i=new w.Q22,l=await i.getVisits(e,t);l&&"AxiosError"!==l?.name?(0,_.z)((()=>{a(l)})):s({message:l?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,m.o)(this,"getPages",(async(e,t,a,s)=>{try{const i=new w.Q22,l=await i.getPages(e,t);l?(0,_.z)((()=>{a(l)})):s({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}}),I=class{constructor(e,t){(0,m.o)(this,"data",[]),(0,m.o)(this,"globalViewModel",null),(0,m.o)(this,"toRaw",(()=>this.data)),(0,m.o)(this,"toAreaChart",(()=>{const e=(0,w.F9f)(this.globalViewModel?.dateFilter?.date_start,this.globalViewModel?.dateFilter?.date_end),t=e.map((e=>{const t=this.data?.length&&this.data?.find((t=>R()(t.date).format("YYYY-MM-DD")===e));return{name:e&&R()(e,"YYYY-MM-DD").format("DD MMM"),visits:t?.[w.zAx.VISITS]??0,acquisition_views:t?.[w.zAx.TOTAL_PAGE_VIEWS]??0,unique_visits:t?.unique_visits??0}})),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(((e,t)=>{const a=this.data.filter((e=>R()(e?.date).month()===t));let s=0,i=0,l=0;return a&&(s=a.reduce(((e,t)=>e+t[w.zAx.VISITS]),0),i=a.reduce(((e,t)=>e+t[w.zAx.TOTAL_PAGE_VIEWS]),0),l=a.reduce(((e,t)=>e+t.unique_visits),0)),{name:e,visits:s,acquisition_views:i,unique_visits:l}})),s={};e.forEach((e=>{const t=R()(e).startOf("isoWeek"),a=R()(e).endOf("isoWeek"),i=`${t.format("DD MMM")} - ${a.format("DD MMM")}`;s[i]||(s[i]={visits:0,acquisition_views:0,unique_visits:0});const l=this.data.filter((e=>R()(e?.date).isBetween(t,a,null,"[]")));if(l){const e=l.reduce(((e,t)=>e+t[w.zAx.VISITS]),0),t=l.reduce(((e,t)=>e+t[w.zAx.TOTAL_PAGE_VIEWS]),0),a=l.reduce(((e,t)=>e+t.unique_visits),0);s[i].visits+=e,s[i].acquisition_views+=t,s[i].unique_visits+=a}}));return[{visitors:a},{visitors:t},{visitors:Object.keys(s).map((e=>({name:e,visits:s[e].visits,acquisition_views:s[e].acquisition_views,unique_visits:s[e].unique_visits})))}]})),(0,m.o)(this,"getFilterName",(()=>[{label:"Visitors",value:"visitors"}])),(0,m.o)(this,"toBrowsersTableTop",(()=>{const e=["txt_browser","txt_visitors","%"],t=Math.max(...this.data.map((e=>e[w.lF8.NUMBER_OF_VISITORS]))),a=[w.fpu.BROWSER_NAME,w.lF8.NUMBER_OF_VISITORS,w.lF8.NUMBER_OF_VISITORS_PERCENT];if(this.data?.length){const s=a.map(((a,s)=>({Header:e[s],accessor:a,allowSort:!0,width:a===w.fpu.BROWSER_NAME?250:a===w.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:100,Cell:({cell:e,column:a,row:s})=>{let i="";switch(e?.value){case"Chrome":i="/assets/images/chrome.svg";break;case"Safari":i="/assets/images/safari.svg";break;case"Firefox":i="/assets/images/firefox.svg";break;case"Microsoft Edge":i="/assets/images/microsoft_edge.svg";break;case"Opera":i="/assets/images/opera.svg";break;case"Samsung Internet for Android":i="/assets/images/samsung_browser.svg";break;case"Googlebot":i="/assets/images/google_bot.svg";break;case"Yandex Browser":i="/assets/images/yandex_browser.svg"}return u.createElement(u.Fragment,null,a.id===w.fpu.BROWSER_NAME?u.createElement("div",{className:"d-flex align-items-center py-sm px-20 position-relative"},u.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0",style:{backgroundColor:"#E7EFFF",width:`${(s.cells[1]?.value/t*100)?.toString()}%`}}),u.createElement("div",{className:"z-1"},i&&u.createElement(M.Z,{className:"me-12px",style:{width:22,height:22},src:w.OBj.PUBLIC_URL+i,alt:"icons"}),""===e?.value?"Unknown":e?.value)):a.id===w.lF8.NUMBER_OF_VISITORS_PERCENT?u.createElement("div",{className:"text-end"},w.WtE.numberWithCommas(e?.value)??null):u.createElement("div",{className:"text-end pe-2"},w.WtE.numberWithCommas(e?.value)??null))}}))),i=this.data?.map((e=>(e[w.lF8.NUMBER_OF_VISITORS_PERCENT]=e[w.lF8.NUMBER_OF_VISITORS_PERCENT]/10,{...e,...a.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=i?.map((e=>{for(let t in e)a.includes(t)||delete e[t];return e}));return{header:s,data:l}}return{header:[],data:[]}})),(0,m.o)(this,"toDevicesTableTop",(()=>{const e=["txt_device","txt_visitors"],t=[w.t9E.DEVICE,w.lF8.NUMBER_OF_VISITORS],a=Math.max(...this.data.map((e=>e[w.lF8.NUMBER_OF_VISITORS])));if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,width:t===w.t9E.DEVICE?250:t===w.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,Cell:({cell:e,column:t,row:s})=>u.createElement(u.Fragment,null,t.id===w.t9E.DEVICE?u.createElement("div",{className:"d-flex align-items-center text-capitalize py-sm px-20 position-relative"},u.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0",style:{backgroundColor:"#E7EFFF",width:`${(s.cells[1]?.value/a*100)?.toString()}%`}}),u.createElement("div",{className:"z-1"},""===e?.value?"Unknown":e?.value)):u.createElement("div",{className:" text-end"},w.WtE.numberWithCommas(e?.value)??null))}))),i=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=i?.map((e=>{for(let a in e)t.includes(a)||delete e[a];return e}));return{header:s,data:l}}return{header:[],data:[]}})),(0,m.o)(this,"toSourcesTableTopAcquisitionDetail",(()=>{const e=["txt_source","txt_visitors"],t=[w.fgu.REFERER,w.lF8.NUMBER_OF_VISITORS],a=Math.max(...this.data.map((e=>e[w.lF8.NUMBER_OF_VISITORS])));if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,Cell:({cell:e,column:t,row:s})=>{let i="";if(t.id===w.fgu.REFERER){if(e?.value){const t=new URL(e?.value);i="aesirx.io"===t?.hostname?`${w.OBj.PUBLIC_URL}/assets/images/logo/welcome-logo.png`:""}switch(e?.value){case"":i=`${w.OBj.PUBLIC_URL}/assets/images/direct.png`;break;case"https://www.google.com/":i=`${w.OBj.PUBLIC_URL}/assets/images/google.png`;break;case"https://www.facebook.com/":i=`${w.OBj.PUBLIC_URL}/assets/images/facebook.png`;break;case"https://www.linkedin.com/":i=`${w.OBj.PUBLIC_URL}/assets/images/linkedin.png`;break;case"https://yandex.ru/":i=`${w.OBj.PUBLIC_URL}/assets/images/yandex.png`;break;case"https://duckduckgo.com/":i=`${w.OBj.PUBLIC_URL}/assets/images/duckduckgo.svg`;break;case"https://www.reddit.com/":i=`${w.OBj.PUBLIC_URL}/assets/images/reddit.png`;break;case"https://twitter.com/":i=`${w.OBj.PUBLIC_URL}/assets/images/twitter.png`;break;case"https://github.com/":i=`${w.OBj.PUBLIC_URL}/assets/images/github.png`}}return t.id===w.fgu.REFERER?u.createElement("a",{...e?.value?{target:"_blank",rel:"noreferrer",href:`${e?.value}`}:{},className:"d-block position-relative px-20 py-sm text-gray-900 table-link"},u.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0 table-link-bg",style:{width:`${(s.cells[1]?.value/a*100)?.toString()}%`}}),u.createElement("div",{className:"position-relative z-1 text-ellipsis line-clamp-1 pe-20"},u.createElement("div",{className:"position-relative table-link-text"},i&&u.createElement(M.Z,{className:"me-sm object-fit-contain",style:{width:22,height:22},src:w.OBj.PUBLIC_URL+i,alt:"icons"}),e?.value?e?.value:"Direct / None"))):u.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),i=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})})));return{header:s,data:i}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},U=class{constructor(e,t){(0,m.o)(this,"acquisitionDetailStore",null),(0,m.o)(this,"status",d.r.READY),(0,m.o)(this,"statusTopTable",d.r.READY),(0,m.o)(this,"statusTopBrowser",d.r.READY),(0,m.o)(this,"statusTopSourceTable",d.r.READY),(0,m.o)(this,"globalStoreViewModel",null),(0,m.o)(this,"summaryData",null),(0,m.o)(this,"visitorData",null),(0,m.o)(this,"countriesData",null),(0,m.o)(this,"browsersData",null),(0,m.o)(this,"devicesData",null),(0,m.o)(this,"devicesTableData",null),(0,m.o)(this,"acquisitionsTableData",null),(0,m.o)(this,"sourcesTableData",null),(0,m.o)(this,"sortByPages",{"sort[]":"","sort_direction[]":""}),(0,m.o)(this,"initialize",((e,t,a)=>{this.getVisits(e,t),this.getPages(e,t,a,{},a)})),(0,m.o)(this,"getVisits",((e,t)=>{this.status=d.r.LOADING,this.dataFilter={...this.dataFilter,...e};const a={...this.globalStoreViewModel.dateFilter,...t};this.acquisitionDetailStore.getVisits({...this.dataFilter,page_size:"1000"},a,this.callbackOnVisitsSuccessHandler,this.callbackOnErrorHandler)})),(0,m.o)(this,"getPages",(async(e,t,a={},s={},i={})=>{this.statusTopTable=d.r.LOADING,this.sortBy=a,this.search=s,this.dataFilterPages={page_size:"5",...this.dataFilterPages,...e,...this.sortBy,...this.search,...i};const l={...this.globalStoreViewModel.dateFilter,...t};await this.acquisitionDetailStore.getPages(this.dataFilterPages,l,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,m.o)(this,"handleFilter",(e=>{this.status=d.r.LOADING,this.dataFilter={...this.dataFilter,...e};const t={...this.globalStoreViewModel.dateFilter};this.acquisitionDetailStore.getMetrics(this.dataFilter,t,this.callbackOnDataSuccessHandler,this.callbackOnErrorHandler)})),(0,m.o)(this,"handleFilterDateRange",((e,t)=>{this.status=d.r.LOADING;let a={date_start:R()(e).format("YYYY-MM-DD"),date_end:R()(t).endOf("day").format("YYYY-MM-DD")};this.initialize(this.dataFilter,a)})),(0,m.o)(this,"handleFilterPages",(async e=>{this.statusTopTable=d.r.LOADING,this.dataFilterPages={...this.dataFilterPages,...e};const t={...this.globalStoreViewModel.dateFilter};await this.acquisitionDetailStore.getPages(this.dataFilterPages,t,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,m.o)(this,"callbackOnErrorHandler",(e=>{this.status=d.r.READY,(0,v.j5)(e.message,"error")})),(0,m.o)(this,"callbackOnVisitsSuccessHandler",(e=>{if(e){if("canceled"!==e?.message&&"isCancle"!==e?.message){this.status=d.r.READY;const t=new I(e,this.globalStoreViewModel);this.visitorData=t}}else this.status=d.r.ERROR,this.data=[]})),(0,m.o)(this,"callbackOnPagesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message||"isCancle"!==e?.message){this.status=d.r.READY,this.statusTopTable=d.r.READY;const t=new l.n(e.list,this.globalStoreViewModel);this.acquisitionsTableData={list:t,pagination:e.pagination}}}else this.status=d.r.ERROR,this.statusTopTable=d.r.ERROR,this.data=[]})),(0,_.ky)(this),this.acquisitionDetailStore=e,this.globalStoreViewModel=t}},P=class{constructor(e,t){(0,m.o)(this,"acquisitionDetailListViewModel",null),(0,m.o)(this,"getAcquisitionDetailListViewModel",(()=>this.acquisitionDetailListViewModel)),e&&(this.acquisitionDetailListViewModel=new U(e,t))}},L=u.createContext(),A=({children:e,viewModel:t})=>u.createElement(L.Provider,{value:t},e),k=(0,p.Pi)(class extends u.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{t:e,status:t,bars:a,barColors:s,data:i,filterData:l}=this.props;return u.createElement("div",{className:"position-relative h-100"},u.createElement(o.l,{height:500,data:i,colors:["#1AB394"],layout:"horizontal",barColors:s,bars:a,hiddenGrid:{vertical:!1},XAxisOptions:{axisLine:!0,padding:{left:50,right:50}},defaultValue:{label:"Visitors",value:"visitors"},options:[{label:"Visitors",value:"visitors"}],loading:t,tooltipComponent:{header:e("txt_in_total"),value:1===a?.length&&a[0]+":"},status:t,filterData:l,isSelection:!1,isLegend:!0,filterButtons:["days","months","weeks"]}))}}),B=(0,g.Zh)()((0,E.EN)(k)),T=(0,g.Zh)()((0,E.EN)((e=>{const{data:t,isPagination:a=!0,simplePagination:s=!1,pagination:i,selectPage:l,selectPageSize:o,status:c,limit:h,isPaginationAPI:m=!!a,t:g,sortAPI:p,handleSort:E,sortBy:_}=e,b=u.useMemo((()=>t?.header?.map(((e,t)=>{let a="";switch(e?.accessor){case w.lF8.NUMBER_OF_VISITORS:a="txt_tooltip_visitors";break;case w.lF8.NUMBER_OF_PAGE_VIEWS:a="txt_tooltip_page_views";break;case w.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS:a="txt_tooltip_unique_page_views";break;case w.lF8.BOUNCE_RATE:a="txt_tooltip_bounce_rate";break;case w.lF8.NUMBER_OF_PAGES_PER_SESSION:a="txt_tooltip_page_session";break;case w.lF8.AVERAGE_SESSION_DURATION:a="txt_tooltip_avg_session_duration";break;default:a=""}return{...e,className:`px-15 py-16 fs-sm fw-semibold border-bottom border-gray-800 align-middle ${0!==t?"rounded-top-end-3 text-end":""} ${0===t?"rounded-top-start-3":""}`,width:e.width?e.width:0===t?"auto":170,allowSort:e?.allowSort||!1,Header:u.createElement("span",{className:"align-middle text-gray-900 fw-medium"},g(e.Header),a&&u.createElement(u.Fragment,null,u.createElement(x.G,{"data-tooltip-id":"tooltipTable","data-tooltip-content":g(a),className:"mx-sm fs-12 mb-1",icon:D.DB}),u.createElement(V.u,{id:"tooltipTable"})))}}))),[t?.header]),R=u.useMemo((()=>t?.data),[t?.data]);return u.createElement(u.Fragment,null,c===d.r.LOADING?u.createElement(v.QI,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):t?u.createElement(r.k,{classNameTable:"mb-0 table",columns:b,data:R,canSort:!0,pagination:a,paginationClass:"fs-14 border-top mt-2",isPaginationAPI:m,paginationResponse:i,selectPage:l,selectPageSize:o,simplePagination:s,limit:h,sortAPI:p,sortAPIHandle:E,sortBy:_}):u.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},u.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},u.createElement(n.x,{icons:w.OBj.PUBLIC_URL+"/assets/images/ic_project.svg",title:g("txt_no_data"),width:"w-50"}))))}))),C=(0,p.Pi)(class extends u.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{statusTopTable:e}=this.listViewModel;return u.createElement("div",{className:"position-relative h-100"},u.createElement("div",{className:"bg-white rounded-3 shadow-sm h-100 position-relative ChartWrapper"},u.createElement(T,{data:this.listViewModel?.acquisitionsTableData?.list?.toPagesTableTop(this.props.integration),pagination:this.listViewModel?.acquisitionsTableData?.pagination,selectPage:async e=>{await this.listViewModel.handleFilterPages({page:e})},selectPageSize:async e=>{await this.listViewModel.handleFilterPages({page:1,page_size:e})},status:e,sortAPI:!0,handleSort:this.props.handleSort,sortBy:this.listViewModel?.sortBy,...this.props})))}}),q=(0,g.Zh)()((0,E.EN)(C)),y=(0,p.Pi)((s=class extends u.Component{constructor(e){super(e),(0,m.o)(this,"componentDidUpdate",(e=>{this.props.location===e.location&&this.props.activeDomain===e.activeDomain||this.acquisitionDetailListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[acquisition]":!0,..."direct"===this.params?.url?{"filter[filter_not]":""}:{"filter[referrer]":""}})})),(0,m.o)(this,"componentDidMount",(()=>{this.acquisitionDetailListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[acquisition]":!0,..."direct"===this.params?.url?{"filter[filter_not]":""}:{"filter[referrer]":""}})})),(0,m.o)(this,"handleDateRangeChange",((e,t)=>{this.acquisitionDetailListViewModel.handleFilterDateRange(e??t,t??e)})),(0,m.o)(this,"handleSort",(async e=>{this.acquisitionDetailListViewModel.getPages({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[acquisition]":!0,..."direct"===this.params?.url?{"filter[filter_not]":""}:{"filter[referrer]":""}},{},{"sort[]":e?.id,"sort_direction[]":"desc"===this.acquisitionDetailListViewModel?.sortBy["sort_direction[]"]?"asc":"desc"})})),(0,m.o)(this,"handleSearch",(async e=>{this.acquisitionDetailListViewModel.getPages({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[acquisition]":!0,..."direct"===this.params?.url?{"filter[filter_not]":""}:{"filter[referrer]":""}},{},{},{"filter[url]":e})}));const{viewModel:t}=e;this.viewModel=t||null,this.acquisitionDetailListViewModel=this.viewModel?this.viewModel.getAcquisitionDetailListViewModel():null,this.params=N.Z.parse(e.location.search)}render(){const{t:e}=this.props;return u.createElement("div",{className:"py-4 px-4 h-100 d-flex flex-column"},u.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24 flex-wrap"},u.createElement("div",{className:"position-relative d-flex align-items-center mb-8px"},u.createElement("div",{className:"back_icon d-flex align-items-center justify-content-center cursor-pointer me-1",onClick:()=>{v.m8.push(`/acquisition/?date_end=${this.context.biListViewModel.dateFilter?.date_end}&date_start=${this.context.biListViewModel.dateFilter?.date_start}&domain=${this.context.biListViewModel.activeDomain}`)}},u.createElement(x.G,{className:"text-success",icon:F.A35})),u.createElement("h2",{className:"fw-bold mb-0 fs-3"},e("txt_acquisition_overview"),"/"," ",u.createElement("span",{className:"text-capitalize"},this.params?.url?this.params?.url:"")," ",e("txt_traffic"))),u.createElement("div",{className:"position-relative"},u.createElement(c.r,{onChange:this.handleDateRangeChange}))),u.createElement(S.Z,null,u.createElement(f.Z,{lg:"12"},u.createElement(B,{bars:["visits"],barColors:["#0066FF","#96C0FF"],listViewModel:this.acquisitionDetailListViewModel,status:this.acquisitionDetailListViewModel?.status,data:this.acquisitionDetailListViewModel?.visitorData?.toAreaChart(),filterData:this.acquisitionDetailListViewModel?.visitorData?.getFilterName()}))),u.createElement(S.Z,{className:"my-24 pb-24"},u.createElement(f.Z,{lg:12,className:"mb-24"},u.createElement(q,{listViewModel:this.acquisitionDetailListViewModel,handleSort:this.handleSort,handleSearch:this.handleSearch,...this.props}))))}},(0,m.o)(s,"contextType",h.Fv),s)),z=(0,g.Zh)()((0,E.EN)((i=y,e=>u.createElement(i,{...e,viewModel:u.useContext(L)})))),G=(0,p.Pi)(class extends u.Component{constructor(e){super(e),(0,m.o)(this,"acquisitionDetailStore",null),(0,m.o)(this,"acquisitionDetailViewModel",null);const{viewModel:t}=e;this.viewModel=t||null,this.biListViewModel=this.viewModel?this.viewModel.getBiListViewModel():null,this.acquisitionDetailStore=new O,this.acquisitionDetailViewModel=new P(this.acquisitionDetailStore,this.biListViewModel)}render(){return u.createElement(A,{viewModel:this.acquisitionDetailViewModel},u.createElement(z,{...this.props}))}}),$=(0,g.Zh)()((0,E.EN)((0,h.NQ)(G)))},54372:(e,t,a)=>{a.d(t,{n:()=>c});var s=a(23541),i=a(67294),l=a(73022),o=a(30381),r=a.n(o),n=a(73727),c=class{constructor(e,t){(0,s.o)(this,"data",[]),(0,s.o)(this,"globalViewModel",null),(0,s.o)(this,"toRaw",(()=>this.data)),(0,s.o)(this,"toPagesTableTopDashboard",(()=>{const e=["txt_page","txt_page_views","txt_time_on_page"],t=[l.RMP.URL,l.lF8.NUMBER_OF_PAGE_VIEWS,l.lF8.AVERAGE_SESSION_DURATION],a=Math.max(...this.data.map((e=>e[l.lF8.NUMBER_OF_PAGE_VIEWS])));if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,Cell:({cell:e,column:t,row:s})=>{const o=t.id===l.RMP.URL&&new URL(e?.value);return t.id===l.RMP.URL?i.createElement("a",{href:`${e?.value}`,target:"_blank",rel:"noreferrer",className:"d-block position-relative px-20 py-sm table-link text-gray-900"},i.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0 table-link-bg",style:{width:`${(s.cells[1]?.value/a*100)?.toString()}%`}}),i.createElement("div",{className:"position-relative z-1 text-ellipsis line-clamp-1 pe-20"},i.createElement("div",{className:"position-relative table-link-text"},""===o?"Unknown":o.pathname+o.search))):t.id===l.lF8.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"text-end"},e?.value?r().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),o=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),n=o?.map((e=>{for(let a in e)t.includes(a)||delete e[a];return e}));return{header:s,data:n}}return{header:[],data:[]}})),(0,s.o)(this,"toPagesTableTop",(e=>{const t=["txt_page","txt_visitors","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],a=[l.RMP.URL,l.lF8.NUMBER_OF_VISITORS,l.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS,l.lF8.BOUNCE_RATE,l.lF8.NUMBER_OF_PAGES_PER_SESSION,l.lF8.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=a.map(((a,s)=>({Header:t[s],accessor:a,allowSort:!0,width:a===l.RMP.URL?300:a===l.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,tooltip:a===l.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?"txt_bounce_rate":"",Cell:({cell:t,column:a})=>{const s=a.id===l.RMP.URL&&new URL(t?.value);return a.id===l.RMP.URL?i.createElement(i.Fragment,null,e?i.createElement("a",{href:"#",onClick:e=>this.handleChangeLink(e,`behavior/detail?url=${t?.value}}`),className:"px-15 d-block text-secondary-50"},i.createElement("span",null,""===s?"Unknown":s.pathname+s.search)):i.createElement(n.OL,{to:`/behavior/detail?url=${t?.value}`,className:"px-15 d-block text-secondary-50"},""===s?"Unknown":s.pathname+s.search)):a.id===l.lF8.BOUNCE_RATE?i.createElement("div",{className:"px-3 text-end"},t?.value+"%"):a.id===l.lF8.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"px-15 text-end"},t?.value?r().utc(1e3*t?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},t?.value??null)}}))),o=this.data?.map((e=>({...e,...a.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),c=o?.map((e=>{for(let t in e)a.includes(t)||delete e[t];return e}));return{header:s,data:c}}return{header:[],data:[]}})),(0,s.o)(this,"transformResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const a=this.data.filter((e=>e[l.RMP.URL]===t[l.RMP.URL]));e={...e,[t[l.RMP.URL]]:a}})),e})),(0,s.o)(this,"toBarChart",(()=>{const e=this.transformResponse();return Object.keys(e).map((t=>{const a=t&&new URL(t);return{name:""===a?"Unknown":a.pathname+a.search,number:e[t]?.reduce(((e,t)=>e+t[l.lF8.NUMBER_OF_VISITORS]),0)}}))})),e&&(this.data=e??[],this.globalViewModel=t)}}},41330:(e,t,a)=>{a.d(t,{Z:()=>h});var s=a(94184),i=a.n(s),l=a(67294),o=a(45697),r=a.n(o),n=a(76792),c=a(48521);r().string,r().bool,r().bool,r().bool,r().bool;const d=l.forwardRef((({bsPrefix:e,className:t,fluid:a=!1,rounded:s=!1,roundedCircle:l=!1,thumbnail:o=!1,...r},d)=>(e=(0,n.vE)(e,"img"),(0,c.jsx)("img",{ref:d,...r,className:i()(t,a&&`${e}-fluid`,s&&"rounded",l&&"rounded-circle",o&&`${e}-thumbnail`)}))));d.displayName="Image";const h=d}}]);