"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[4028],{44028:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var a=s(50227),i=s(93811),r=s(59470),l=s(37932),o=s(20270),n=s(4966),c=s(51751),h=s(53800),d=s(81252),E=s(96540),g=s(32389),m=s(44015),_=s(56347),u=s(27813),O=s(99194),p=s(44011),w=s(95093),S=s.n(w),v=s(418),R=s(65606),M=class{constructor(){(0,d.M)(this,"getMetrics",(async(e,t,s,a)=>{try{const i=new O.L20,r=await i.getMetrics(e,t);r&&"AxiosError"!==r?.name?(0,u.h5)((()=>{s(r)})):(0,u.h5)((()=>{a({message:r?.response?.data?.error||"Something went wrong from Server response"})}))}catch(e){(0,u.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.M)(this,"getVisitors",(async(e,t,s,a)=>{try{const i=new O.L20,r=await i.getVisitors(e,t);r?(0,u.h5)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,u.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.M)(this,"getVisits",(async(e,t,s,a)=>{try{const i=new O.L20,r=await i.getVisits(e,t);r?(0,u.h5)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,u.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.M)(this,"getCountries",(async(e,t,s,a)=>{try{const i=new O.L20,r=await i.getCountries(e,t);r?(0,u.h5)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,u.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.M)(this,"getCities",(async(e,t,s,a)=>{try{const i=new O.L20,r=await i.getCities(e,t);r?(0,u.h5)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,u.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.M)(this,"getBrowsers",(async(e,t,s,a)=>{try{const i=new O.L20,r=await i.getBrowsers(e,t);r?(0,u.h5)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,u.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.M)(this,"getDevices",(async(e,t,s,a)=>{try{const i=new O.L20,r=await i.getDevices(e,t);r?(0,u.h5)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,u.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.M)(this,"getLanguages",(async(e,t,s,a)=>{try{const i=new O.L20,r=await i.getLanguages(e,t);r?(0,u.h5)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,u.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.M)(this,"getPages",(async(e,t,s,a)=>{try{const i=new O.L20,r=await i.getPages(e,t);r?(0,u.h5)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,u.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.M)(this,"getPagesCount",(async(e,t,s,a)=>{try{const i=new O.L20,r=await i.getPages(e,t);r?(0,u.h5)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,u.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.M)(this,"getFlowList",(async(e,t,s,a)=>{try{const i=new O.L20,r=await i.getFlowList(e,t);r&&"AxiosError"!==r?.name?(0,u.h5)((()=>{s(r)})):a({message:r?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,u.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}},N=class{constructor(e,t){(0,d.M)(this,"data",[]),(0,d.M)(this,"globalViewModel",null),(0,d.M)(this,"toRaw",(()=>this.data)),(0,d.M)(this,"toCitiesTableTop",(()=>{const e=["txt_City","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[O.NWG.CITY,O.CEO.NUMBER_OF_VISITORS,O.CEO.NUMBER_OF_PAGE_VIEWS,O.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS,O.CEO.BOUNCE_RATE,O.CEO.NUMBER_OF_PAGES_PER_SESSION,O.CEO.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,width:t===O.NWG.CITY?250:t===O.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS||t===O.CEO.AVERAGE_SESSION_DURATION?220:t===O.CEO.NUMBER_OF_VISITORS?140:170,allowSort:!0,Cell:({cell:e,column:t})=>t.id===O.NWG.CITY?E.createElement("div",{className:"px-15"},""===e?.value?"Unknown":e?.value):t.id===O.CEO.BOUNCE_RATE?E.createElement("div",{className:"px-3 text-end"},e?.value+"%"):t.id===O.CEO.AVERAGE_SESSION_DURATION?E.createElement("div",{className:"px-3 text-end"},e?.value?S().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):E.createElement("div",{className:"px-15 text-end"},O.HP2.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),i=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:i}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},C=class{constructor(e,t){(0,d.M)(this,"data",[]),(0,d.M)(this,"globalViewModel",null),(0,d.M)(this,"toRaw",(()=>this.data)),(0,d.M)(this,"toBrowsersTableTop",(()=>{const e=["txt_browser","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[O.$yQ.BROWSER_NAME,O.CEO.NUMBER_OF_VISITORS,O.CEO.NUMBER_OF_PAGE_VIEWS,O.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS,O.CEO.BOUNCE_RATE,O.CEO.NUMBER_OF_PAGES_PER_SESSION,O.CEO.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,width:t===O.$yQ.BROWSER_NAME?250:t===O.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS||t===O.CEO.AVERAGE_SESSION_DURATION?220:t===O.CEO.NUMBER_OF_VISITORS?140:170,Cell:({cell:e,column:t})=>t.id===O.$yQ.BROWSER_NAME?E.createElement("div",{className:"px-15"},""===e?.value?"Unknown":e?.value):t.id===O.CEO.BOUNCE_RATE?E.createElement("div",{className:"px-3 text-end"},e?.value+"%"):t.id===O.CEO.AVERAGE_SESSION_DURATION?E.createElement("div",{className:"px-3 text-end"},e?.value?S().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):E.createElement("div",{className:"px-15 text-end"},O.HP2.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),i=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:i}}return{header:[],data:[]}})),(0,d.M)(this,"toDevicesTableTop",(()=>{const e=["txt_device","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[O.JLh.DEVICE,O.CEO.NUMBER_OF_VISITORS,O.CEO.NUMBER_OF_PAGE_VIEWS,O.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS,O.CEO.BOUNCE_RATE,O.CEO.NUMBER_OF_PAGES_PER_SESSION,O.CEO.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,width:t===O.JLh.DEVICE?250:t===O.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS||t===O.CEO.AVERAGE_SESSION_DURATION?220:t===O.CEO.NUMBER_OF_VISITORS?140:170,allowSort:!0,Cell:({cell:e,column:t})=>t.id===O.JLh.DEVICE?E.createElement("div",{className:"px-15 "+("iPhone"===e?.value||"iPad"===e?.value?"":"text-capitalize")},""===e?.value?"Unknown":e?.value):t.id===O.CEO.BOUNCE_RATE?E.createElement("div",{className:"px-3 text-end"},e?.value+"%"):t.id===O.CEO.AVERAGE_SESSION_DURATION?E.createElement("div",{className:"px-3 text-end"},e?.value?S().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):E.createElement("div",{className:"px-15 text-end"},O.HP2.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),i=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:i}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},b=class{constructor(e,t){(0,d.M)(this,"data",[]),(0,d.M)(this,"globalViewModel",null),(0,d.M)(this,"toRaw",(()=>this.data)),(0,d.M)(this,"toLanguagesTableTop",(()=>{const e=["txt_language","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[O.Bnr.LANG,O.CEO.NUMBER_OF_VISITORS,O.CEO.NUMBER_OF_PAGE_VIEWS,O.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS,O.CEO.BOUNCE_RATE,O.CEO.NUMBER_OF_PAGES_PER_SESSION,O.CEO.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,width:t===O.Bnr.LANG?250:t===O.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS||t===O.CEO.AVERAGE_SESSION_DURATION?220:t===O.CEO.NUMBER_OF_VISITORS?140:170,Cell:({cell:e,column:t})=>t.id===O.Bnr.LANG?E.createElement("div",{className:"px-15"},""===e?.value?"Unknown":e?.value):t.id===O.CEO.BOUNCE_RATE?E.createElement("div",{className:"px-3 text-end"},e?.value+"%"):t.id===O.CEO.AVERAGE_SESSION_DURATION?E.createElement("div",{className:"px-3 text-end"},e?.value?S().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):E.createElement("div",{className:"px-15 text-end"},O.HP2.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),i=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:i}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},A=class{constructor(e,t){(0,d.M)(this,"visitorsStore",null),(0,d.M)(this,"status",c.s.READY),(0,d.M)(this,"statusOverview",c.s.READY),(0,d.M)(this,"statusMetrics",c.s.READY),(0,d.M)(this,"statusTopTable",c.s.READY),(0,d.M)(this,"statusPagesCount",c.s.READY),(0,d.M)(this,"statusFlowList",c.s.READY),(0,d.M)(this,"globalStoreViewModel",null),(0,d.M)(this,"metricsData",null),(0,d.M)(this,"visitorData",null),(0,d.M)(this,"visitsData",null),(0,d.M)(this,"countriesTableData",null),(0,d.M)(this,"citiesTableData",null),(0,d.M)(this,"browsersTableData",null),(0,d.M)(this,"devicesTableData",null),(0,d.M)(this,"languagesTableData",null),(0,d.M)(this,"pagesTableData",null),(0,d.M)(this,"pagesCountData",null),(0,d.M)(this,"flowListTableData",null),(0,d.M)(this,"dataFilterFlowList",{}),(0,d.M)(this,"sortBy",{"sort[]":"","sort_direction[]":""}),(0,d.M)(this,"sortByCountries",{"sort[]":"","sort_direction[]":""}),(0,d.M)(this,"sortByCities",{"sort[]":"","sort_direction[]":""}),(0,d.M)(this,"sortByBrowsers",{"sort[]":"","sort_direction[]":""}),(0,d.M)(this,"sortByDevices",{"sort[]":"","sort_direction[]":""}),(0,d.M)(this,"sortByLanguages",{"sort[]":"","sort_direction[]":""}),(0,d.M)(this,"sortByFlowList",{"sort[]":"","sort_direction[]":""}),(0,d.M)(this,"sortByPages",{"sort[]":"","sort_direction[]":""}),(0,d.M)(this,"initialize",((e,t)=>{this.getMetrics(e,t),this.getVisits(e,t),this.getCountries(e,t),this.getCities(e,t),this.getBrowsers(e,t),this.getDevices(e,t),this.getLanguages(e,t),this.getFlowList(e,t)})),(0,d.M)(this,"initializeBehavior",(async(e,t,s)=>{this.getVisitors(e,t),this.getMetrics(e,t),await this.getPages(e,t,null,s),await this.getPagesCount(e,t,null,s)})),(0,d.M)(this,"getMetrics",((e,t)=>{this.statusMetrics=c.s.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.visitorsStore.getMetrics(this.dataFilter,s,this.callbackOnMetricsDataSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"getVisitors",((e,t)=>{this.statusOverview=c.s.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.visitorsStore.getVisitors({...this.dataFilter,page_size:"1000"},s,this.callbackOnVisitorSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"getVisits",((e,t)=>{this.statusOverview=c.s.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.visitorsStore.getVisits({...this.dataFilter,page_size:"1000"},s,this.callbackOnVisitsSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"getCountries",(async(e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopTable=c.s.LOADING,this.sortByCountries=s,this.dataFilterCountries={page_size:"5",...this.dataFilterCountries,...e,...this.sortByCountries};const a={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getCountries(this.dataFilterCountries,a,this.callbackOnCountriesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"getCities",(async(e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopTable=c.s.LOADING,this.sortByCities=s,this.dataFilterCities={page_size:"5",...this.dataFilterCities,...e,...this.sortByCities};const a={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getCities(this.dataFilterCities,a,this.callbackOnCitiesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"getBrowsers",(async(e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopTable=c.s.LOADING,this.sortByBrowsers=s,this.dataFilterBrowsers={page_size:"5",...this.dataFilterBrowsers,...e,...this.sortByBrowsers};const a={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getBrowsers(this.dataFilterBrowsers,a,this.callbackOnBrowsersSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"getDevices",(async(e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopTable=c.s.LOADING,this.sortByDevices=s,this.dataFilterDevices={page_size:"5",...this.dataFilterDevices,...e,...this.sortByDevices};const a={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getDevices(this.dataFilterDevices,a,this.callbackOnDevicesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"getLanguages",(async(e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopTable=c.s.LOADING,this.sortByLanguages=s,this.dataFilterLanguages={page_size:"5",...this.dataFilterLanguages,...e,...this.sortByLanguages};const a={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getLanguages(this.dataFilterLanguages,a,this.callbackOnLanguagesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"getPages",(async(e,t,s={},a={})=>{this.statusTopTable=c.s.LOADING,this.sortBy=s??{"sort[]":"url","sort_direction[]":"asc"},this.sortByPages=s??{"sort[]":"url","sort_direction[]":"asc"},this.search=a,this.dataFilterPages={page_size:"5",...this.dataFilterPages,...e,...this.sortBy,...this.search};const i={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getPages(this.dataFilterPages,i,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"getPagesCount",(async(e,t,s={},a={})=>{this.statusPagesCount=c.s.LOADING,this.sortBy=s??{"sort[]":"number_of_visitors","sort_direction[]":"desc"},this.search=a,this.dataFilterPages={page_size:"3",...this.dataFilterPages,...e,...this.sortBy,...this.search};const i={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getPagesCount(this.dataFilterPages,i,this.callbackOnPagesCountSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"getFlowList",((e,t,s={"sort[]":"start","sort_direction[]":"desc"})=>{this.statusFlowList=c.s.LOADING,this.sortByFlowList=s,this.dataFilter={page_size:"10",...this.dataFilter,...e,...this.sortByFlowList};const a={...this.globalStoreViewModel.dateFilter,...t};this.visitorsStore.getFlowList(this.dataFilter,a,this.callbackOnFlowListSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"handleFilter",(e=>{this.status=c.s.LOADING,this.dataFilter={...this.dataFilter,...e};const t={...this.globalStoreViewModel.dateFilter};this.visitorsStore.getMetrics(this.dataFilter,t,this.callbackOnDataSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"handleFilterCountries",(async e=>{this.statusTopTable=c.s.LOADING,this.dataFilterCountries={...this.dataFilterCountries,...e};const t={...this.globalStoreViewModel.dateFilter};await this.visitorsStore.getCountries(this.dataFilterCountries,t,this.callbackOnCountriesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"handleFilterCities",(async e=>{this.statusTopTable=c.s.LOADING,this.dataFilterCities={...this.dataFilterCities,...e};const t={...this.globalStoreViewModel.dateFilter};await this.visitorsStore.getCities(this.dataFilterCities,t,this.callbackOnCitiesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"handleFilterBrowsers",(async e=>{this.statusTopTable=c.s.LOADING,this.dataFilterBrowsers={...this.dataFilterBrowsers,...e};const t={...this.globalStoreViewModel.dateFilter};await this.visitorsStore.getBrowsers(this.dataFilterBrowsers,t,this.callbackOnBrowsersSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"handleFilterDevices",(async e=>{this.statusTopTable=c.s.LOADING,this.dataFilterDevices={...this.dataFilterDevices,...e};const t={...this.globalStoreViewModel.dateFilter};await this.visitorsStore.getDevices(this.dataFilterDevices,t,this.callbackOnDevicesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"handleFilterLanguages",(async e=>{this.statusTopTable=c.s.LOADING,this.dataFilterLanguages={...this.dataFilterLanguages,...e};const t={...this.globalStoreViewModel.dateFilter};await this.visitorsStore.getLanguages(this.dataFilterLanguages,t,this.callbackOnLanguagesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.M)(this,"handleFilterPages",(async e=>{this.statusTopTable=c.s.LOADING,this.dataFilterPages={...this.dataFilterPages,...e};const t={...this.globalStoreViewModel.dateFilter};if(await this.visitorsStore.getPages(this.dataFilterPages,t,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler),this.globalStoreViewModel.dataFilter={pagination:this.dataFilterPages?.page},e?.page){const t={...v.A.parse(location.search),pagination:e?.page};window.history.replaceState("","",`/behavior?${v.A.stringify(t)}`)}})),(0,d.M)(this,"handleFilterDateRange",((e,t)=>{this.status=c.s.LOADING;let s={date_start:S()(e).format("YYYY-MM-DD"),date_end:S()(t).endOf("day").format("YYYY-MM-DD")};this.initialize(this.dataFilter,s)})),(0,d.M)(this,"handleFilterFlowList",(async e=>{const t=history.location;this.status=c.s.LOADING,this.dataFilterFlowList={...this.dataFilter,...e},this.globalStoreViewModel.dataFilter={pagination:this.dataFilterFlowList?.page};const s={...this.globalStoreViewModel.dateFilter};if(await this.visitorsStore.getFlowList(this.dataFilterFlowList,s,this.callbackOnFlowListSuccessHandler,this.callbackOnErrorHandler),e?.page){const s={...v.A.parse(t.search),pagination:e?.page};window.history.replaceState("","",`/visitors/flow?${v.A.stringify(s)}`)}})),(0,d.M)(this,"callbackOnFlowListSuccessHandler",(e=>{if(e){if("canceled"!==e?.message&&"isCancle"!==e?.message){this.status=c.s.READY,this.statusFlowList=c.s.READY;const t=new a.e(e.list,this.globalStoreViewModel);this.flowListTableData={list:t,pagination:e.pagination}}}else this.status=c.s.ERROR,this.statusFlowList=c.s.ERROR,this.data=[]})),(0,d.M)(this,"callbackOnErrorHandler",(e=>{this.status=c.s.READY,(0,p.me)(e.message,"error")})),(0,d.M)(this,"callbackOnMetricsDataSuccessHandler",(e=>{e?"canceled"!==e?.message&&(this.statusMetrics=c.s.READY,this.metricsData=e):(this.status=c.s.ERROR,this.statusMetrics=c.s.ERROR,this.data=[])})),(0,d.M)(this,"callbackOnVisitsSuccessHandler",(e=>{if(e?.length){if("canceled"!==e?.message){this.statusOverview=c.s.READY;const t=new o.W(e,this.globalStoreViewModel);this.visitsData=t}}else this.status=c.s.ERROR,this.statusOverview=c.s.ERROR,this.data=[]})),(0,d.M)(this,"callbackOnVisitorSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusOverview=c.s.READY;const t=new o.W(e?.list,this.globalStoreViewModel);this.visitorData=t}}else this.status=c.s.ERROR,this.statusOverview=c.s.ERROR,this.data=[]})),(0,d.M)(this,"callbackOnCountriesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=c.s.READY;const t=new r.U(e.list,this.globalStoreViewModel);this.countriesTableData={list:t.toCountriesTableTop(),pagination:e.pagination}}}else this.status=c.s.ERROR,this.statusTopTable=c.s.ERROR,this.data=[]})),(0,d.M)(this,"callbackOnCitiesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=c.s.READY;const t=new N(e.list,this.globalStoreViewModel);this.citiesTableData={list:t.toCitiesTableTop(),pagination:e.pagination}}}else this.status=c.s.ERROR,this.statusTopTable=c.s.ERROR,this.data=[]})),(0,d.M)(this,"callbackOnBrowsersSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=c.s.READY;const t=new C(e.list,this.globalStoreViewModel);this.browsersTableData={list:t.toBrowsersTableTop(),pagination:e.pagination}}}else this.status=c.s.ERROR,this.statusTopTable=c.s.ERROR,this.data=[]})),(0,d.M)(this,"callbackOnDevicesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=c.s.READY;const t=new C(e.list,this.globalStoreViewModel);this.devicesTableData={list:t.toDevicesTableTop(),pagination:e.pagination}}}else this.status=c.s.ERROR,this.statusTopTable=c.s.ERROR,this.data=[]})),(0,d.M)(this,"callbackOnLanguagesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=c.s.READY;const t=new b(e.list,this.globalStoreViewModel);this.languagesTableData={list:t.toLanguagesTableTop(),pagination:e.pagination}}}else this.status=c.s.ERROR,this.statusTopTable=c.s.ERROR,this.data=[]})),(0,d.M)(this,"callbackOnPagesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=c.s.READY;const t=new l.P(e.list,this.globalStoreViewModel);this.pagesTableData={list:t,pagination:e.pagination}}}else this.status=c.s.ERROR,this.statusTopTable=c.s.ERROR,this.data=[]})),(0,d.M)(this,"callbackOnPagesCountSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusPagesCount=c.s.READY;const t=new l.P(e.list,this.globalStoreViewModel);this.pagesCountData={list:t,pagination:e.pagination}}}else this.status=c.s.ERROR,this.statusPagesCount=c.s.ERROR,this.data=[]})),(0,u.l_)(this),this.visitorsStore=e,this.globalStoreViewModel=t}},T=class{constructor(e,t){(0,d.M)(this,"visitorsListViewModel",null),(0,d.M)(this,"getVisitorsListViewModel",(()=>this.visitorsListViewModel)),e&&(this.visitorsListViewModel=new A(e,t))}},F=(0,E.lazy)((()=>Promise.all([s.e(8921),s.e(450),s.e(304),s.e(889),s.e(3651),s.e(1210)]).then(s.bind(s,21210)))),U=(0,E.lazy)((()=>Promise.all([s.e(8921),s.e(450),s.e(304),s.e(889),s.e(3423)]).then(s.bind(s,13423)))),V=({link:e,...t})=>"behavior"===e?E.createElement(U,{...t}):E.createElement(F,{...t}),I=(0,m.PA)(class extends E.Component{constructor(e){super(e),(0,d.M)(this,"VisitorsStore",null),(0,d.M)(this,"VisitorsViewModel",null);const{viewModel:t}=e;this.viewModel=t||null,this.biListViewModel=this.viewModel?this.viewModel.getBiListViewModel():null,this.VisitorsStore=new M,this.VisitorsViewModel=new T(this.VisitorsStore,this.biListViewModel)}render(){const{integration:e=!1}=this.props,{integrationLink:t,activeDomain:s}=this.biListViewModel,a=(0,_.B6)(p.b6.location.pathname,{path:R.env.REACT_APP_INTERGRATION?"/bi":"/visitors",exact:!0,strict:!1}),r=(0,_.B6)(p.b6.location.pathname,{path:R.env.REACT_APP_INTERGRATION?"/bi":"/behavior",exact:!0,strict:!1}),l=r?.isExact||"behavior"===t?this?.VisitorsViewModel?.visitorsListViewModel?.pagesTableData?.list?.data:null,o=a?.isExact||"visitors"===t?[{name:"Countries",data:this?.VisitorsViewModel?.visitorsListViewModel?.countriesTableData?.list?.data},{name:"Cities",data:this?.VisitorsViewModel?.visitorsListViewModel?.citiesTableData?.list?.data},{name:"Browsers",data:this?.VisitorsViewModel?.visitorsListViewModel?.browsersTableData?.list?.data},{name:"Devices",data:this?.VisitorsViewModel?.visitorsListViewModel?.devicesTableData?.list?.data},{name:"Languages",data:this?.VisitorsViewModel?.visitorsListViewModel?.languagesTableData?.list?.data}]:[];return E.createElement(i.S,{viewModel:this.VisitorsViewModel},E.createElement(n.d,{data:l,tableExport:o,i18n:this.props.i18n,t:this.props.t,componentRef:this.componentRef,sectionName:a?.isExact||"visitors"===t?"visitors":"behavior"}),E.createElement(x,{integration:e,integrationLink:t,activeDomain:s,ref:e=>this.componentRef=e}))}}),x=(0,m.PA)(class extends E.Component{constructor(e){super(e)}render(){return E.createElement("div",{className:"aesirxui"},this.props.integration?E.createElement(V,{link:this.props.integrationLink,activeDomain:this.props.activeDomain,...this.props}):E.createElement(E.Fragment,null,E.createElement(_.qh,{exact:!0,path:["/visitors","/bi/visitors"]},E.createElement(F,{...this.props})),E.createElement(_.qh,{exact:!0,path:["/behavior","/bi/behavior"]},E.createElement(U,{...this.props}))))}}),D=(0,g.CI)()((0,_.y)((0,h.cm)(I)))},93811:(e,t,s)=>{s.d(t,{S:()=>r,U:()=>l});var a=s(96540),i=a.createContext(),r=({children:e,viewModel:t})=>a.createElement(i.Provider,{value:t},e),l=e=>t=>a.createElement(e,{...t,viewModel:a.useContext(i)})},50227:(e,t,s)=>{s.d(t,{e:()=>c});var a=s(81252),i=s(96540),r=s(99194),l=s(95093),o=s.n(l),n=s(54625),c=class{constructor(e,t){(0,a.M)(this,"data",[]),(0,a.M)(this,"globalViewModel",null),(0,a.M)(this,"toRaw",(()=>this.data)),(0,a.M)(this,"handleChangeLink",((e,t)=>{e.preventDefault(),t&&this.globalViewModel.setIntegrationLink(t)})),(0,a.M)(this,"toFlowListTable",(e=>{const t=["txt_time_utc","txt_locale","txt_sop_id","txt_event","txt_conversion","txt_url",""],s=[r.dsY.START,r.dsY.GEO,r.dsY.SOP_ID,r.dsY.EVENT,r.dsY.CONVERSION,r.dsY.URL,r.dsY.UUID];if(this.data?.length){const a=s.map(((s,a)=>({Header:t[a],accessor:s,width:s===r.dsY.START?100:s===r.dsY.SOP_ID?80:s===r.dsY.EVENT||s===r.dsY.CONVERSION||s===r.dsY.GEO?20:s===r.dsY.URL?230:s===r.dsY.UUID?80:170,allowSort:s!==r.dsY.EVENT&&s!==r.dsY.CONVERSION&&s!==r.dsY.URL&&s!==r.dsY.SOP_ID&&s!==r.dsY.GEO,Cell:({cell:t,column:s,row:a})=>{if(s.id===r.dsY.GEO)return i.createElement("div",{className:"px-3"},""===t?.value?i.createElement(i.Fragment,null):i.createElement("span",{className:`me-1 fi fi-${this.data.find((e=>e[r.dsY.GEO]?.country?.code===a?.values[r.dsY.GEO]?.country?.code))?.[r.dsY.GEO]?.country?.code?.toLowerCase()}`}),i.createElement("span",{className:"text-nowrap"},""===t?.value?"Unknown":""));if(s.id===r.dsY.UUID)return i.createElement(i.Fragment,null,e?i.createElement("a",{href:"#",onClick:e=>this.handleChangeLink(e,`flow&id=${t?.value}`),className:"btn btn-light px-3 py-1 fs-sm"},i.createElement("span",null," View Detail")):i.createElement(n.k2,{to:`/flow/${t?.value}`,className:"btn btn-light px-3 py-1 fs-sm"},"View Detail"));if(s.id===r.dsY.URL&&t?.value){const e=new URL(t?.value);let s=""===e?"Unknown":e.pathname+e.search;return i.createElement("a",{href:t?.value,target:"_blank",rel:"noreferrer",className:"px-3 d-inline-block text-secondary-50"},s?.length>53?s?.slice(0,53)+"...":s)}return s.id===r.dsY.START?i.createElement("div",{className:"px-3"},o()(t?.value)?.utc()?.format("DD-MM-YYYY HH:mm:ss")):i.createElement("div",{className:"px-3"},t?.value)}}))),l=this.data?.map((e=>({...e,...s.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),c=l?.map((e=>{for(let t in e)s.includes(t)||delete e[t];return e}));return{header:a,data:c}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}}},59470:(e,t,s)=>{s.d(t,{U:()=>n});var a=s(81252),i=s(96540),r=s(99194),l=s(95093),o=s.n(l),n=class{constructor(e,t){(0,a.M)(this,"data",[]),(0,a.M)(this,"globalViewModel",null),(0,a.M)(this,"toRaw",(()=>this.data)),(0,a.M)(this,"toCountries",(()=>this?.data?.length&&this.data.map((e=>({country:e[r.YEF.COUNTRY_NAME],country_code:e[r.YEF.COUNTRY_CODE],views:e[r.CEO.NUMBER_OF_VISITORS],flag:`/assets/images/flags/flag-${e[r.YEF.COUNTRY_NAME]?.toLowerCase()}.png`})))?.filter((e=>e[r.YEF.COUNTRY_CODE]))?.sort(((e,t)=>t.views-e.views)))),(0,a.M)(this,"toCountriesTable",(()=>{const e=["txt_Country","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[r.YEF.COUNTRY_NAME,r.CEO.NUMBER_OF_VISITORS,r.CEO.NUMBER_OF_PAGE_VIEWS,r.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS,r.CEO.BOUNCE_RATE,r.CEO.NUMBER_OF_PAGES_PER_SESSION,r.CEO.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,width:t===r.YEF.COUNTRY_NAME?270:t===r.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,allowSort:t!==r.YEF.COUNTRY_NAME,Cell:({cell:e,column:t,row:s})=>t.id===r.YEF.COUNTRY_NAME?i.createElement("div",{className:"px-3"},i.createElement("span",{className:`me-1 fi fi-${this.data.find((e=>e[r.YEF.COUNTRY_NAME]===s?.values[r.YEF.COUNTRY_NAME]))?.[r.YEF.COUNTRY_CODE]?.toLowerCase()}`}),i.createElement("span",{className:"text-nowrap"},`${s.index+1}. ${""===e?.value?"Unknown":e?.value}`)):t.id===r.CEO.BOUNCE_RATE?i.createElement("div",{className:"px-3"},e?.value+"%"):t.id===r.CEO.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"px-3"},e?.value?o().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-3"},r.HP2.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:l}}return{header:[],data:[]}})),(0,a.M)(this,"toCountriesTableTop",(()=>{const e=["txt_Country","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[r.YEF.COUNTRY_NAME,r.CEO.NUMBER_OF_VISITORS,r.CEO.NUMBER_OF_PAGE_VIEWS,r.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS,r.CEO.BOUNCE_RATE,r.CEO.NUMBER_OF_PAGES_PER_SESSION,r.CEO.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],width:t===r.YEF.COUNTRY_NAME?230:t===r.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS||t===r.CEO.AVERAGE_SESSION_DURATION?220:t===r.CEO.NUMBER_OF_VISITORS?140:170,allowSort:t!==r.YEF.COUNTRY_NAME,accessor:t,Cell:({cell:e,row:t,column:s})=>s.id===r.YEF.COUNTRY_NAME?i.createElement("div",{className:"px-15"},i.createElement("span",{className:`me-1 fi fi-${this.data.find((e=>e[r.YEF.COUNTRY_NAME]===t?.values[r.YEF.COUNTRY_NAME]))?.[r.YEF.COUNTRY_CODE]?.toLowerCase()}`}),i.createElement("span",{className:"text-nowrap"},""===e?.value?"Unknown":e?.value)):s.id===r.CEO.BOUNCE_RATE?i.createElement("div",{className:"px-3 text-end"},e?.value+"%"):s.id===r.CEO.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"px-3 text-end"},e?.value?o().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},r.HP2.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:l}}return{header:[],data:[]}})),(0,a.M)(this,"toRegionTableTopDashboard",(()=>{const e=["txt_region","txt_visitors"],t=[r.QA8.REGION,r.CEO.NUMBER_OF_VISITORS];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,Cell:({cell:e,column:t})=>t.id===r.QA8.REGION?i.createElement("div",{className:"px-15"},e?.value?e?.value:"Unknown"):i.createElement("div",{className:"px-15 text-end"},e?.value??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})})));return{header:s,data:a}}return{header:[],data:[]}})),(0,a.M)(this,"toCitiesTableTopDashboard",(()=>{const e=["txt_city","txt_visitors"],t=[r.NWG.CITY,r.CEO.NUMBER_OF_VISITORS];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,Cell:({cell:e,column:t})=>t.id===r.NWG.CITY?i.createElement("div",{className:"px-15"},e?.value?e?.value:"Unknown"):i.createElement("div",{className:"px-15 text-end"},e?.value??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})})));return{header:s,data:a}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}}},37932:(e,t,s)=>{s.d(t,{P:()=>c});var a=s(81252),i=s(96540),r=s(99194),l=s(95093),o=s.n(l),n=s(54625),c=class{constructor(e,t){(0,a.M)(this,"data",[]),(0,a.M)(this,"globalViewModel",null),(0,a.M)(this,"toRaw",(()=>this.data)),(0,a.M)(this,"toPagesTableTopDashboard",(()=>{const e=["txt_page","txt_page_views","txt_time_on_page"],t=[r.q_A.URL,r.CEO.NUMBER_OF_PAGE_VIEWS,r.CEO.AVERAGE_SESSION_DURATION],s=Math.max(...this.data.map((e=>e[r.CEO.NUMBER_OF_PAGE_VIEWS])));if(this.data?.length){const a=t.map(((t,a)=>({Header:e[a],accessor:t,allowSort:!0,Cell:({cell:e,column:t,row:a})=>{const l=t.id===r.q_A.URL&&new URL(e?.value);return t.id===r.q_A.URL?i.createElement("a",{href:`${e?.value}`,target:"_blank",rel:"noreferrer",className:"d-block position-relative px-20 py-sm table-link text-gray-900"},i.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0 table-link-bg",style:{width:`${(a.cells[1]?.value/s*100)?.toString()}%`}}),i.createElement("div",{className:"position-relative z-1 text-ellipsis line-clamp-1 pe-20"},i.createElement("div",{className:"position-relative table-link-text"},""===l?"Unknown":l.pathname+l.search))):t.id===r.CEO.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"text-end"},e?.value?o().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),l=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),n=l?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:a,data:n}}return{header:[],data:[]}})),(0,a.M)(this,"toPagesTableTop",(e=>{const t=["txt_page","txt_visitors","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],s=[r.q_A.URL,r.CEO.NUMBER_OF_VISITORS,r.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS,r.CEO.BOUNCE_RATE,r.CEO.NUMBER_OF_PAGES_PER_SESSION,r.CEO.AVERAGE_SESSION_DURATION];if(this.data?.length){const a=s.map(((s,a)=>({Header:t[a],accessor:s,allowSort:!0,width:s===r.q_A.URL?300:s===r.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,tooltip:s===r.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS?"txt_bounce_rate":"",Cell:({cell:t,column:s})=>{const a=s.id===r.q_A.URL&&new URL(t?.value);return s.id===r.q_A.URL?i.createElement(i.Fragment,null,e?i.createElement("a",{href:"#",onClick:e=>this.handleChangeLink(e,`behavior/detail?url=${t?.value}}`),className:"px-15 d-block text-secondary-50"},i.createElement("span",null,""===a?"Unknown":a.pathname+a.search)):i.createElement(n.k2,{to:`/behavior/detail?url=${t?.value}`,className:"px-15 d-block text-secondary-50"},""===a?"Unknown":a.pathname+a.search)):s.id===r.CEO.BOUNCE_RATE?i.createElement("div",{className:"px-3 text-end"},t?.value+"%"):s.id===r.CEO.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"px-15 text-end"},t?.value?o().utc(1e3*t?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},t?.value??null)}}))),l=this.data?.map((e=>({...e,...s.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),c=l?.map((e=>{for(let t in e)s.includes(t)||delete e[t];return e}));return{header:a,data:c}}return{header:[],data:[]}})),(0,a.M)(this,"transformResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const s=this.data.filter((e=>e[r.q_A.URL]===t[r.q_A.URL]));e={...e,[t[r.q_A.URL]]:s}})),e})),(0,a.M)(this,"toBarChart",(()=>{const e=this.transformResponse();return Object.keys(e).map((t=>{const s=t&&new URL(t);return{name:""===s?"Unknown":s.pathname+s.search,number:e[t]?.reduce(((e,t)=>e+t[r.CEO.NUMBER_OF_VISITORS]),0)}}))})),e&&(this.data=e??[],this.globalViewModel=t)}}}}]);