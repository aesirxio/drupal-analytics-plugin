"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[983],{983:(e,t,a)=>{a.r(t),a.d(t,{default:()=>F});var s=a(54283),n=a(23804),l=a(4692),r=a(94380),i=a(51751),o=a(53800),c=a(55688),m=a(96540),d=a(44015),u=a(27813),h=a(99194),E=a(44011),g=a(95093),v=a.n(g),p=a(32389),f=a(56347),w=a(44479),M=a(61105),b=a(44354),N=a(20982),S=a(66188),_=a(418),x=a(46266),A=m.createContext(),T=({children:e,viewModel:t})=>m.createElement(A.Provider,{value:t},e),D=class{constructor(){(0,c.Mu)(this,"getFlowDetail",(async(e,t,a,s)=>{try{const n=new h.L20,l=await n.getFlowDetail(e,t);l?(0,u.h5)((()=>{a(l)})):s({message:"Something went wrong from Server response"})}catch(e){(0,u.h5)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,c.Mu)(this,"getEvents",(async(e,t,a,s)=>{try{const n=new h.L20,l=await n.getEvents(e,t);l&&"AxiosError"!==l?.name?(0,u.h5)((()=>{a(l)})):s({message:l?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,u.h5)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):e.response?.data.error?s({message:e.response?.data?.error}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}},R=class{constructor(e,t){(0,c.Mu)(this,"data",[]),(0,c.Mu)(this,"globalViewModel",null),(0,c.Mu)(this,"toRaw",(()=>this.data)),(0,c.Mu)(this,"transformResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const a=this.data.filter((e=>e[h.sSJ.EVENT_NAME]===t[h.sSJ.EVENT_NAME]));e={...e,[t[h.sSJ.EVENT_NAME]]:a}})),e})),(0,c.Mu)(this,"transformEventsResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const a=this.data.filter((e=>e[h.HMX.EVENT_NAME]===t[h.HMX.EVENT_NAME]));e={...e,[t[h.HMX.EVENT_NAME]]:a}})),e})),(0,c.Mu)(this,"toFlowDetailTable",(()=>{const e=["Name","Type","URL","Referer","Time (UTC)",""],t=[h.sSJ.EVENT_NAME,h.sSJ.EVENT_TYPE,h.sSJ.URL,h.sSJ.REFERER,h.sSJ.START_DATE,h.sSJ.UUID];if(this.data.length){const a=t.map(((t,a)=>({Header:e[a],accessor:t,width:t===h.sSJ.UUID?10:t===h.sSJ.EVENT_NAME||t===h.sSJ.EVENT_TYPE?80:170,allowSort:!0,Cell:({cell:e,column:t})=>{if(t.id===h.sSJ.EVENT_NAME&&e?.value)return m.createElement("div",{className:"px-3"},e?.value??null);if(t.id===h.sSJ.UUID)return m.createElement(m.Fragment,null);if(t.id!==h.sSJ.REFERER&&t.id!==h.sSJ.URL||!e?.value)return m.createElement("div",{className:"px-3"},e?.value??null);{const t=new URL(e?.value);let a=""===t?"Unknown":t.pathname+t.search;return m.createElement("a",{href:e?.value,rel:"noreferrer",target:"_blank",className:"px-3 d-block"},a?.length>53?a?.slice(0,53)+"...":a)}}}))),s=this.data.map((e=>({...e,...t.map((t=>t===h.sSJ.START_DATE?{[t]:v()(e[t])?.utc()?.format("HH:mm:ss")}:{[t]:e[t]})).reduce(((e,t)=>({...t,...e})),{})}))),n=s?.map((e=>{for(let a in e)t.includes(a)||delete e[a];return e}));return{header:a,data:n}}return{header:[],data:[]}})),e&&(this.data=e,this.globalViewModel=t)}},V=class{constructor(e,t,a){(0,c.Mu)(this,"flowStore",null),(0,c.Mu)(this,"behaviorStore",null),(0,c.Mu)(this,"status",i.s.READY),(0,c.Mu)(this,"globalStoreViewModel",null),(0,c.Mu)(this,"data",null),(0,c.Mu)(this,"dataEvents",null),(0,c.Mu)(this,"dataConversion",null),(0,c.Mu)(this,"relatedVisitorData",null),(0,c.Mu)(this,"dataFilter",{}),(0,c.Mu)(this,"getFlowDetail",(async(e,t)=>{this.status=i.s.LOADING,this.dataFilter={...this.dataFilter,...t},"all"===t["filter_not[device]"]&&this.dataFilter["filter_not[device]"]&&delete this.dataFilter["filter_not[device]"],"all"===t["filter[event_name]"]&&this.dataFilter["filter[event_name]"]&&delete this.dataFilter["filter[event_name]"],"clearDataFilter"===t["filter[url]"]&&this.dataFilter["filter[url]"]&&delete this.dataFilter["filter[url]"],await this.flowStore.getFlowDetail(e,this.dataFilter,this.callbackOnDataSuccessHandler,this.callbackOnErrorHandler)})),(0,c.Mu)(this,"getEvents",((e,t)=>{this.status=i.s.LOADING,this.dataFilterEvents={page_size:"1000","filter_not[event_type]":"conversion",...this.dataFilterEvents,...e};const a={...this.globalStoreViewModel.dateFilter,...t};this.flowStore.getEvents(this.dataFilterEvents,a,this.callbackOnDataEventsSuccessHandler,this.callbackOnErrorHandler)})),(0,c.Mu)(this,"getConversion",((e,t)=>{this.status=i.s.LOADING,this.dataFilterConversion={page_size:"1000","filter[event_type]":"conversion",...this.dataFilterConversion,...e};const a={...this.globalStoreViewModel.dateFilter,...t};this.flowStore.getEvents(this.dataFilterConversion,a,this.callbackOnDataConversionSuccessHandler,this.callbackOnErrorHandler)})),(0,c.Mu)(this,"setDataFilter",(e=>{this.dataFilter=e})),(0,c.Mu)(this,"callbackOnErrorHandler",(e=>{this.status=i.s.READY,(0,E.me)(e.message,"error")})),(0,c.Mu)(this,"callbackOnDataSuccessHandler",(e=>{if(e)if(this.status=i.s.READY,this.data=e,e?.events){const t=new R(e?.events,this.globalStoreViewModel);this.relatedVisitorData=t}else this.status=i.s.ERROR,this.relatedVisitorData=null;else this.status=i.s.ERROR,this.data={}})),(0,c.Mu)(this,"callbackOnDataEventsSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.status=i.s.READY;const t=new l.B(e,this.globalStoreViewModel);this.dataEvents=t}}else this.status=i.s.ERROR,this.dataEvents=[]})),(0,c.Mu)(this,"callbackOnDataConversionSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.status=i.s.READY;const t=new l.B(e,this.globalStoreViewModel);this.dataConversion=t}}else this.status=i.s.ERROR,this.dataConversion=[]})),(0,u.l_)(this),this.flowStore=e,this.behaviorStore=t,this.globalStoreViewModel=a}},y=class{constructor(e,t,a){(0,c.Mu)(this,"flowDetailViewModel",null),(0,c.Mu)(this,"getFlowViewModel",(()=>this.flowDetailViewModel)),t&&(this.flowDetailViewModel=new V(e,t,a))}},k=({data:e=[],loading:t=i.s.LOADING})=>m.createElement("div",{className:"row gx-24 mb-24"},e?.length>0?e.map(((e,a)=>m.createElement("div",{className:e.className,key:a},m.createElement("div",{className:"bg-white p-24 shadow-sm rounded-3 h-100"},m.createElement("div",{className:"d-flex justify-content-between position-relative align-items-center"},t===i.s.LOADING?m.createElement(E.ee,{className:"d-flex justify-content-start align-items-center bg-white",size:"10px"}):m.createElement(m.Fragment,null,m.createElement("div",{className:"overflow-hidden"},m.createElement("p",{className:"m-0 text-gray fs-16"},e.title),m.createElement("h3",{className:"mb-0 fw-semibold fs-4"},e?.value)),m.createElement("div",{className:"d-flex flex-wrap align-item-center"},m.createElement("div",{className:"icon-card rounded-circle ",style:{background:e?.iconColor&&(0,r.i)(e?.iconColor,.15)}},m.createElement("span",{className:"icon arrow d-inline-block align-text-bottom ms-auto",style:{WebkitMaskImage:`url(${e?.icon})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",backgroundColor:e?.iconColor&&(0,r.i)(e?.iconColor)}}))))))))):null),C=(0,c.f1)((0,s.A)()),L=(0,d.PA)((e=>{const[t,a]=(0,m.useState)([]),{t:s}=(0,p.Bd)(),{flowDetailViewModel:{data:n=[],relatedVisitorData:l,getFlowDetail:r,getEvents:i,getConversion:c,dataEvents:d,dataConversion:u,status:g}}=m.useContext(A),{biListViewModel:{activeDomain:T,dateFilter:D,dataFilter:R,integrationLink:V,setIntegrationLink:y}}=(0,o.jd)(),{uuid:L}=(0,f.g)(),O=_.A.parse(e.location.search),I=e.integration?V?.split("&id=")[1]?V?.split("&id=")[1]:O?.id:L;(0,m.useEffect)((()=>((async()=>{await r(I,{"with[]":"events"}),await i({"filter[domain]":T,"with[]":"events"}),await c({"filter[domain]":T,"with[]":"events"})})(),()=>{})),[T]);(0,m.useEffect)((()=>{if(e.integration){(async()=>{if(l?.data?.length&&!t?.length){const e=l.data.reduce(((e,t)=>(e.some((e=>e==t.url))||e.push(t.url),e)),[]),t=await Promise.all(e.map((async e=>await(async e=>{try{const t=await x.A.get(e),a=(new DOMParser).parseFromString(t?.data,"text/html"),s=a.querySelector('meta[property="og:image"]'),n=a.querySelector("title");return{url:e,image:s?s.getAttribute("content"):null,title:n?n.innerText:null}}catch(t){return{url:e}}})(e))));a(t)}})()}}),[l?.data]);const F=(0,m.useMemo)((()=>[{className:"col-4",title:s("txt_total_conversions"),icon:h._K2.PUBLIC_URL+"/assets/images/action.svg",iconColor:"#1AB394",value:n?.[h.zSS.CONVERSION]??0},{className:"col-4",title:s("txt_total_events"),icon:h._K2.PUBLIC_URL+"/assets/images/click.png",iconColor:"#1AB394",value:n?.[h.zSS.EVENT]??0},{className:"col-4",title:s("txt_total_actions"),icon:h._K2.PUBLIC_URL+"/assets/images/aim.svg",iconColor:"#1AB394",value:n?.[h.zSS.ACTION]??0}]),[n]),J=(0,m.useMemo)((()=>[{text:s("txt_date"),value:n?.[h.zSS.START]?v().utc(n?.[h.zSS.START]).format("DD-MM-YYYY hh:mm:ss"):""},{text:s("txt_domain"),value:n?.[h.zSS.DOMAIN]??""},{text:s("txt_locale"),value:n?.[h.zSS.GEO]?.country?.name??"unDetected"},{text:s("txt_device"),value:n?.[h.zSS.DEVICE]??""},{text:s("txt_browser"),value:n?.[h.zSS.BROWSER_NAME]??""},{text:s("txt_duration"),value:v().utc(1e3*n?.[h.zSS.DURATION]).format("mm:ss")??0},{text:"UX %",value:(n?.[h.zSS.UX_PERCENT]??0)+"%"},{text:s("txt_page_view"),value:n?.[h.zSS.PAGE_VIEW]??0}]),[n]),Y=async e=>{await r(I,{"with[]":"events","filter[event_name]":e?.value})},U=C.default.debounce((async e=>{await r(I,{"with[]":"events","filter[url]":e.target?.value?`https://${T}/${e.target?.value}`:"clearDataFilter"})}),400);return m.createElement("div",{className:"py-4 px-4 h-100 d-flex flex-column"},m.createElement("div",{className:"position-relative d-flex align-items-center mb-3"},m.createElement("div",{className:"back_icon d-flex align-items-center justify-content-center cursor-pointer me-1",onClick:t=>{if(e.integration)((e,t)=>{e.preventDefault(),t&&y(t)})(t,"flow-list");else{const e={...R};E.b6.push(`/flow-list?date_end=${D?.date_end}&date_start=${D?.date_start}&domain=${T}&pagination=${R?.pagination?R?.pagination:"1"}&${_.A.stringify(e)}`)}}},m.createElement(N.g,{className:"text-success",icon:S.Wzs})),m.createElement("h2",{className:"fw-bold mb-0"},s("txt_visitor_detail"))),m.createElement("div",{className:"row gx-24 "},m.createElement("div",{className:"col-3"},m.createElement("div",{className:"bg-white p-24 shadow-sm rounded-3"},J?.length?J.map(((e,t)=>m.createElement("div",{key:t,className:`d-flex justify-content-between ${J.length-1===t?"":"mb-3"} `},m.createElement("span",{className:"fw-semibold"},e.text),m.createElement("span",null,e.value)))):null)),m.createElement("div",{className:"col-9"},m.createElement(k,{loading:g,data:F}),m.createElement(w.A,{className:"mb-2"},d?.toEventsList()?.length&&m.createElement(M.A,{lg:"2",className:"mb-2 mb-lg-0"},m.createElement(E.J0,{defaultValue:{label:"All Events",value:"all"},options:d?.toEventsList(),className:"fs-sm",isBorder:!0,onChange:e=>{Y(e)},plColor:"#808495",isSearchable:!1})),u?.toConversionList()?.length&&m.createElement(M.A,{lg:"2",className:"mb-2 mb-lg-0"},m.createElement(E.J0,{defaultValue:{label:"All Conversions",value:"all"},options:u?.toConversionList(),className:"fs-sm",isBorder:!0,onChange:e=>{Y(e)},plColor:"#808495",isSearchable:!1})),m.createElement(M.A,{lg:"6",className:"mb-2 mb-lg-0"},m.createElement("span",{className:"search_url d-flex position-relative border rounded-2"},m.createElement("div",{className:"px-2 bg-gray-400 d-flex align-items-center text-nowrap"},"https://",T,"/"),m.createElement("input",{placeholder:s("txt_search_url"),onChange:U,className:"form-control pe-2 pe-4 fs-14 border-0 shadow-none p-2"}),m.createElement("i",{className:"text-green position-absolute top-0 bottom-0 end-0 pe-24 d-flex align-items-center"},m.createElement(N.g,{icon:S.MjD}))))),l?.data?.length?m.createElement("div",{className:"bg-white p-24 position-relative ChartWrapper"},g===E.Zg.LOADING?m.createElement(E.bg,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):m.createElement(m.Fragment,null,l?.data?.map(((e,a)=>{const n=t.find((t=>e.url==t.url));return m.createElement("div",{className:"d-flex align-items-center mb-24 flow-detail-item",key:a},m.createElement("div",{className:"flow-detail-item-image me-18px"},m.createElement(b.A,{className:"object-fit-cover rounded-3 overflow-hidden",style:{width:148,height:95},src:e?.[h.HMX.OG_IMAGE]?e?.[h.HMX.OG_IMAGE]:n?.image?n?.image:h._K2.PUBLIC_URL+"/assets/images/default_preview.jpg",alt:"icons"})),m.createElement("div",{className:"flow-detail-item-content d-flex flex-wrap"},m.createElement("div",{className:"fs-14 w-100",style:{color:"#5F5E70"}},v()(e[h.sSJ.START_DATE])?.utc()?.format("HH:mm:ss")),m.createElement("div",{className:"d-flex mb-sm fs-14 fw-medium"},m.createElement("div",{className:`flow_detail_item_content_action ${"visit"==e[h.sSJ.EVENT_NAME]?"visit":e[h.sSJ.EVENT_TYPE]} text-white text-capitalize`},"action"===e[h.sSJ.EVENT_TYPE]?s("txt_visitor"):"conversion"===e[h.sSJ.EVENT_TYPE]?s("txt_conversion"):s("txt_event")),m.createElement("span",{className:"flow_detail_item_content_name ms-sm"},"visit"===e[h.sSJ.EVENT_NAME]?"Visited":e[h.sSJ.EVENT_NAME])),(n?.title||e?.[h.HMX.OG_TITLE])&&m.createElement("p",{className:"mb-0 fw-medium w-100 lh-base text-gray-heading fs-14"},e?.[h.HMX.OG_TITLE]??n.title),m.createElement("div",{className:"w-100"},m.createElement("a",{href:`${e[h.sSJ.URL]}`,target:"_blank",rel:"noreferrer",className:"flow_detail_item_content_link fw-semibold"},e[h.sSJ.URL]))))})))):m.createElement(m.Fragment,null))))})),O=(0,f.y)(L),I=(0,d.PA)(class extends m.Component{constructor(e){super(e),(0,c.Mu)(this,"flowStore",null),(0,c.Mu)(this,"flowViewModel",null),(0,c.Mu)(this,"eventsStore",null);const{viewModel:t}=e;this.viewModel=t||null,this.biListViewModel=this.viewModel?this.viewModel.getBiListViewModel():null,this.flowStore=new D({}),this.eventsStore=new n.D({}),this.flowViewModel=new y(this.flowStore,this.eventsStore,this.biListViewModel)}render(){return m.createElement(T,{viewModel:this.flowViewModel},m.createElement(O,{...this.props}))}}),F=(0,o.cm)((0,f.y)(I))},23804:(e,t,a)=>{a.d(t,{D:()=>r});var s=a(55688),n=a(27813),l=a(99194),r=class{constructor(){(0,s.Mu)(this,"getVisitor",(async(e,t,a,s)=>{try{const r=new l.L20,i=await r.getVisitor(e,t);i&&"AxiosError"!==i?.name?(0,n.h5)((()=>{a(i)})):s({message:i?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,n.h5)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):e.response?.data.error?s({message:e.response?.data?.error}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,s.Mu)(this,"getAttribute",(async(e,t,a,s)=>{try{const r=new l.L20,i=await r.getAttribute(e,t);i&&"AxiosError"!==i?.name?(0,n.h5)((()=>{a(i)})):s({message:i?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,n.h5)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):e.response?.data.error?s({message:e.response?.data?.error}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,s.Mu)(this,"getEvents",(async(e,t,a,s)=>{try{const r=new l.L20,i=await r.getEvents(e,t);i&&"AxiosError"!==i?.name?(0,n.h5)((()=>{a(i)})):s({message:i?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,n.h5)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):e.response?.data.error?s({message:e.response?.data?.error}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}}},4692:(e,t,a)=>{a.d(t,{B:()=>c});var s=a(55688),n=a(96540),l=a(99194),r=a(95093),i=a.n(r),o=a(54625),c=class{constructor(e,t){(0,s.Mu)(this,"data",[]),(0,s.Mu)(this,"globalViewModel",null),(0,s.Mu)(this,"toRaw",(()=>this.data)),(0,s.Mu)(this,"transformResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const a=this.data.filter((e=>e[l.sSJ.EVENT_NAME]===t[l.sSJ.EVENT_NAME]));e={...e,[t[l.sSJ.EVENT_NAME]]:a}})),e})),(0,s.Mu)(this,"transformEventsResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const a=this.data.filter((e=>e[l.HMX.EVENT_NAME]===t[l.HMX.EVENT_NAME]));e={...e,[t[l.HMX.EVENT_NAME]]:a}})),e})),(0,s.Mu)(this,"getFilterName",(()=>{const e=this.transformResponse(),t=Object.keys(e).map((e=>({value:e,label:e})));return t?.unshift({value:"all",label:"All Event"}),t})),(0,s.Mu)(this,"getListLine",(()=>{const e=this.transformResponse();return Object.keys(e).map((e=>e))})),(0,s.Mu)(this,"toAreaChart",(()=>{const e=this.transformEventsResponse(),t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=(0,l.jgq)(this.globalViewModel.dateFilter.date_start,this.globalViewModel.dateFilter.date_end),s={},n={all:a.map((t=>({name:t&&i()(t,"YYYY-MM-DD").format("DD"),...Object.keys(e).map((a=>{const s=e[a].filter((e=>e[l.HMX.DATE]===t));return{[a]:s?.length?s[0][l.HMX.TOTAL_VISITOR]:0}})).reduce(((e,t)=>({...t,...e})),{})}))),...Object.keys(e).map((t=>({[t]:a.map((a=>{const s=e[t].filter((e=>e[l.HMX.DATE]===a));return{name:a&&i()(a,"YYYY-MM-DD").format("DD MMM"),[t]:s?.length?s[0][l.HMX.TOTAL_VISITOR]:0}}))}))).reduce(((e,t)=>({...t,...e})),{})},r={all:t.map(((t,a)=>({name:t,...Object.keys(e).map((e=>{const t=this.data?.filter((e=>i()(e[l.HMX.DATE],"YYYY-MM-DD").month()===a))?.reduce(((e,t)=>e+t[l.HMX.TOTAL_VISITOR]),0);return{[e]:t??0}})).reduce(((e,t)=>({...t,...e})),{})}))),...Object.keys(e).map((e=>({[e]:t.map(((t,a)=>{const s=this.data?.filter((e=>i()(e[l.HMX.DATE],"YYYY-MM-DD").month()===a))?.reduce(((e,t)=>e+t[l.HMX.TOTAL_VISITOR]),0);return s?{name:t,[e]:s}:{name:t,[e]:0}}))}))).reduce(((e,t)=>({...t,...e})),{})};a.forEach((t=>{const a=i()(t).startOf("isoWeek").format("YYYY-MM-DD"),n=i()(t).endOf("isoWeek").format("YYYY-MM-DD"),r=`${i()(a).format("DD MMM")} - ${i()(n).format("DD MMM")}`;s[r]||(s[r]={},Object.keys(e).forEach((e=>{s[r][e]=0}))),Object.keys(e).forEach((a=>{const n=e[a].filter((e=>e[l.HMX.DATE]===t));s[r][a]+=n?.length?n[0][l.HMX.TOTAL_VISITOR]:0}))}));return[r,n,{all:Object.keys(s).map((e=>({name:e,...s[e]})))}]})),(0,s.Mu)(this,"toBarChart",(()=>{const e=this.transformEventsResponse();return Object.keys(e).map((t=>({name:t,number:e[t]?.reduce(((e,t)=>e+t[l.HMX.TOTAL_VISITOR]),0)})))})),(0,s.Mu)(this,"handleChangeLink",((e,t)=>{e.preventDefault(),t&&this.globalViewModel.setIntegrationLink(t)})),(0,s.Mu)(this,"toEventTable",(e=>{const t=["Name","Type","URL","Referer","Date",""],a=[l.sSJ.EVENT_NAME,l.sSJ.EVENT_TYPE,l.sSJ.URL,l.sSJ.REFERER,l.sSJ.START_DATE,l.sSJ.UUID];if(this.data.length){const s=a.map(((a,s)=>({Header:t[s],accessor:a,width:a===l.sSJ.UUID?10:a===l.sSJ.EVENT_TYPE?50:170,allowSort:!0,Cell:({cell:t,column:a})=>{if(a.id===l.sSJ.EVENT_NAME&&t?.value)return n.createElement(n.Fragment,null,e?n.createElement("a",{href:"#",onClick:e=>this.handleChangeLink(e,`events-detail&id=${t?.value}`),className:"px-3 text-secondary-50"},n.createElement("span",null,t?.value??null)):n.createElement(o.k2,{to:`/events-detail/${t?.value}`,className:"px-3 text-secondary-50"},t?.value??null));if(a.id===l.sSJ.UUID)return n.createElement(n.Fragment,null);if(a.id!==l.sSJ.REFERER&&a.id!==l.sSJ.URL||!t?.value)return n.createElement("div",{className:"px-3"},t?.value??null);{const e=new URL(t?.value);return n.createElement("div",{className:"px-3"},""===e?"Unknown":e.pathname+e.search)}}}))),r=this.data.map((e=>({...e,...a.map((t=>t===l.sSJ.START_DATE?{[t]:i()(e[t]).format("DD-MM-YYYY HH:mm:ss")}:{[t]:e[t]})).reduce(((e,t)=>({...t,...e})),{})}))),c=r?.map((e=>{for(let t in e)a.includes(t)||delete e[t];return e}));return{header:s,data:c}}return{header:[],data:[]}})),(0,s.Mu)(this,"toEventsList",(()=>{const e=this.data?.length?this.data?.map((e=>({value:e?.event_name,label:e?.event_name}))):[];return[{label:"All Event",value:"all"},...[...new Map(e.map((e=>[e.value,e]))).values()]]})),(0,s.Mu)(this,"toConversionList",(()=>{const e=this.data?.length?this.data?.map((e=>({value:e?.event_name,label:e?.event_name}))):[];return[{label:"All Conversion",value:"all"},...[...new Map(e.map((e=>[e.value,e]))).values()]]})),e&&(this.data=e,this.globalViewModel=t)}}},94380:(e,t,a)=>{a.d(t,{E:()=>d,i:()=>m});var s=a(51751),n=a(96540),l=a(44011),r=a(99194),i=a(20982),o=a(66188),c=a(23524);document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode("/*\n * @copyright   Copyright (C) 2022 AesirX. All rights reserved.\n * @license     GNU General Public License version 3, see LICENSE.\n */\n.icon-card {\n  width: 56px;\n  height: 56px;\n}\n.icon-card .icon {\n  width: 100%;\n  height: 100%;\n  background-color: var(--sidebar-menu-item-color);\n}\n\n.icon-grown {\n  width: 18px;\n  height: 18px;\n}"));function m(e,t){var a=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return t?"rgba("+a+", "+s+", "+n+", "+t+")":"rgb("+a+", "+s+", "+n+")"}var d=({title:e,icon:t,iconColor:a,value:d,isIncrease:u,percent:h,textPercent:E,options:g,defaultValue:v,loading:p,tooltip:f})=>{const[w,M]=(0,n.useState)(v??null),[b,N]=(0,n.useState)(d);(0,n.useEffect)((()=>{let e=g?.find((e=>e?.value===w?.value));N(e?e?.actualValue:d)}),[d]);return n.createElement("div",{className:"bg-white p-24 shadow-sm rounded-3 h-100"},n.createElement("div",{className:"d-flex justify-content-between align-items-center mb-16"},n.createElement("div",{className:"d-flex align-items-center position-relative"},t&&n.createElement("div",{className:"icon-card rounded-circle me-16 ",style:{background:m(a,.15)}},n.createElement("span",{className:"icon arrow d-inline-block align-text-bottom ms-auto",style:{WebkitMaskImage:`url(${t})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",backgroundColor:m(a)}})),n.createElement("h6",{className:"mb-0 fw-medium text-gray-900"},e),f&&n.createElement(n.Fragment,null,n.createElement(i.g,{"data-tooltip-id":"tooltipTable","data-tooltip-content":f,className:"mx-sm fs-12 mb-1",icon:o.mEO}),n.createElement(c.A,{id:"tooltipTable"}))),g&&n.createElement(l.J0,{value:w,options:g,className:"fs-sm",isBorder:!0,onChange:e=>{M(e),e?.actualValue&&N(e?.actualValue)},isSearchable:!1})),n.createElement("div",{className:"d-flex justify-content-between position-relative"},p===s.s.LOADING&&n.createElement(l.ee,{className:"d-flex justify-content-start align-items-center bg-white",size:"10px"}),n.createElement("h3",{className:"mb-0 fw-medium fs-24"},b),n.createElement("div",{className:"d-flex flex-wrap align-item-center"},h&&n.createElement("div",{className:"d-flex w-100 mb-sm justify-content-end"},n.createElement("span",{className:"icon-grown arrow d-inline-block align-text-bottom ms-auto text-primary "+(u?"bg-green":"bg-red"),style:{WebkitMaskImage:`url(${r._K2.PUBLIC_URL}${u?"/assets/images/grown-up.svg":"/assets/images/grown-down.svg"})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center"}}),n.createElement("span",{className:(u?"text-green":"text-danger")+" fw-semibold"},u?"+":"-",h)),n.createElement("div",{className:"w-100 text-gray fs-sm text-end"},E))))}},44354:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(46942),n=a.n(s),l=a(96540),r=a(5556),i=a.n(r),o=a(36519),c=a(74848);i().string,i().bool,i().bool,i().bool,i().bool;const m=l.forwardRef((({bsPrefix:e,className:t,fluid:a=!1,rounded:s=!1,roundedCircle:l=!1,thumbnail:r=!1,...i},m)=>(e=(0,o.oU)(e,"img"),(0,c.jsx)("img",{ref:m,...i,className:n()(t,a&&`${e}-fluid`,s&&"rounded",l&&"rounded-circle",r&&`${e}-thumbnail`)}))));m.displayName="Image";const d=m}}]);