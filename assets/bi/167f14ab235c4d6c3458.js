"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[3149],{23149:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Q});var a,i,l,r=s(88255),o=s(71547),n=s(80928),c=s(54372),d=s(84361),m=(s(20734),s(16505),s(28949)),h=s(15218),g=s(20513),p=s(70069),u=s(23541),w=s(67294),E=s(91072),v=s(38585),b=s(16550),_=s(68949),D=s(73022),S=s(26982),M=s(30381),f=s.n(M),R=s(41330),N=s(34051),F=s(31555),V=s(17905),x=s(88325),O=s(12086),L=s(70982),B=s(59417),y=(s(7034),class{constructor(){(0,u.o)(this,"getMetrics",(async(e,t,s,a)=>{try{const i=new D.Q22,l=await i.getMetrics(e,t);l&&"AxiosError"!==l?.name?(0,_.z)((()=>{s(l)})):(0,_.z)((()=>{a({message:l?.response?.data?.error||"Something went wrong from Server response"})}))}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,u.o)(this,"getVisitors",(async(e,t,s,a)=>{try{const i=new D.Q22,l=await i.getVisitors(e,t);l&&"AxiosError"!==l?.name?(0,_.z)((()=>{s(l)})):a({message:l?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,u.o)(this,"getCountries",(async(e,t,s,a)=>{try{const i=new D.Q22,l=await i.getCountries(e,t);l?(0,_.z)((()=>{s(l)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,u.o)(this,"getBrowsers",(async(e,t,s,a)=>{try{const i=new D.Q22,l=await i.getBrowsers(e,t);l?(0,_.z)((()=>{s(l)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,u.o)(this,"getDevices",(async(e,t,s,a)=>{try{const i=new D.Q22,l=await i.getDevices(e,t);l?(0,_.z)((()=>{s(l)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,u.o)(this,"getPages",(async(e,t,s,a)=>{try{const i=new D.Q22,l=await i.getPages(e,t);l?(0,_.z)((()=>{s(l)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,u.o)(this,"getReferer",(async(e,t,s,a)=>{try{const i=new D.Q22,l=await i.getReferer(e,t);l?(0,_.z)((()=>{s(l)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}}),I=class{constructor(e,t){(0,u.o)(this,"data",[]),(0,u.o)(this,"globalViewModel",null),(0,u.o)(this,"toRaw",(()=>this.data)),(0,u.o)(this,"toAreaChart",(()=>{const e=(0,D.F9f)(this.globalViewModel?.dateFilter?.date_start,this.globalViewModel?.dateFilter?.date_end),t=e.map((e=>{const t=this.data.find((t=>f()(t.date).format("YYYY-MM-DD")===e));return{name:e&&f()(e,"YYYY-MM-DD").format("DD MMM"),visits:t?.[D.zAx.VISITS]??0,page_views:t?.[D.zAx.TOTAL_PAGE_VIEWS]??0,unique_visits:t?.unique_visits??0}})),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(((e,t)=>{const s=this.data.filter((e=>f()(e?.date).month()===t));let a=0,i=0,l=0;return s&&(a=s.reduce(((e,t)=>e+t[D.zAx.VISITS]),0),i=s.reduce(((e,t)=>e+t[D.zAx.TOTAL_PAGE_VIEWS]),0),l=s.reduce(((e,t)=>e+t.unique_visits),0)),{name:e,visits:a,page_views:i,unique_visits:l}})),a={};e.forEach((e=>{const t=f()(e).startOf("isoWeek"),s=f()(e).endOf("isoWeek"),i=`${t.format("DD MMM")} - ${s.format("DD MMM")}`;a[i]||(a[i]={visits:0,page_views:0,unique_visits:0});const l=this.data.filter((e=>f()(e?.date).isBetween(t,s,null,"[]")));if(l){const e=l.reduce(((e,t)=>e+t[D.zAx.VISITS]),0),t=l.reduce(((e,t)=>e+t[D.zAx.TOTAL_PAGE_VIEWS]),0),s=l.reduce(((e,t)=>e+t.unique_visits),0);a[i].visits+=e,a[i].page_views+=t,a[i].unique_visits+=s}}));return[{visitors:s},{visitors:t},{visitors:Object.keys(a).map((e=>({name:e,visits:a[e].visits,page_views:a[e].page_views,unique_visits:a[e].unique_visits})))}]})),(0,u.o)(this,"getFilterName",(()=>[{label:"Visitors",value:"visitors"}])),(0,u.o)(this,"toBrowsersTableTop",(()=>{const e=["txt_browser","txt_visitors","%"],t=Math.max(...this.data.map((e=>e[D.lF8.NUMBER_OF_VISITORS]))),s=[D.fpu.BROWSER_NAME,D.lF8.NUMBER_OF_VISITORS,D.lF8.NUMBER_OF_VISITORS_PERCENT];if(this.data?.length){const a=s.map(((s,a)=>({Header:e[a],accessor:s,allowSort:!0,width:s===D.fpu.BROWSER_NAME?250:s===D.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:100,Cell:({cell:e,column:s,row:a})=>{let i="";switch(e?.value){case"Chrome":i="/assets/images/chrome.svg";break;case"Safari":i="/assets/images/safari.svg";break;case"Firefox":i="/assets/images/firefox.svg";break;case"Microsoft Edge":i="/assets/images/microsoft_edge.svg";break;case"Opera":i="/assets/images/opera.svg";break;case"Samsung Internet for Android":i="/assets/images/samsung_browser.svg";break;case"Googlebot":i="/assets/images/google_bot.svg";break;case"Yandex Browser":i="/assets/images/yandex_browser.svg"}return w.createElement(w.Fragment,null,s.id===D.fpu.BROWSER_NAME?w.createElement("div",{className:"d-flex align-items-center py-sm px-20 position-relative"},w.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0",style:{backgroundColor:"#E7EFFF",width:`${(a.cells[1]?.value/t*100)?.toString()}%`}}),w.createElement("div",{className:"z-1"},i&&w.createElement(R.Z,{className:"me-12px",style:{width:22,height:22},src:D.OBj.PUBLIC_URL+i,alt:"icons"}),""===e?.value?"Unknown":e?.value)):s.id===D.lF8.NUMBER_OF_VISITORS_PERCENT?w.createElement("div",{className:"text-end"},D.WtE.numberWithCommas(e?.value)??null):w.createElement("div",{className:"text-end pe-2"},D.WtE.numberWithCommas(e?.value)??null))}}))),i=this.data?.map((e=>(e[D.lF8.NUMBER_OF_VISITORS_PERCENT]=e[D.lF8.NUMBER_OF_VISITORS_PERCENT]/10,{...e,...s.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=i?.map((e=>{for(let t in e)s.includes(t)||delete e[t];return e}));return{header:a,data:l}}return{header:[],data:[]}})),(0,u.o)(this,"toDevicesTableTop",(()=>{const e=["txt_device","txt_visitors"],t=[D.t9E.DEVICE,D.lF8.NUMBER_OF_VISITORS],s=Math.max(...this.data.map((e=>e[D.lF8.NUMBER_OF_VISITORS])));if(this.data?.length){const a=t.map(((t,a)=>({Header:e[a],accessor:t,allowSort:!0,width:t===D.t9E.DEVICE?250:t===D.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,Cell:({cell:e,column:t,row:a})=>w.createElement(w.Fragment,null,t.id===D.t9E.DEVICE?w.createElement("div",{className:"d-flex align-items-center text-capitalize py-sm px-20 position-relative"},w.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0",style:{backgroundColor:"#E7EFFF",width:`${(a.cells[1]?.value/s*100)?.toString()}%`}}),w.createElement("div",{className:"z-1"},""===e?.value?"Unknown":e?.value)):w.createElement("div",{className:" text-end"},D.WtE.numberWithCommas(e?.value)??null))}))),i=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=i?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:a,data:l}}return{header:[],data:[]}})),(0,u.o)(this,"toSourcesTableTopPageDetail",(()=>{const e=["txt_source","txt_visitors"],t=[D.fgu.REFERER,D.lF8.NUMBER_OF_VISITORS],s=Math.max(...this.data.map((e=>e[D.lF8.NUMBER_OF_VISITORS])));if(this.data?.length){const a=t.map(((t,a)=>({Header:e[a],accessor:t,allowSort:!0,Cell:({cell:e,column:t,row:a})=>{let i="";if(t.id===D.fgu.REFERER){if(e?.value){const t=new URL(e?.value);i="aesirx.io"===t?.hostname?`${D.OBj.PUBLIC_URL}/assets/images/logo/welcome-logo.png`:""}switch(e?.value){case"":i=`${D.OBj.PUBLIC_URL}/assets/images/direct.png`;break;case"https://www.google.com/":i=`${D.OBj.PUBLIC_URL}/assets/images/google.png`;break;case"https://www.facebook.com/":i=`${D.OBj.PUBLIC_URL}/assets/images/facebook.png`;break;case"https://www.linkedin.com/":i=`${D.OBj.PUBLIC_URL}/assets/images/linkedin.png`;break;case"https://yandex.ru/":i=`${D.OBj.PUBLIC_URL}/assets/images/yandex.png`;break;case"https://duckduckgo.com/":i=`${D.OBj.PUBLIC_URL}/assets/images/duckduckgo.svg`;break;case"https://www.reddit.com/":i=`${D.OBj.PUBLIC_URL}/assets/images/reddit.png`;break;case"https://twitter.com/":i=`${D.OBj.PUBLIC_URL}/assets/images/twitter.png`;break;case"https://github.com/":i=`${D.OBj.PUBLIC_URL}/assets/images/github.png`}}return t.id===D.fgu.REFERER?w.createElement("a",{...e?.value?{target:"_blank",rel:"noreferrer",href:`${e?.value}`}:{},className:"d-block position-relative px-20 py-sm text-gray-900 table-link"},w.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0 table-link-bg",style:{width:`${(a.cells[1]?.value/s*100)?.toString()}%`}}),w.createElement("div",{className:"position-relative z-1 text-ellipsis line-clamp-1 pe-20"},w.createElement("div",{className:"position-relative table-link-text"},i&&w.createElement(R.Z,{className:"me-sm object-fit-contain",style:{width:22,height:22},src:D.OBj.PUBLIC_URL+i,alt:"icons"}),e?.value?e?.value:"Direct / None"))):w.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),i=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})})));return{header:a,data:i}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},T=class{constructor(e,t){(0,u.o)(this,"pageDetailStore",null),(0,u.o)(this,"status",g.r.READY),(0,u.o)(this,"statusTopPageTable",g.r.READY),(0,u.o)(this,"statusTopBrowser",g.r.READY),(0,u.o)(this,"statusTopSourceTable",g.r.READY),(0,u.o)(this,"globalStoreViewModel",null),(0,u.o)(this,"summaryData",null),(0,u.o)(this,"visitorData",null),(0,u.o)(this,"countriesData",null),(0,u.o)(this,"browsersData",null),(0,u.o)(this,"devicesData",null),(0,u.o)(this,"devicesTableData",null),(0,u.o)(this,"pagesTableData",null),(0,u.o)(this,"sourcesTableData",null),(0,u.o)(this,"sortByPages",{"sort[]":"","sort_direction[]":""}),(0,u.o)(this,"sortByDevices",{"sort[]":"","sort_direction[]":""}),(0,u.o)(this,"sortByBrowsers",{"sort[]":"","sort_direction[]":""}),(0,u.o)(this,"sortBySources",{"sort[]":"","sort_direction[]":""}),(0,u.o)(this,"initialize",((e,t)=>{this.getMetrics(e,t),this.getVisitors(e,t),this.getCountries(e,t),this.getBrowsers(e,t),this.getDevices(e,t),this.getPages(e,t),this.getReferer(e,t)})),(0,u.o)(this,"getMetrics",((e,t)=>{this.status=g.r.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.pageDetailStore.getMetrics(this.dataFilter,s,this.callbackOnSummaryDataSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"getVisitors",((e,t)=>{this.status=g.r.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.pageDetailStore.getVisitors({...this.dataFilter,page_size:"1000"},s,this.callbackOnVisitorSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"getCountries",((e,t)=>{this.status=g.r.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.pageDetailStore.getCountries({...this.dataFilter,page_size:"10","sort[]":"number_of_page_views","sort_direction[]":"desc"},s,this.callbackOnCountriesSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"getBrowsers",((e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopBrowser=g.r.LOADING,this.sortByBrowsers=s,this.dataFilterBrowsers={page_size:"8",...this.dataFilterBrowsers,...e,...this.sortByBrowsers};const a={...this.globalStoreViewModel.dateFilter,...t};this.pageDetailStore.getBrowsers(this.dataFilterBrowsers,a,this.callbackOnBrowsersSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"handleFilterBrowsers",(async e=>{this.statusTopBrowser=g.r.LOADING,this.dataFilterBrowsers={...this.dataFilterBrowsers,...e};const t={...this.globalStoreViewModel.dateFilter};await this.pageDetailStore.getBrowsers(this.dataFilterBrowsers,t,this.callbackOnBrowsersSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"getDevices",((e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopBrowser=g.r.LOADING,this.sortByDevices=s,this.dataFilterDevices={page_size:"8",...this.dataFilterDevices,...e,...this.sortByDevices};const a={...this.globalStoreViewModel.dateFilter,...t};this.pageDetailStore.getDevices(this.dataFilterDevices,a,this.callbackOnDevicesSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"handleFilterDevices",(async e=>{this.statusTopBrowser=g.r.LOADING,this.dataFilterDevices={...this.dataFilterDevices,...e};const t={...this.globalStoreViewModel.dateFilter};await this.pageDetailStore.getDevices(this.dataFilterDevices,t,this.callbackOnDevicesSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"getPages",(async(e,t,s={"sort[]":"number_of_page_views","sort_direction[]":"desc"})=>{this.statusTopPageTable=g.r.LOADING,this.sortByPages=s,this.dataFilterPages={page_size:"8",...this.dataFilterPages,...e,...this.sortByPages};const a={...this.globalStoreViewModel.dateFilter,...t};await this.pageDetailStore.getPages(this.dataFilterPages,a,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"getReferer",(async(e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopSourceTable=g.r.LOADING,this.sortBySources=s,this.dataFilterSources={page_size:"8",...this.dataFilterSources,...e,...this.sortBySources};const a={...this.globalStoreViewModel.dateFilter,...t};await this.pageDetailStore.getReferer(this.dataFilterSources,a,this.callbackOnSourcesSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"handleFilter",(e=>{this.status=g.r.LOADING,this.dataFilter={...this.dataFilter,...e};const t={...this.globalStoreViewModel.dateFilter};this.pageDetailStore.getMetrics(this.dataFilter,t,this.callbackOnDataSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"handleFilterDateRange",((e,t)=>{this.status=g.r.LOADING;let s={date_start:f()(e).format("YYYY-MM-DD"),date_end:f()(t).endOf("day").format("YYYY-MM-DD")};this.initialize(this.dataFilter,s)})),(0,u.o)(this,"handleFilterPages",(async e=>{this.statusTopPageTable=g.r.LOADING,this.dataFilterPages={...this.dataFilterPages,...e};const t={...this.globalStoreViewModel.dateFilter};await this.pageDetailStore.getPages(this.dataFilterPages,t,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"handleFilterSources",(async e=>{this.statusTopSourceTable=g.r.LOADING,this.dataFilterSources={...this.dataFilterSources,...e};const t={...this.globalStoreViewModel.dateFilter};await this.pageDetailStore.getReferer(this.dataFilterSources,t,this.callbackOnSourcesSuccessHandler,this.callbackOnErrorHandler)})),(0,u.o)(this,"callbackOnErrorHandler",(e=>{this.status=g.r.READY,(0,S.j5)(e.message,"error")})),(0,u.o)(this,"callbackOnSummaryDataSuccessHandler",(e=>{e?"canceled"!==e?.message&&(this.status=g.r.READY,this.summaryData=e):(this.status=g.r.ERROR,this.data=[])})),(0,u.o)(this,"callbackOnVisitorSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.status=g.r.READY;const t=new I(e.list,this.globalStoreViewModel);this.visitorData=t}}else this.status=g.r.ERROR,this.data=[]})),(0,u.o)(this,"callbackOnCountriesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){const t=new n.N(e.list,this.globalStoreViewModel);this.countriesData=t.toCountries(),this.status=g.r.READY}}else this.status=g.r.ERROR,this.data=[]})),(0,u.o)(this,"callbackOnBrowsersSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){const t=new I(e.list,this.globalStoreViewModel);this.browsersData={list:t.toBrowsersTableTop(),pagination:e.pagination},this.statusTopBrowser=g.r.READY}}else this.statusTopBrowser=g.r.ERROR,this.data=[]})),(0,u.o)(this,"callbackOnDevicesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.devicesData=e?.list;const t=new I(e.list,this.globalStoreViewModel);this.devicesTableData={list:t.toDevicesTableTop(),pagination:e.pagination},this.statusTopBrowser=g.r.READY}}else this.statusTopBrowser=g.r.ERROR,this.data=[]})),(0,u.o)(this,"callbackOnPagesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.status=g.r.READY,this.statusTopPageTable=g.r.READY;const t=new c.n(e.list,this.globalStoreViewModel);this.pagesTableData={list:t?.toPagesTableTopDashboard(),pagination:e.pagination}}}else this.status=g.r.ERROR,this.statusTopPageTable=g.r.ERROR,this.data=[]})),(0,u.o)(this,"callbackOnSourcesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.status=g.r.READY,this.statusTopSourceTable=g.r.READY;const t=new I(e.list,this.globalStoreViewModel);this.sourcesTableData={list:t.toSourcesTableTopPageDetail(),pagination:e.pagination}}}else this.status=g.r.ERROR,this.statusTopSourceTable=g.r.ERROR,this.data=[]})),(0,_.ky)(this),this.pageDetailStore=e,this.globalStoreViewModel=t}},P=class{constructor(e,t){(0,u.o)(this,"pageDetailListViewModel",null),(0,u.o)(this,"getPageDetailListViewModel",(()=>this.pageDetailListViewModel)),e&&(this.pageDetailListViewModel=new T(e,t))}},U=w.createContext(),k=({children:e,viewModel:t})=>w.createElement(U.Provider,{value:t},e),C=e=>t=>w.createElement(e,{...t,viewModel:w.useContext(U)}),A=(0,v.Pi)(class extends w.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{t:e,status:t,bars:s,barColors:a,data:i,filterData:l}=this.props;return w.createElement("div",{className:"position-relative h-100"},w.createElement(d.l,{height:500,data:i,colors:["#1AB394"],layout:"horizontal",barColors:a,bars:s,hiddenGrid:{vertical:!1},XAxisOptions:{axisLine:!0,padding:{left:50,right:50}},defaultValue:{label:"Visitors",value:"visitors"},options:[{label:"Visitors",value:"visitors"}],loading:t,tooltipComponent:{header:e("txt_in_total"),value:1===s?.length&&s[0]+":"},status:t,filterData:l,isSelection:!1,isLegend:!0,filterButtons:["days","months","weeks"]}))}}),z=(0,E.Zh)()((0,b.EN)(A)),H=(0,v.Pi)((a=class extends w.Component{constructor(e){super(e);const{viewModel:t}=e;this.viewModel=t||null,this.state={loading:!1},this.pageDetailListViewModel=this.viewModel?this.viewModel.getPageDetailListViewModel():null}render(){const{t:e}=this.props,{status:t}=this.pageDetailListViewModel;return w.createElement("div",{className:"position-relative ChartWrapper h-100"},t===g.r.LOADING?w.createElement(S.QI,{className:"d-flex justify-content-center align-items-center bg-white"}):w.createElement(w.Fragment,null,this.pageDetailListViewModel?.countriesData?.length?w.createElement(w.Fragment,null,w.createElement(V.Z.Container,{id:"countries-tab",defaultActiveKey:"map"},w.createElement("div",{className:"d-flex justify-content-between align-items-center mb-24"},w.createElement("h4",{className:"me-24 mb-0 fw-semibold fs-5"},e("txt_Country"))),w.createElement(N.Z,null,w.createElement(F.Z,{lg:"7"},w.createElement(r.C,{data:this.pageDetailListViewModel?.countriesData,continent:"world"})),w.createElement(F.Z,{lg:"5"},w.createElement("div",{className:"d-flex align-items-center justify-content-between text-gray-900 fw-medium pb-1 mb-15 border-bottom"},w.createElement("div",null,e("txt_Country")),w.createElement("div",null,e("txt_views"))),this.pageDetailListViewModel?.countriesData?.map(((e,t)=>w.createElement("div",{key:t,className:"d-flex align-items-center justify-content-between mb-15 fs-14 text-gray-900"},w.createElement("div",{className:"d-flex align-items-center"},w.createElement("span",null,w.createElement("span",{className:`me-1 fi fi-${e[D.Fbz.COUNTRY_CODE]?.toLowerCase()}`}),e.country)),w.createElement("div",null,e.views)))))))):w.createElement(w.Fragment,null,w.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24"},w.createElement("h4",{className:"me-24 mb-0 fw-semibold"},e("txt_locations"))),w.createElement(m.x,{icons:D.OBj.PUBLIC_URL+"/assets/images/ic_project.svg",title:e("txt_no_data"),width:"w-50"}))))}},(0,u.o)(a,"contextType",p.Fv),a)),j=(0,E.Zh)()((0,b.EN)(C(H))),G=(0,v.Pi)((i=class extends w.Component{constructor(e){super(e),(0,u.o)(this,"handleSortDevices",(async e=>{this.pageDetailListViewModel.getDevices({"filter[domain]":this.context.biListViewModel.activeDomain},{},{"sort[]":e?.id,"sort_direction[]":"desc"===this.pageDetailListViewModel?.sortByDevices["sort_direction[]"]?"asc":"desc"})})),(0,u.o)(this,"handleSortBrowsers",(async e=>{this.pageDetailListViewModel.getBrowsers({"filter[domain]":this.context.biListViewModel.activeDomain},{},{"sort[]":e?.id,"sort_direction[]":"desc"===this.pageDetailListViewModel?.sortByBrowsers["sort_direction[]"]?"asc":"desc"})}));const{viewModel:t}=e;this.viewModel=t||null,this.state={loading:!1},this.pageDetailListViewModel=this.viewModel?this.viewModel.getPageDetailListViewModel():null}render(){const{t:e}=this.props,{status:t}=this.pageDetailListViewModel;return w.createElement("div",{className:"position-relative ChartWrapper h-100"},t===g.r.LOADING?w.createElement(S.QI,{className:"d-flex justify-content-center align-items-center bg-white"}):w.createElement(w.Fragment,null,this.pageDetailListViewModel?.browsersData?.list?.data?.length?w.createElement(w.Fragment,null,w.createElement(V.Z.Container,{id:"countries-tab",defaultActiveKey:"browser"},w.createElement("div",{className:"d-flex justify-content-between align-items-center mb-2"},w.createElement("h4",{className:"me-24 mb-0 fw-semibold fs-5"},`${e("txt_browser")} / ${e("txt_devices")}`),w.createElement(x.Z,{variant:"pills",className:"nav-custom"},w.createElement(x.Z.Item,null,w.createElement(x.Z.Link,{eventKey:"browser",className:"ps-0"},e("txt_browser"))),w.createElement(x.Z.Item,null,w.createElement(x.Z.Link,{eventKey:"types",className:"ps-0"},e("txt_devices"))))),w.createElement(V.Z.Content,{className:"h-100"},w.createElement(V.Z.Pane,{eventKey:"browser"},w.createElement("div",{className:"browser-table"},w.createElement(o.t,{data:this.pageDetailListViewModel?.browsersData?.list,pagination:this.pageDetailListViewModel?.browsersData?.pagination,isPagination:!0,simplePagination:!0,selectPage:async e=>{await this.pageDetailListViewModel.handleFilterBrowsers({page:e})},selectPageSize:async e=>{await this.pageDetailListViewModel.handleFilterBrowsers({page:1,page_size:e})},status:this.pageDetailListViewModel?.statusTopBrowser,sortAPI:!0,handleSort:this.handleSortBrowsers,sortBy:this.pageDetailListViewModel?.sortByBrowsers,...this.props}))),w.createElement(V.Z.Pane,{eventKey:"types"},w.createElement("div",{className:"browser-table"},w.createElement(o.t,{data:this.pageDetailListViewModel?.devicesTableData?.list,pagination:this.pageDetailListViewModel?.devicesTableData?.pagination,isPagination:!0,simplePagination:!0,selectPage:async e=>{await this.pageDetailListViewModel.handleFilterPages({page:e})},selectPageSize:async e=>{await this.pageDetailListViewModel.handleFilterPages({page:1,page_size:e})},status:this.pageDetailListViewModel?.statusTopBrowser,sortAPI:!0,handleSort:this.handleSortDevices,sortBy:this.pageDetailListViewModel?.sortByDevices,...this.props})))))):w.createElement(w.Fragment,null,w.createElement("div",{className:"d-flex align-items-center justify-content-between mb-2"},w.createElement("h4",{className:"me-24 mb-0 fw-semibold"},e("txt_devices"))),w.createElement(m.x,{icons:D.OBj.PUBLIC_URL+"/assets/images/ic_project.svg",title:e("txt_no_data"),width:"w-50"}))))}},(0,u.o)(i,"contextType",p.Fv),i)),Y=(0,E.Zh)()((0,b.EN)(C(G))),$=(0,v.Pi)((l=class extends w.Component{constructor(e){super(e),(0,u.o)(this,"componentDidUpdate",(e=>{this.props.location===e.location&&this.props.activeDomain===e.activeDomain||this.pageDetailListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[url]":this.params?.url})})),(0,u.o)(this,"componentDidMount",(()=>{this.pageDetailListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[url]":this.params?.url})})),(0,u.o)(this,"handleDateRangeChange",((e,t)=>{this.pageDetailListViewModel.handleFilterDateRange(e??t,t??e)})),(0,u.o)(this,"handleSortSources",(async e=>{this.pageDetailListViewModel.getReferer({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[url]":this.params?.url},{},{"sort[]":e?.id,"sort_direction[]":"desc"===this.pageDetailListViewModel?.sortBySources["sort_direction[]"]?"asc":"desc"})}));const{viewModel:t}=e;this.viewModel=t||null,this.pageDetailListViewModel=this.viewModel?this.viewModel.getPageDetailListViewModel():null,this.params=O.Z.parse(e.location.search)}render(){const{t:e}=this.props;let t=this.pageDetailListViewModel.devicesData?.length&&this.pageDetailListViewModel.devicesData.reduce((function(e,t){return+t[D.lF8.NUMBER_OF_VISITORS]>+e[D.lF8.NUMBER_OF_VISITORS]?t:e}));const s=this.pageDetailListViewModel.devicesData?.length&&t[D.lF8.NUMBER_OF_VISITORS]/this.pageDetailListViewModel.devicesData.reduce(((e,t)=>+e+ +t[D.lF8.NUMBER_OF_VISITORS]),0)*100;return w.createElement("div",{className:"py-4 px-4 h-100 d-flex flex-column"},w.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24 flex-wrap"},w.createElement("div",{className:"position-relative d-flex align-items-center mb-8px"},w.createElement("div",{className:"back_icon d-flex align-items-center justify-content-center cursor-pointer me-1",onClick:()=>{S.m8.push(`/behavior/?date_end=${this.context.biListViewModel.dateFilter?.date_end}&date_start=${this.context.biListViewModel.dateFilter?.date_start}&domain=${this.context.biListViewModel.activeDomain}&pagination=${this.context.biListViewModel.dataFilter?.pagination?this.context.biListViewModel.dataFilter?.pagination:"1"}`)}},w.createElement(L.G,{className:"text-success",icon:B.A35})),w.createElement("h2",{className:"fw-bold mb-0 fs-3"},this.params?.url?this.params?.url:"")),w.createElement("div",{className:"position-relative"},w.createElement(h.r,{onChange:this.handleDateRangeChange}))),w.createElement(N.Z,null,w.createElement(F.Z,{lg:"3"},w.createElement("div",{className:"bg-white shadow-sm rounded-3 h-100"},w.createElement("div",{className:"bg-white border-bottom"},w.createElement("div",{className:"bg-dark-blue text-white p-24 rounded-3 rounded-bottom-0 fw-medium"},w.createElement("h5",{className:"fs-6 mb-12px fw-medium"},e("txt_visitors")," ",w.createElement("span",{className:"text-success ms-1"},"•")),w.createElement("div",{className:"fs-24"},D.WtE.numberWithCommas(this.pageDetailListViewModel.summaryData?.[D.lF8.TOTAL_NUMBER_OF_VISITORS]))),w.createElement("div",{className:"bg-white p-24 pb-18px rounded-3 rounded-bottom-0 fw-medium"},w.createElement("h5",{className:"fs-6 mb-12px text-gray-900 fw-medium"},e("txt_unique_visitors")),w.createElement("div",{className:"fs-24"},D.WtE.numberWithCommas(this.pageDetailListViewModel.summaryData?.[D.lF8.NUMBER_OF_VISITORS]))),w.createElement("div",{className:"bg-white p-24 pt-0 rounded-3 rounded-bottom-0 fw-medium"},w.createElement("h5",{className:"fs-6 mb-12px text-gray-900 fw-medium"},e("txt_page_views")),w.createElement("div",{className:"fs-24"},D.WtE.numberWithCommas(this.pageDetailListViewModel.summaryData?.[D.lF8.NUMBER_OF_PAGE_VIEWS])))),w.createElement("div",{className:"bg-white p-24 rounded-3 rounded-top-0"},this.pageDetailListViewModel.devicesData?.map(((e,a)=>{let i=`${D.OBj.PUBLIC_URL}/assets/images/device_mobile.png`;switch(e[D.t9E?.DEVICE]){case"desktop":i=`${D.OBj.PUBLIC_URL}/assets/images/device_desktop.png`;break;case"iPad":case"tablet":i=`${D.OBj.PUBLIC_URL}/assets/images/device_tablet.png`}return w.createElement("div",{className:"d-flex align-items-center justify-content-between w-100 mb-12px",key:a},w.createElement("div",{className:"d-flex align-items-center"},w.createElement(S.Ee,{className:"me-12px",style:{width:44,height:44},src:i,alt:"icons"}),w.createElement("div",{className:"fw-medium text-capitalize"},e[D.t9E?.DEVICE])),w.createElement("div",{className:"d-flex align-items-center"},t[D.t9E?.DEVICE]===e[D.t9E?.DEVICE]&&w.createElement("div",{className:"fs-sm me-12px text-gray-900"},s?.toFixed(2),"%"),w.createElement("div",{className:"fw-medium fs-18px"},e[D.lF8?.NUMBER_OF_VISITORS])))}))))),w.createElement(F.Z,{lg:"9"},w.createElement(z,{bars:["visits","page_views"],barColors:["#0066FF","#96C0FF"],listViewModel:this.pageDetailListViewModel,status:this.pageDetailListViewModel?.status,data:this.pageDetailListViewModel?.visitorData?.toAreaChart(),filterData:this.pageDetailListViewModel?.visitorData?.getFilterName()}))),w.createElement(N.Z,{className:"my-24 pb-24"},w.createElement(F.Z,{lg:12,className:"mb-24"},w.createElement("div",{className:"bg-white rounded-3 p-24 shadow-sm h-100 position-relative"},w.createElement(j,{...this.props}))),w.createElement(F.Z,{lg:6,className:"mb-24"},w.createElement("div",{className:"bg-white rounded-3 p-24 shadow-sm h-100 position-relative"},w.createElement("h4",{className:"me-24 mb-24 fw-semibold fs-5"},e("txt_top_sources")),w.createElement(o.t,{data:this.pageDetailListViewModel?.sourcesTableData?.list,pagination:this.pageDetailListViewModel?.sourcesTableData?.pagination,isPagination:!0,simplePagination:!0,selectPage:async e=>{await this.pageDetailListViewModel.handleFilterSources({page:e})},selectPageSize:async e=>{await this.pageDetailListViewModel.handleFilterSources({page:1,page_size:e})},status:this.pageDetailListViewModel?.statusTopSourceTable,sortAPI:!0,handleSort:this.handleSortSources,sortBy:this.pageDetailListViewModel?.sortBySources,...this.props}))),w.createElement(F.Z,{lg:6,className:"mb-24"},w.createElement("div",{className:"bg-white rounded-3 p-24 shadow-sm h-100 position-relative"},w.createElement(Y,{...this.props})))))}},(0,u.o)(l,"contextType",p.Fv),l)),W=(0,E.Zh)()((0,b.EN)(C($))),Z=(0,v.Pi)(class extends w.Component{constructor(e){super(e),(0,u.o)(this,"pageDetailStore",null),(0,u.o)(this,"pageDetailViewModel",null);const{viewModel:t}=e;this.viewModel=t||null,this.biListViewModel=this.viewModel?this.viewModel.getBiListViewModel():null,this.pageDetailStore=new y,this.pageDetailViewModel=new P(this.pageDetailStore,this.biListViewModel)}render(){return w.createElement(k,{viewModel:this.pageDetailViewModel},w.createElement(W,{...this.props}))}}),Q=(0,E.Zh)()((0,b.EN)((0,p.NQ)(Z)))},54372:(e,t,s)=>{s.d(t,{n:()=>c});var a=s(23541),i=s(67294),l=s(73022),r=s(30381),o=s.n(r),n=s(73727),c=class{constructor(e,t){(0,a.o)(this,"data",[]),(0,a.o)(this,"globalViewModel",null),(0,a.o)(this,"toRaw",(()=>this.data)),(0,a.o)(this,"toPagesTableTopDashboard",(()=>{const e=["txt_page","txt_page_views","txt_time_on_page"],t=[l.RMP.URL,l.lF8.NUMBER_OF_PAGE_VIEWS,l.lF8.AVERAGE_SESSION_DURATION],s=Math.max(...this.data.map((e=>e[l.lF8.NUMBER_OF_PAGE_VIEWS])));if(this.data?.length){const a=t.map(((t,a)=>({Header:e[a],accessor:t,allowSort:!0,Cell:({cell:e,column:t,row:a})=>{const r=t.id===l.RMP.URL&&new URL(e?.value);return t.id===l.RMP.URL?i.createElement("a",{href:`${e?.value}`,target:"_blank",rel:"noreferrer",className:"d-block position-relative px-20 py-sm table-link text-gray-900"},i.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0 table-link-bg",style:{width:`${(a.cells[1]?.value/s*100)?.toString()}%`}}),i.createElement("div",{className:"position-relative z-1 text-ellipsis line-clamp-1 pe-20"},i.createElement("div",{className:"position-relative table-link-text"},""===r?"Unknown":r.pathname+r.search))):t.id===l.lF8.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"text-end"},e?.value?o().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),r=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),n=r?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:a,data:n}}return{header:[],data:[]}})),(0,a.o)(this,"toPagesTableTop",(e=>{const t=["txt_page","txt_visitors","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],s=[l.RMP.URL,l.lF8.NUMBER_OF_VISITORS,l.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS,l.lF8.BOUNCE_RATE,l.lF8.NUMBER_OF_PAGES_PER_SESSION,l.lF8.AVERAGE_SESSION_DURATION];if(this.data?.length){const a=s.map(((s,a)=>({Header:t[a],accessor:s,allowSort:!0,width:s===l.RMP.URL?300:s===l.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,tooltip:s===l.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?"txt_bounce_rate":"",Cell:({cell:t,column:s})=>{const a=s.id===l.RMP.URL&&new URL(t?.value);return s.id===l.RMP.URL?i.createElement(i.Fragment,null,e?i.createElement("a",{href:"#",onClick:e=>this.handleChangeLink(e,`behavior/detail?url=${t?.value}}`),className:"px-15 d-block text-secondary-50"},i.createElement("span",null,""===a?"Unknown":a.pathname+a.search)):i.createElement(n.OL,{to:`/behavior/detail?url=${t?.value}`,className:"px-15 d-block text-secondary-50"},""===a?"Unknown":a.pathname+a.search)):s.id===l.lF8.BOUNCE_RATE?i.createElement("div",{className:"px-3 text-end"},t?.value+"%"):s.id===l.lF8.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"px-15 text-end"},t?.value?o().utc(1e3*t?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},t?.value??null)}}))),r=this.data?.map((e=>({...e,...s.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),c=r?.map((e=>{for(let t in e)s.includes(t)||delete e[t];return e}));return{header:a,data:c}}return{header:[],data:[]}})),(0,a.o)(this,"transformResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const s=this.data.filter((e=>e[l.RMP.URL]===t[l.RMP.URL]));e={...e,[t[l.RMP.URL]]:s}})),e})),(0,a.o)(this,"toBarChart",(()=>{const e=this.transformResponse();return Object.keys(e).map((t=>{const s=t&&new URL(t);return{name:""===s?"Unknown":s.pathname+s.search,number:e[t]?.reduce(((e,t)=>e+t[l.lF8.NUMBER_OF_VISITORS]),0)}}))})),e&&(this.data=e??[],this.globalViewModel=t)}}},41330:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(94184),i=s.n(a),l=s(67294),r=s(45697),o=s.n(r),n=s(76792),c=s(48521);o().string,o().bool,o().bool,o().bool,o().bool;const d=l.forwardRef((({bsPrefix:e,className:t,fluid:s=!1,rounded:a=!1,roundedCircle:l=!1,thumbnail:r=!1,...o},d)=>(e=(0,n.vE)(e,"img"),(0,c.jsx)("img",{ref:d,...o,className:i()(t,s&&`${e}-fluid`,a&&"rounded",l&&"rounded-circle",r&&`${e}-thumbnail`)}))));d.displayName="Image";const m=d}}]);