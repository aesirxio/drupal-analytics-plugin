"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[1046],{1046:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var a=s(25854),i=s(17307),r=s(80928),l=s(54372),o=s(84941),n=s(65925),c=s(20513),h=s(70069),d=s(23541),g=s(67294),m=s(91072),u=s(38585),E=s(16550),_=s(68949),p=s(73022),w=s(26982),S=s(30381),v=s.n(S),R=s(12086),O=s(34155),F=class{constructor(){(0,d.o)(this,"getMetrics",(async(e,t,s,a)=>{try{const i=new p.Q22,r=await i.getMetrics(e,t);r&&"AxiosError"!==r?.name?(0,_.z)((()=>{s(r)})):(0,_.z)((()=>{a({message:r?.response?.data?.error||"Something went wrong from Server response"})}))}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.o)(this,"getVisitors",(async(e,t,s,a)=>{try{const i=new p.Q22,r=await i.getVisitors(e,t);r?(0,_.z)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.o)(this,"getVisits",(async(e,t,s,a)=>{try{const i=new p.Q22,r=await i.getVisits(e,t);r?(0,_.z)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.o)(this,"getCountries",(async(e,t,s,a)=>{try{const i=new p.Q22,r=await i.getCountries(e,t);r?(0,_.z)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.o)(this,"getCities",(async(e,t,s,a)=>{try{const i=new p.Q22,r=await i.getCities(e,t);r?(0,_.z)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.o)(this,"getBrowsers",(async(e,t,s,a)=>{try{const i=new p.Q22,r=await i.getBrowsers(e,t);r?(0,_.z)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.o)(this,"getDevices",(async(e,t,s,a)=>{try{const i=new p.Q22,r=await i.getDevices(e,t);r?(0,_.z)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.o)(this,"getLanguages",(async(e,t,s,a)=>{try{const i=new p.Q22,r=await i.getLanguages(e,t);r?(0,_.z)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.o)(this,"getPages",(async(e,t,s,a)=>{try{const i=new p.Q22,r=await i.getPages(e,t);r?(0,_.z)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.o)(this,"getPagesCount",(async(e,t,s,a)=>{try{const i=new p.Q22,r=await i.getPages(e,t);r?(0,_.z)((()=>{s(r)})):a({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,d.o)(this,"getFlowList",(async(e,t,s,a)=>{try{const i=new p.Q22,r=await i.getFlowList(e,t);r&&"AxiosError"!==r?.name?(0,_.z)((()=>{s(r)})):a({message:r?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}},b=class{constructor(e,t){(0,d.o)(this,"data",[]),(0,d.o)(this,"globalViewModel",null),(0,d.o)(this,"toRaw",(()=>this.data)),(0,d.o)(this,"toCitiesTableTop",(()=>{const e=["txt_City","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[p.wTR.CITY,p.lF8.NUMBER_OF_VISITORS,p.lF8.NUMBER_OF_PAGE_VIEWS,p.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS,p.lF8.BOUNCE_RATE,p.lF8.NUMBER_OF_PAGES_PER_SESSION,p.lF8.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,width:t===p.wTR.CITY?250:t===p.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,allowSort:!0,Cell:({cell:e,column:t})=>t.id===p.wTR.CITY?g.createElement("div",{className:"px-15"},""===e?.value?"Unknown":e?.value):t.id===p.lF8.BOUNCE_RATE?g.createElement("div",{className:"px-3 text-end"},e?.value+"%"):t.id===p.lF8.AVERAGE_SESSION_DURATION?g.createElement("div",{className:"px-3 text-end"},e?.value?v().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):g.createElement("div",{className:"px-15 text-end"},p.WtE.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),i=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:i}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},N=class{constructor(e,t){(0,d.o)(this,"data",[]),(0,d.o)(this,"globalViewModel",null),(0,d.o)(this,"toRaw",(()=>this.data)),(0,d.o)(this,"toBrowsersTableTop",(()=>{const e=["txt_browser","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[p.fpu.BROWSER_NAME,p.lF8.NUMBER_OF_VISITORS,p.lF8.NUMBER_OF_PAGE_VIEWS,p.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS,p.lF8.BOUNCE_RATE,p.lF8.NUMBER_OF_PAGES_PER_SESSION,p.lF8.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,width:t===p.fpu.BROWSER_NAME?250:t===p.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,Cell:({cell:e,column:t})=>t.id===p.fpu.BROWSER_NAME?g.createElement("div",{className:"px-15"},""===e?.value?"Unknown":e?.value):t.id===p.lF8.BOUNCE_RATE?g.createElement("div",{className:"px-3 text-end"},e?.value+"%"):t.id===p.lF8.AVERAGE_SESSION_DURATION?g.createElement("div",{className:"px-3 text-end"},e?.value?v().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):g.createElement("div",{className:"px-15 text-end"},p.WtE.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),i=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:i}}return{header:[],data:[]}})),(0,d.o)(this,"toDevicesTableTop",(()=>{const e=["txt_device","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[p.t9E.DEVICE,p.lF8.NUMBER_OF_VISITORS,p.lF8.NUMBER_OF_PAGE_VIEWS,p.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS,p.lF8.BOUNCE_RATE,p.lF8.NUMBER_OF_PAGES_PER_SESSION,p.lF8.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,width:t===p.t9E.DEVICE?250:t===p.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,allowSort:!0,Cell:({cell:e,column:t})=>t.id===p.t9E.DEVICE?g.createElement("div",{className:"px-15"},""===e?.value?"Unknown":e?.value):t.id===p.lF8.BOUNCE_RATE?g.createElement("div",{className:"px-3 text-end"},e?.value+"%"):t.id===p.lF8.AVERAGE_SESSION_DURATION?g.createElement("div",{className:"px-3 text-end"},e?.value?v().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):g.createElement("div",{className:"px-15 text-end"},p.WtE.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),i=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:i}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},T=class{constructor(e,t){(0,d.o)(this,"data",[]),(0,d.o)(this,"globalViewModel",null),(0,d.o)(this,"toRaw",(()=>this.data)),(0,d.o)(this,"toLanguagesTableTop",(()=>{const e=["txt_language","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[p.H1J.LANG,p.lF8.NUMBER_OF_VISITORS,p.lF8.NUMBER_OF_PAGE_VIEWS,p.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS,p.lF8.BOUNCE_RATE,p.lF8.NUMBER_OF_PAGES_PER_SESSION,p.lF8.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,width:t===p.H1J.LANG?250:t===p.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,Cell:({cell:e,column:t})=>t.id===p.H1J.LANG?g.createElement("div",{className:"px-15"},""===e?.value?"Unknown":e?.value):t.id===p.lF8.BOUNCE_RATE?g.createElement("div",{className:"px-3 text-end"},e?.value+"%"):t.id===p.lF8.AVERAGE_SESSION_DURATION?g.createElement("div",{className:"px-3 text-end"},e?.value?v().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):g.createElement("div",{className:"px-15 text-end"},p.WtE.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),i=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:i}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},A=class{constructor(e,t){(0,d.o)(this,"visitorsStore",null),(0,d.o)(this,"status",c.r.READY),(0,d.o)(this,"statusOverview",c.r.READY),(0,d.o)(this,"statusMetrics",c.r.READY),(0,d.o)(this,"statusTopTable",c.r.READY),(0,d.o)(this,"statusPagesCount",c.r.READY),(0,d.o)(this,"statusFlowList",c.r.READY),(0,d.o)(this,"globalStoreViewModel",null),(0,d.o)(this,"metricsData",null),(0,d.o)(this,"visitorData",null),(0,d.o)(this,"visitsData",null),(0,d.o)(this,"countriesTableData",null),(0,d.o)(this,"citiesTableData",null),(0,d.o)(this,"browsersTableData",null),(0,d.o)(this,"devicesTableData",null),(0,d.o)(this,"languagesTableData",null),(0,d.o)(this,"pagesTableData",null),(0,d.o)(this,"pagesCountData",null),(0,d.o)(this,"flowListTableData",null),(0,d.o)(this,"dataFilterFlowList",{}),(0,d.o)(this,"sortBy",{"sort[]":"","sort_direction[]":""}),(0,d.o)(this,"sortByCountries",{"sort[]":"","sort_direction[]":""}),(0,d.o)(this,"sortByCities",{"sort[]":"","sort_direction[]":""}),(0,d.o)(this,"sortByBrowsers",{"sort[]":"","sort_direction[]":""}),(0,d.o)(this,"sortByDevices",{"sort[]":"","sort_direction[]":""}),(0,d.o)(this,"sortByLanguages",{"sort[]":"","sort_direction[]":""}),(0,d.o)(this,"sortByFlowList",{"sort[]":"","sort_direction[]":""}),(0,d.o)(this,"initialize",((e,t)=>{this.getMetrics(e,t),this.getVisits(e,t),this.getCountries(e,t),this.getCities(e,t),this.getBrowsers(e,t),this.getDevices(e,t),this.getLanguages(e,t),this.getFlowList(e,t)})),(0,d.o)(this,"initializeBehavior",(async(e,t,s)=>{this.getVisitors(e,t),this.getMetrics(e,t),await this.getPages(e,t,s),await this.getPagesCount(e,t,s)})),(0,d.o)(this,"getMetrics",((e,t)=>{this.statusMetrics=c.r.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.visitorsStore.getMetrics(this.dataFilter,s,this.callbackOnMetricsDataSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"getVisitors",((e,t)=>{this.statusOverview=c.r.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.visitorsStore.getVisitors({...this.dataFilter,page_size:"1000"},s,this.callbackOnVisitorSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"getVisits",((e,t)=>{this.statusOverview=c.r.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.visitorsStore.getVisits({...this.dataFilter,page_size:"1000"},s,this.callbackOnVisitsSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"getCountries",(async(e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopTable=c.r.LOADING,this.sortByCountries=s,this.dataFilterCountries={page_size:"5",...this.dataFilterCountries,...e,...this.sortByCountries};const a={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getCountries(this.dataFilterCountries,a,this.callbackOnCountriesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"getCities",(async(e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopTable=c.r.LOADING,this.sortByCities=s,this.dataFilterCities={page_size:"5",...this.dataFilterCities,...e,...this.sortByCities};const a={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getCities(this.dataFilterCities,a,this.callbackOnCitiesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"getBrowsers",(async(e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopTable=c.r.LOADING,this.sortByBrowsers=s,this.dataFilterBrowsers={page_size:"5",...this.dataFilterBrowsers,...e,...this.sortByBrowsers};const a={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getBrowsers(this.dataFilterBrowsers,a,this.callbackOnBrowsersSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"getDevices",(async(e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopTable=c.r.LOADING,this.sortByDevices=s,this.dataFilterDevices={page_size:"5",...this.dataFilterDevices,...e,...this.sortByDevices};const a={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getDevices(this.dataFilterDevices,a,this.callbackOnDevicesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"getLanguages",(async(e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopTable=c.r.LOADING,this.sortByLanguages=s,this.dataFilterLanguages={page_size:"5",...this.dataFilterLanguages,...e,...this.sortByLanguages};const a={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getLanguages(this.dataFilterLanguages,a,this.callbackOnLanguagesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"getPages",(async(e,t,s={},a={})=>{this.statusTopTable=c.r.LOADING,this.sortBy=s,this.search=a,this.dataFilterPages={page_size:"5",...this.dataFilterPages,...e,...this.sortBy,...this.search};const i={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getPages(this.dataFilterPages,i,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"getPagesCount",(async(e,t,s={},a={})=>{this.statusPagesCount=c.r.LOADING,this.sortBy=s,this.search=a,this.dataFilterPages={page_size:"3",...this.dataFilterPages,...e,...this.sortBy,...this.search};const i={...this.globalStoreViewModel.dateFilter,...t};await this.visitorsStore.getPagesCount(this.dataFilterPages,i,this.callbackOnPagesCountSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"getFlowList",((e,t,s={"sort[]":"start","sort_direction[]":"desc"})=>{this.statusFlowList=c.r.LOADING,this.sortByFlowList=s,this.dataFilter={page_size:"10",...this.dataFilter,...e,...this.sortByFlowList};const a={...this.globalStoreViewModel.dateFilter,...t};this.visitorsStore.getFlowList(this.dataFilter,a,this.callbackOnFlowListSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"handleFilter",(e=>{this.status=c.r.LOADING,this.dataFilter={...this.dataFilter,...e};const t={...this.globalStoreViewModel.dateFilter};this.visitorsStore.getMetrics(this.dataFilter,t,this.callbackOnDataSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"handleFilterCountries",(async e=>{this.statusTopTable=c.r.LOADING,this.dataFilterCountries={...this.dataFilterCountries,...e};const t={...this.globalStoreViewModel.dateFilter};await this.visitorsStore.getCountries(this.dataFilterCountries,t,this.callbackOnCountriesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"handleFilterCities",(async e=>{this.statusTopTable=c.r.LOADING,this.dataFilterCities={...this.dataFilterCities,...e};const t={...this.globalStoreViewModel.dateFilter};await this.visitorsStore.getCities(this.dataFilterCities,t,this.callbackOnCitiesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"handleFilterBrowsers",(async e=>{this.statusTopTable=c.r.LOADING,this.dataFilterBrowsers={...this.dataFilterBrowsers,...e};const t={...this.globalStoreViewModel.dateFilter};await this.visitorsStore.getBrowsers(this.dataFilterBrowsers,t,this.callbackOnBrowsersSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"handleFilterDevices",(async e=>{this.statusTopTable=c.r.LOADING,this.dataFilterDevices={...this.dataFilterDevices,...e};const t={...this.globalStoreViewModel.dateFilter};await this.visitorsStore.getDevices(this.dataFilterDevices,t,this.callbackOnDevicesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"handleFilterLanguages",(async e=>{this.statusTopTable=c.r.LOADING,this.dataFilterLanguages={...this.dataFilterLanguages,...e};const t={...this.globalStoreViewModel.dateFilter};await this.visitorsStore.getLanguages(this.dataFilterLanguages,t,this.callbackOnLanguagesSuccessHandler,this.callbackOnErrorHandler)})),(0,d.o)(this,"handleFilterPages",(async e=>{this.statusTopTable=c.r.LOADING,this.dataFilterPages={...this.dataFilterPages,...e};const t={...this.globalStoreViewModel.dateFilter};if(await this.visitorsStore.getPages(this.dataFilterPages,t,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler),this.globalStoreViewModel.dataFilter={pagination:this.dataFilterPages?.page},e?.page){const t={...R.Z.parse(location.search),pagination:e?.page};window.history.replaceState("","",`/behavior?${R.Z.stringify(t)}`)}})),(0,d.o)(this,"handleFilterDateRange",((e,t)=>{this.status=c.r.LOADING;let s={date_start:v()(e).format("YYYY-MM-DD"),date_end:v()(t).endOf("day").format("YYYY-MM-DD")};this.initialize(this.dataFilter,s)})),(0,d.o)(this,"handleFilterFlowList",(async e=>{const t=history.location;this.status=c.r.LOADING,this.dataFilterFlowList={...this.dataFilter,...e},this.globalStoreViewModel.dataFilter={pagination:this.dataFilterFlowList?.page};const s={...this.globalStoreViewModel.dateFilter};if(await this.visitorsStore.getFlowList(this.dataFilterFlowList,s,this.callbackOnFlowListSuccessHandler,this.callbackOnErrorHandler),e?.page){const s={...R.Z.parse(t.search),pagination:e?.page};window.history.replaceState("","",`/visitors/flow?${R.Z.stringify(s)}`)}})),(0,d.o)(this,"callbackOnFlowListSuccessHandler",(e=>{if(e){if("canceled"!==e?.message&&"isCancle"!==e?.message){this.status=c.r.READY,this.statusFlowList=c.r.READY;const t=new a.L(e.list,this.globalStoreViewModel);this.flowListTableData={list:t,pagination:e.pagination}}}else this.status=c.r.ERROR,this.statusFlowList=c.r.ERROR,this.data=[]})),(0,d.o)(this,"callbackOnErrorHandler",(e=>{this.status=c.r.READY,(0,w.j5)(e.message,"error")})),(0,d.o)(this,"callbackOnMetricsDataSuccessHandler",(e=>{e?"canceled"!==e?.message&&(this.statusMetrics=c.r.READY,this.metricsData=e):(this.status=c.r.ERROR,this.statusMetrics=c.r.ERROR,this.data=[])})),(0,d.o)(this,"callbackOnVisitsSuccessHandler",(e=>{if(e?.length){if("canceled"!==e?.message){this.statusOverview=c.r.READY;const t=new o.I(e,this.globalStoreViewModel);this.visitsData=t}}else this.status=c.r.ERROR,this.statusOverview=c.r.ERROR,this.data=[]})),(0,d.o)(this,"callbackOnVisitorSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusOverview=c.r.READY;const t=new o.I(e?.list,this.globalStoreViewModel);this.visitorData=t}}else this.status=c.r.ERROR,this.statusOverview=c.r.ERROR,this.data=[]})),(0,d.o)(this,"callbackOnCountriesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=c.r.READY;const t=new r.N(e.list,this.globalStoreViewModel);this.countriesTableData={list:t.toCountriesTableTop(),pagination:e.pagination}}}else this.status=c.r.ERROR,this.statusTopTable=c.r.ERROR,this.data=[]})),(0,d.o)(this,"callbackOnCitiesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=c.r.READY;const t=new b(e.list,this.globalStoreViewModel);this.citiesTableData={list:t.toCitiesTableTop(),pagination:e.pagination}}}else this.status=c.r.ERROR,this.statusTopTable=c.r.ERROR,this.data=[]})),(0,d.o)(this,"callbackOnBrowsersSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=c.r.READY;const t=new N(e.list,this.globalStoreViewModel);this.browsersTableData={list:t.toBrowsersTableTop(),pagination:e.pagination}}}else this.status=c.r.ERROR,this.statusTopTable=c.r.ERROR,this.data=[]})),(0,d.o)(this,"callbackOnDevicesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=c.r.READY;const t=new N(e.list,this.globalStoreViewModel);this.devicesTableData={list:t.toDevicesTableTop(),pagination:e.pagination}}}else this.status=c.r.ERROR,this.statusTopTable=c.r.ERROR,this.data=[]})),(0,d.o)(this,"callbackOnLanguagesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=c.r.READY;const t=new T(e.list,this.globalStoreViewModel);this.languagesTableData={list:t.toLanguagesTableTop(),pagination:e.pagination}}}else this.status=c.r.ERROR,this.statusTopTable=c.r.ERROR,this.data=[]})),(0,d.o)(this,"callbackOnPagesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=c.r.READY;const t=new l.n(e.list,this.globalStoreViewModel);this.pagesTableData={list:t,pagination:e.pagination}}}else this.status=c.r.ERROR,this.statusTopTable=c.r.ERROR,this.data=[]})),(0,d.o)(this,"callbackOnPagesCountSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusPagesCount=c.r.READY;const t=new l.n(e.list,this.globalStoreViewModel);this.pagesCountData={list:t,pagination:e.pagination}}}else this.status=c.r.ERROR,this.statusPagesCount=c.r.ERROR,this.data=[]})),(0,_.ky)(this),this.visitorsStore=e,this.globalStoreViewModel=t}},M=class{constructor(e,t){(0,d.o)(this,"visitorsListViewModel",null),(0,d.o)(this,"getVisitorsListViewModel",(()=>this.visitorsListViewModel)),e&&(this.visitorsListViewModel=new A(e,t))}},V=(0,g.lazy)((()=>Promise.all([s.e(7398),s.e(1744),s.e(6656),s.e(8032),s.e(868),s.e(778)]).then(s.bind(s,20778)))),U=(0,g.lazy)((()=>Promise.all([s.e(7398),s.e(1744),s.e(6656),s.e(8032),s.e(1797)]).then(s.bind(s,31797)))),x=({link:e,...t})=>"behavior"===e?g.createElement(U,{...t}):g.createElement(V,{...t}),C=(0,u.Pi)(class extends g.Component{constructor(e){super(e),(0,d.o)(this,"VisitorsStore",null),(0,d.o)(this,"VisitorsViewModel",null);const{viewModel:t}=e;this.viewModel=t||null,this.biListViewModel=this.viewModel?this.viewModel.getBiListViewModel():null,this.VisitorsStore=new F,this.VisitorsViewModel=new M(this.VisitorsStore,this.biListViewModel)}render(){const{integration:e=!1}=this.props,{integrationLink:t,activeDomain:s}=this.biListViewModel,a=(0,E.LX)(w.m8.location.pathname,{path:O.env.REACT_APP_INTERGRATION?"/bi":"/visitors",exact:!0,strict:!1}),r=(0,E.LX)(w.m8.location.pathname,{path:O.env.REACT_APP_INTERGRATION?"/bi":"/behavior",exact:!0,strict:!1}),l=r?.isExact||"behavior"===t?this?.VisitorsViewModel?.visitorsListViewModel?.pagesTableData?.list?.data:null,o=a?.isExact||"visitors"===t?[{name:"Countries",data:this?.VisitorsViewModel?.visitorsListViewModel?.countriesTableData?.list?.data},{name:"Cities",data:this?.VisitorsViewModel?.visitorsListViewModel?.citiesTableData?.list?.data},{name:"Browsers",data:this?.VisitorsViewModel?.visitorsListViewModel?.browsersTableData?.list?.data},{name:"Devices",data:this?.VisitorsViewModel?.visitorsListViewModel?.devicesTableData?.list?.data},{name:"Languages",data:this?.VisitorsViewModel?.visitorsListViewModel?.languagesTableData?.list?.data}]:[];return g.createElement(i.v,{viewModel:this.VisitorsViewModel},g.createElement(n.V,{data:l,tableExport:o,i18n:this.props.i18n,t:this.props.t,componentRef:this.componentRef,sectionName:a?.isExact||"visitors"===t?"visitors":"behavior"}),g.createElement(I,{integration:e,integrationLink:t,activeDomain:s,ref:e=>this.componentRef=e}))}}),I=(0,u.Pi)(class extends g.Component{constructor(e){super(e)}render(){return g.createElement("div",{className:"aesirxui"},this.props.integration?g.createElement(x,{link:this.props.integrationLink,activeDomain:this.props.activeDomain,...this.props}):g.createElement(g.Fragment,null,g.createElement(E.AW,{exact:!0,path:["/visitors","/bi/visitors"]},g.createElement(V,{...this.props})),g.createElement(E.AW,{exact:!0,path:["/behavior","/bi/behavior"]},g.createElement(U,{...this.props}))))}}),L=(0,m.Zh)()((0,E.EN)((0,h.NQ)(C)))},17307:(e,t,s)=>{s.d(t,{A:()=>l,v:()=>r});var a=s(67294),i=a.createContext(),r=({children:e,viewModel:t})=>a.createElement(i.Provider,{value:t},e),l=e=>t=>a.createElement(e,{...t,viewModel:a.useContext(i)})},80928:(e,t,s)=>{s.d(t,{N:()=>n});var a=s(23541),i=s(67294),r=s(73022),l=s(30381),o=s.n(l),n=class{constructor(e,t){(0,a.o)(this,"data",[]),(0,a.o)(this,"globalViewModel",null),(0,a.o)(this,"toRaw",(()=>this.data)),(0,a.o)(this,"toCountries",(()=>this?.data?.length&&this.data.map((e=>({country:e[r.Fbz.COUNTRY_NAME],country_code:e[r.Fbz.COUNTRY_CODE],views:e[r.lF8.NUMBER_OF_VISITORS],flag:`/assets/images/flags/flag-${e[r.Fbz.COUNTRY_NAME]?.toLowerCase()}.png`})))?.filter((e=>e[r.Fbz.COUNTRY_CODE]))?.sort(((e,t)=>t.views-e.views)))),(0,a.o)(this,"toCountriesTable",(()=>{const e=["txt_Country","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[r.Fbz.COUNTRY_NAME,r.lF8.NUMBER_OF_VISITORS,r.lF8.NUMBER_OF_PAGE_VIEWS,r.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS,r.lF8.BOUNCE_RATE,r.lF8.NUMBER_OF_PAGES_PER_SESSION,r.lF8.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,width:t===r.Fbz.COUNTRY_NAME?270:t===r.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,allowSort:t!==r.Fbz.COUNTRY_NAME,Cell:({cell:e,column:t,row:s})=>t.id===r.Fbz.COUNTRY_NAME?i.createElement("div",{className:"px-3"},i.createElement("span",{className:`me-1 fi fi-${this.data.find((e=>e[r.Fbz.COUNTRY_NAME]===s?.values[r.Fbz.COUNTRY_NAME]))?.[r.Fbz.COUNTRY_CODE]?.toLowerCase()}`}),i.createElement("span",{className:"text-nowrap"},`${s.index+1}. ${""===e?.value?"Unknown":e?.value}`)):t.id===r.lF8.BOUNCE_RATE?i.createElement("div",{className:"px-3"},e?.value+"%"):t.id===r.lF8.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"px-3"},e?.value?o().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-3"},r.WtE.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:l}}return{header:[],data:[]}})),(0,a.o)(this,"toCountriesTableTop",(()=>{const e=["txt_Country","txt_views","txt_page_views","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],t=[r.Fbz.COUNTRY_NAME,r.lF8.NUMBER_OF_VISITORS,r.lF8.NUMBER_OF_PAGE_VIEWS,r.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS,r.lF8.BOUNCE_RATE,r.lF8.NUMBER_OF_PAGES_PER_SESSION,r.lF8.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],width:t===r.Fbz.COUNTRY_NAME?270:t===r.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,allowSort:t!==r.Fbz.COUNTRY_NAME,accessor:t,Cell:({cell:e,row:t,column:s})=>s.id===r.Fbz.COUNTRY_NAME?i.createElement("div",{className:"px-15"},i.createElement("span",{className:`me-1 fi fi-${this.data.find((e=>e[r.Fbz.COUNTRY_NAME]===t?.values[r.Fbz.COUNTRY_NAME]))?.[r.Fbz.COUNTRY_CODE]?.toLowerCase()}`}),i.createElement("span",{className:"text-nowrap"},""===e?.value?"Unknown":e?.value)):s.id===r.lF8.BOUNCE_RATE?i.createElement("div",{className:"px-3 text-end"},e?.value+"%"):s.id===r.lF8.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"px-3 text-end"},e?.value?o().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},r.WtE.numberWithCommas(e?.value)??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:l}}return{header:[],data:[]}})),(0,a.o)(this,"toRegionTableTopDashboard",(()=>{const e=["txt_region","txt_visitors"],t=[r.kuA.REGION,r.lF8.NUMBER_OF_VISITORS];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,Cell:({cell:e,column:t})=>t.id===r.kuA.REGION?i.createElement("div",{className:"px-15"},e?.value??null):i.createElement("div",{className:"px-15 text-end"},e?.value??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})})));return{header:s,data:a}}return{header:[],data:[]}})),(0,a.o)(this,"toCitiesTableTopDashboard",(()=>{const e=["txt_city","txt_visitors"],t=[r.wTR.CITY,r.lF8.NUMBER_OF_VISITORS];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,Cell:({cell:e,column:t})=>t.id===r.wTR.CITY?i.createElement("div",{className:"px-15"},e?.value??null):i.createElement("div",{className:"px-15 text-end"},e?.value??null)}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})})));return{header:s,data:a}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}}},25854:(e,t,s)=>{s.d(t,{L:()=>c});var a=s(23541),i=s(67294),r=s(73022),l=s(30381),o=s.n(l),n=s(73727),c=class{constructor(e,t){(0,a.o)(this,"data",[]),(0,a.o)(this,"globalViewModel",null),(0,a.o)(this,"toRaw",(()=>this.data)),(0,a.o)(this,"handleChangeLink",((e,t)=>{e.preventDefault(),t&&this.globalViewModel.setIntegrationLink(t)})),(0,a.o)(this,"toFlowListTable",(e=>{const t=["txt_time_utc","txt_locale","txt_sop_id","txt_event","txt_conversion","txt_url",""],s=[r.GLH.START,r.GLH.GEO,r.GLH.SOP_ID,r.GLH.EVENT,r.GLH.CONVERSION,r.GLH.URL,r.GLH.UUID];if(this.data?.length){const a=s.map(((s,a)=>({Header:t[a],accessor:s,width:s===r.GLH.START?100:s===r.GLH.SOP_ID?40:s===r.GLH.EVENT||s===r.GLH.CONVERSION||s===r.GLH.GEO?30:s===r.GLH.URL?230:s===r.GLH.UUID?80:170,allowSort:s!==r.GLH.EVENT&&s!==r.GLH.CONVERSION&&s!==r.GLH.URL&&s!==r.GLH.SOP_ID&&s!==r.GLH.GEO,Cell:({cell:t,column:s,row:a})=>{if(s.id===r.GLH.GEO)return i.createElement("div",{className:"px-3"},""===t?.value?i.createElement(i.Fragment,null):i.createElement("span",{className:`me-1 fi fi-${this.data.find((e=>e[r.GLH.GEO]?.country?.code===a?.values[r.GLH.GEO]?.country?.code))?.[r.GLH.GEO]?.country?.code?.toLowerCase()}`}),i.createElement("span",{className:"text-nowrap"},""===t?.value?"Unknown":""));if(s.id===r.GLH.UUID)return i.createElement(i.Fragment,null,e?i.createElement("a",{href:"#",onClick:e=>this.handleChangeLink(e,`flow&id=${t?.value}`),className:"btn btn-light px-3 py-1 fs-sm"},i.createElement("span",null," View Detail")):i.createElement(n.OL,{to:`/flow/${t?.value}`,className:"btn btn-light px-3 py-1 fs-sm"},"View Detail"));if(s.id===r.GLH.URL&&t?.value){const e=new URL(t?.value);let s=""===e?"Unknown":e.pathname+e.search;return i.createElement("a",{href:t?.value,target:"_blank",rel:"noreferrer",className:"px-3 d-inline-block text-secondary-50"},s?.length>53?s?.slice(0,53)+"...":s)}return s.id===r.GLH.START?i.createElement("div",{className:"px-3"},o()(t?.value)?.utc()?.format("DD-MM-YYYY HH:mm:ss")):i.createElement("div",{className:"px-3"},t?.value)}}))),l=this.data?.map((e=>({...e,...s.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),c=l?.map((e=>{for(let t in e)s.includes(t)||delete e[t];return e}));return{header:a,data:c}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}}},54372:(e,t,s)=>{s.d(t,{n:()=>c});var a=s(23541),i=s(67294),r=s(73022),l=s(30381),o=s.n(l),n=s(73727),c=class{constructor(e,t){(0,a.o)(this,"data",[]),(0,a.o)(this,"globalViewModel",null),(0,a.o)(this,"toRaw",(()=>this.data)),(0,a.o)(this,"toPagesTableTopDashboard",(()=>{const e=["txt_page","txt_page_views","txt_time_on_page"],t=[r.RMP.URL,r.lF8.NUMBER_OF_PAGE_VIEWS,r.lF8.AVERAGE_SESSION_DURATION],s=Math.max(...this.data.map((e=>e[r.lF8.NUMBER_OF_PAGE_VIEWS])));if(this.data?.length){const a=t.map(((t,a)=>({Header:e[a],accessor:t,allowSort:!0,Cell:({cell:e,column:t,row:a})=>{const l=t.id===r.RMP.URL&&new URL(e?.value);return t.id===r.RMP.URL?i.createElement("a",{href:`${e?.value}`,target:"_blank",rel:"noreferrer",className:"d-block position-relative px-20 py-sm table-link text-gray-900"},i.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0 table-link-bg",style:{width:`${(a.cells[1]?.value/s*100)?.toString()}%`}}),i.createElement("div",{className:"position-relative z-1 text-ellipsis line-clamp-1 pe-20"},i.createElement("div",{className:"position-relative table-link-text"},""===l?"Unknown":l.pathname+l.search))):t.id===r.lF8.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"text-end"},e?.value?o().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),l=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),n=l?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:a,data:n}}return{header:[],data:[]}})),(0,a.o)(this,"toPagesTableTop",(e=>{const t=["txt_page","txt_visitors","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],s=[r.RMP.URL,r.lF8.NUMBER_OF_VISITORS,r.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS,r.lF8.BOUNCE_RATE,r.lF8.NUMBER_OF_PAGES_PER_SESSION,r.lF8.AVERAGE_SESSION_DURATION];if(this.data?.length){const a=s.map(((s,a)=>({Header:t[a],accessor:s,allowSort:!0,width:s===r.RMP.URL?300:s===r.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,tooltip:s===r.lF8.NUMBER_OF_UNIQUE_PAGE_VIEWS?"txt_bounce_rate":"",Cell:({cell:t,column:s})=>{const a=s.id===r.RMP.URL&&new URL(t?.value);return s.id===r.RMP.URL?i.createElement(i.Fragment,null,e?i.createElement("a",{href:"#",onClick:e=>this.handleChangeLink(e,`behavior/detail?url=${t?.value}}`),className:"px-15 d-block text-secondary-50"},i.createElement("span",null,""===a?"Unknown":a.pathname+a.search)):i.createElement(n.OL,{to:`/behavior/detail?url=${t?.value}`,className:"px-15 d-block text-secondary-50"},""===a?"Unknown":a.pathname+a.search)):s.id===r.lF8.BOUNCE_RATE?i.createElement("div",{className:"px-3 text-end"},t?.value+"%"):s.id===r.lF8.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"px-15 text-end"},t?.value?o().utc(1e3*t?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},t?.value??null)}}))),l=this.data?.map((e=>({...e,...s.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),c=l?.map((e=>{for(let t in e)s.includes(t)||delete e[t];return e}));return{header:a,data:c}}return{header:[],data:[]}})),(0,a.o)(this,"transformResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const s=this.data.filter((e=>e[r.RMP.URL]===t[r.RMP.URL]));e={...e,[t[r.RMP.URL]]:s}})),e})),(0,a.o)(this,"toBarChart",(()=>{const e=this.transformResponse();return Object.keys(e).map((t=>{const s=t&&new URL(t);return{name:""===s?"Unknown":s.pathname+s.search,number:e[t]?.reduce(((e,t)=>e+t[r.lF8.NUMBER_OF_VISITORS]),0)}}))})),e&&(this.data=e??[],this.globalViewModel=t)}}}}]);