"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[157],{10157:(e,t,a)=>{a.r(t),a.d(t,{default:()=>G});var s,i,l=a(37932),o=a(96526),r=(a(67941),a(48298)),n=a(16640),c=a(51751),d=a(53800),h=a(81252),m=a(96540),u=a(32389),g=a(44015),p=a(56347),E=a(27813),_=a(99194),w=a(44011),v=a(95093),M=a.n(v),b=a(44354),S=a(44479),R=a(61105),O=a(418),f=a(20982),N=a(66188),x=a(67008),V=a(3569),D=(a(12627),class{constructor(){(0,h.M)(this,"getVisits",(async(e,t,a,s)=>{try{const i=new _.L20,l=await i.getVisits(e,t);l&&"AxiosError"!==l?.name?(0,E.h5)((()=>{a(l)})):s({message:l?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,E.h5)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,h.M)(this,"getPages",(async(e,t,a,s)=>{try{const i=new _.L20,l=await i.getPages(e,t);l?(0,E.h5)((()=>{a(l)})):s({message:"Something went wrong from Server response"})}catch(e){(0,E.h5)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}}),C=class{constructor(e,t){(0,h.M)(this,"data",[]),(0,h.M)(this,"globalViewModel",null),(0,h.M)(this,"toRaw",(()=>this.data)),(0,h.M)(this,"toAreaChart",(()=>{const e=(0,_.jgq)(this.globalViewModel?.dateFilter?.date_start,this.globalViewModel?.dateFilter?.date_end),t=e.map((e=>{const t=this.data?.length&&this.data?.find((t=>M()(t.date).format("YYYY-MM-DD")===e));return{name:e&&M()(e,"YYYY-MM-DD").format("DD"),visits:t?.[_.PF1.VISITS]??0,acquisition_views:t?.[_.PF1.TOTAL_PAGE_VIEWS]??0,unique_visits:t?.unique_visits??0}})),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(((e,t)=>{const a=this.data.filter((e=>M()(e?.date).month()===t));let s=0,i=0,l=0;return a&&(s=a.reduce(((e,t)=>e+t[_.PF1.VISITS]),0),i=a.reduce(((e,t)=>e+t[_.PF1.TOTAL_PAGE_VIEWS]),0),l=a.reduce(((e,t)=>e+t.unique_visits),0)),{name:e,visits:s,acquisition_views:i,unique_visits:l}})),s={};e.forEach((e=>{const t=M()(e).startOf("isoWeek"),a=M()(e).endOf("isoWeek"),i=`${t.format("DD MMM")} - ${a.format("DD MMM")}`;s[i]||(s[i]={visits:0,acquisition_views:0,unique_visits:0});const l=this.data.filter((e=>M()(e?.date).isBetween(t,a,null,"[]")));if(l){const e=l.reduce(((e,t)=>e+t[_.PF1.VISITS]),0),t=l.reduce(((e,t)=>e+t[_.PF1.TOTAL_PAGE_VIEWS]),0),a=l.reduce(((e,t)=>e+t.unique_visits),0);s[i].visits+=e,s[i].acquisition_views+=t,s[i].unique_visits+=a}}));return[{visitors:a},{visitors:t},{visitors:Object.keys(s).map((e=>({name:e,visits:s[e].visits,acquisition_views:s[e].acquisition_views,unique_visits:s[e].unique_visits})))}]})),(0,h.M)(this,"getFilterName",(()=>[{label:"Visitors",value:"visitors"}])),(0,h.M)(this,"toBrowsersTableTop",(()=>{const e=["txt_browser","txt_visitors","%"],t=Math.max(...this.data.map((e=>e[_.CEO.NUMBER_OF_VISITORS]))),a=[_.$yQ.BROWSER_NAME,_.CEO.NUMBER_OF_VISITORS,_.CEO.NUMBER_OF_VISITORS_PERCENT];if(this.data?.length){const s=a.map(((a,s)=>({Header:e[s],accessor:a,allowSort:!0,width:a===_.$yQ.BROWSER_NAME?250:a===_.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:100,Cell:({cell:e,column:a,row:s})=>{let i="";switch(e?.value){case"Chrome":i="/assets/images/chrome.svg";break;case"Safari":i="/assets/images/safari.svg";break;case"Firefox":i="/assets/images/firefox.svg";break;case"Microsoft Edge":i="/assets/images/microsoft_edge.svg";break;case"Opera":i="/assets/images/opera.svg";break;case"Samsung Internet for Android":i="/assets/images/samsung_browser.svg";break;case"Googlebot":i="/assets/images/google_bot.svg";break;case"Yandex Browser":i="/assets/images/yandex_browser.svg"}return m.createElement(m.Fragment,null,a.id===_.$yQ.BROWSER_NAME?m.createElement("div",{className:"d-flex align-items-center py-sm px-20 position-relative"},m.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0",style:{backgroundColor:"#E7EFFF",width:`${(s.cells[1]?.value/t*100)?.toString()}%`}}),m.createElement("div",{className:"z-1"},i?m.createElement(b.A,{className:"me-12px",style:{width:22,height:22},src:_._K2.PUBLIC_URL+i,alt:"icons"}):m.createElement("div",{style:{width:22,height:22},className:"d-inline-block me-12px"}),""===e?.value?"Unknown":e?.value)):a.id===_.CEO.NUMBER_OF_VISITORS_PERCENT?m.createElement("div",{className:"text-end"},_.HP2.numberWithCommas(e?.value)??null):m.createElement("div",{className:"text-end pe-2"},_.HP2.numberWithCommas(e?.value)??null))}}))),i=this.data?.map((e=>(e[_.CEO.NUMBER_OF_VISITORS_PERCENT]=e[_.CEO.NUMBER_OF_VISITORS_PERCENT]/10,{...e,...a.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=i?.map((e=>{for(let t in e)a.includes(t)||delete e[t];return e}));return{header:s,data:l}}return{header:[],data:[]}})),(0,h.M)(this,"toDevicesTableTop",(()=>{const e=["txt_device","txt_visitors"],t=[_.JLh.DEVICE,_.CEO.NUMBER_OF_VISITORS],a=Math.max(...this.data.map((e=>e[_.CEO.NUMBER_OF_VISITORS])));if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,width:t===_.JLh.DEVICE?250:t===_.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,Cell:({cell:e,column:t,row:s})=>m.createElement(m.Fragment,null,t.id===_.JLh.DEVICE?m.createElement("div",{className:"d-flex align-items-center py-sm px-20 position-relative "+("iPhone"===e?.value||"iPad"===e?.value?"":"text-capitalize")},m.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0",style:{backgroundColor:"#E7EFFF",width:`${(s.cells[1]?.value/a*100)?.toString()}%`}}),m.createElement("div",{className:"z-1"},""===e?.value?"Unknown":e?.value)):m.createElement("div",{className:" text-end"},_.HP2.numberWithCommas(e?.value)??null))}))),i=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=i?.map((e=>{for(let a in e)t.includes(a)||delete e[a];return e}));return{header:s,data:l}}return{header:[],data:[]}})),(0,h.M)(this,"toSourcesTableTopAcquisitionDetail",(()=>{const e=["txt_source","txt_visitors"],t=[_.BSO.REFERER,_.CEO.NUMBER_OF_VISITORS],a=Math.max(...this.data.map((e=>e[_.CEO.NUMBER_OF_VISITORS])));if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,Cell:({cell:e,column:t,row:s})=>{let i="";if(t.id===_.BSO.REFERER){if(e?.value){const t=new URL(e?.value);i="aesirx.io"===t?.hostname?`${_._K2.PUBLIC_URL}/assets/images/logo/welcome-logo.png`:""}switch(e?.value){case"":i=`${_._K2.PUBLIC_URL}/assets/images/direct.png`;break;case"https://www.google.com/":i=`${_._K2.PUBLIC_URL}/assets/images/google.png`;break;case"https://www.facebook.com/":i=`${_._K2.PUBLIC_URL}/assets/images/facebook.png`;break;case"https://www.linkedin.com/":i=`${_._K2.PUBLIC_URL}/assets/images/linkedin.png`;break;case"https://yandex.ru/":i=`${_._K2.PUBLIC_URL}/assets/images/yandex.png`;break;case"https://duckduckgo.com/":i=`${_._K2.PUBLIC_URL}/assets/images/duckduckgo.svg`;break;case"https://www.reddit.com/":i=`${_._K2.PUBLIC_URL}/assets/images/reddit.png`;break;case"https://twitter.com/":i=`${_._K2.PUBLIC_URL}/assets/images/twitter.png`;break;case"https://github.com/":i=`${_._K2.PUBLIC_URL}/assets/images/github.png`}}return t.id===_.BSO.REFERER?m.createElement("a",{...e?.value?{target:"_blank",rel:"noreferrer",href:`${e?.value}`}:{},className:"d-block position-relative px-20 py-sm text-gray-900 table-link"},m.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0 table-link-bg",style:{width:`${(s.cells[1]?.value/a*100)?.toString()}%`}}),m.createElement("div",{className:"position-relative z-1 text-ellipsis line-clamp-1 pe-20"},m.createElement("div",{className:"position-relative table-link-text"},i&&m.createElement(b.A,{className:"me-sm object-fit-contain",style:{width:22,height:22},src:_._K2.PUBLIC_URL+i,alt:"icons"}),e?.value?e?.value:"Direct / None"))):m.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),i=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})})));return{header:s,data:i}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},I=class{constructor(e,t){(0,h.M)(this,"acquisitionDetailStore",null),(0,h.M)(this,"status",c.s.READY),(0,h.M)(this,"statusTopTable",c.s.READY),(0,h.M)(this,"statusTopBrowser",c.s.READY),(0,h.M)(this,"statusTopSourceTable",c.s.READY),(0,h.M)(this,"globalStoreViewModel",null),(0,h.M)(this,"summaryData",null),(0,h.M)(this,"visitorData",null),(0,h.M)(this,"countriesData",null),(0,h.M)(this,"browsersData",null),(0,h.M)(this,"devicesData",null),(0,h.M)(this,"devicesTableData",null),(0,h.M)(this,"acquisitionsTableData",null),(0,h.M)(this,"sourcesTableData",null),(0,h.M)(this,"sortByPages",{"sort[]":"","sort_direction[]":""}),(0,h.M)(this,"initialize",((e,t,a)=>{this.getVisits(e,t),this.getPages(e,t,a,{},a)})),(0,h.M)(this,"getVisits",((e,t)=>{this.status=c.s.LOADING,this.dataFilter={...this.dataFilter,...e};const a={...this.globalStoreViewModel.dateFilter,...t};this.acquisitionDetailStore.getVisits({...this.dataFilter,page_size:"1000"},a,this.callbackOnVisitsSuccessHandler,this.callbackOnErrorHandler)})),(0,h.M)(this,"getPages",(async(e,t,a={},s={},i={})=>{this.statusTopTable=c.s.LOADING,this.sortBy=a,this.search=s,this.dataFilterPages={page_size:"5",...this.dataFilterPages,...e,...this.sortBy,...this.search,...i};const l={...this.globalStoreViewModel.dateFilter,...t};await this.acquisitionDetailStore.getPages(this.dataFilterPages,l,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,h.M)(this,"handleFilter",(e=>{this.status=c.s.LOADING,this.dataFilter={...this.dataFilter,...e};const t={...this.globalStoreViewModel.dateFilter};this.acquisitionDetailStore.getMetrics(this.dataFilter,t,this.callbackOnDataSuccessHandler,this.callbackOnErrorHandler)})),(0,h.M)(this,"handleFilterDateRange",((e,t)=>{this.status=c.s.LOADING;let a={date_start:M()(e).format("YYYY-MM-DD"),date_end:M()(t).endOf("day").format("YYYY-MM-DD")};this.initialize(this.dataFilter,a)})),(0,h.M)(this,"handleFilterPages",(async e=>{this.statusTopTable=c.s.LOADING,this.dataFilterPages={...this.dataFilterPages,...e};const t={...this.globalStoreViewModel.dateFilter};await this.acquisitionDetailStore.getPages(this.dataFilterPages,t,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,h.M)(this,"callbackOnErrorHandler",(e=>{this.status=c.s.READY,(0,w.me)(e.message,"error")})),(0,h.M)(this,"callbackOnVisitsSuccessHandler",(e=>{if(e){if("canceled"!==e?.message&&"isCancle"!==e?.message){this.status=c.s.READY;const t=new C(e,this.globalStoreViewModel);this.visitorData=t}}else this.status=c.s.ERROR,this.data=[]})),(0,h.M)(this,"callbackOnPagesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message||"isCancle"!==e?.message){this.status=c.s.READY,this.statusTopTable=c.s.READY;const t=new l.P(e.list,this.globalStoreViewModel);this.acquisitionsTableData={list:t,pagination:e.pagination}}}else this.status=c.s.ERROR,this.statusTopTable=c.s.ERROR,this.data=[]})),(0,E.l_)(this),this.acquisitionDetailStore=e,this.globalStoreViewModel=t}},P=class{constructor(e,t){(0,h.M)(this,"acquisitionDetailListViewModel",null),(0,h.M)(this,"getAcquisitionDetailListViewModel",(()=>this.acquisitionDetailListViewModel)),e&&(this.acquisitionDetailListViewModel=new I(e,t))}},U=m.createContext(),A=({children:e,viewModel:t})=>m.createElement(U.Provider,{value:t},e),L=(0,g.PA)(class extends m.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{t:e,status:t,bars:a,barColors:s,data:i,filterData:l}=this.props;return m.createElement("div",{className:"position-relative h-100"},m.createElement(o.n,{height:500,data:i,colors:["#1AB394"],layout:"horizontal",barColors:s,bars:a,hiddenGrid:{vertical:!1},XAxisOptions:{axisLine:!0,padding:{left:50,right:50}},defaultValue:{label:"Visitors",value:"visitors"},options:[{label:"Visitors",value:"visitors"}],loading:t,tooltipComponent:{header:e("txt_in_total"),value:1===a?.length&&a[0]+":"},status:t,filterData:l,isSelection:!1,isLegend:!0,filterButtons:["days","months","weeks"]}))}}),F=(0,u.CI)()((0,p.y)(L)),k=(0,u.CI)()((0,p.y)((e=>{const{data:t,isPagination:a=!0,simplePagination:s=!1,pagination:i,selectPage:l,selectPageSize:o,status:d,limit:h,isPaginationAPI:u=!!a,t:g,sortAPI:p,handleSort:E,sortBy:v}=e,M=m.useMemo((()=>t?.header?.map(((e,a)=>{let s="";switch(e?.accessor){case _.CEO.NUMBER_OF_VISITORS:s="txt_tooltip_visitors";break;case _.CEO.NUMBER_OF_PAGE_VIEWS:s="txt_tooltip_page_views";break;case _.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS:s="txt_tooltip_unique_page_views";break;case _.CEO.BOUNCE_RATE:s="txt_tooltip_bounce_rate";break;case _.CEO.NUMBER_OF_PAGES_PER_SESSION:s="txt_tooltip_page_session";break;case _.CEO.AVERAGE_SESSION_DURATION:s="txt_tooltip_avg_session_duration";break;default:s=""}return{...e,className:`px-15 py-16 fs-sm fw-semibold border-bottom border-gray-800 align-middle ${0!==a?"rounded-top-end-3 text-end":""} ${0===a?"rounded-top-start-3":""}`,width:e.width?e.width:0===a?"auto":170,allowSort:e?.allowSort||!1,Header:m.createElement("span",{className:"align-middle text-gray-900 fw-medium"},g(e.Header),s&&m.createElement(m.Fragment,null,m.createElement(f.g,{"data-tooltip-id":"tooltipTable","data-tooltip-content":g(s),className:"mx-sm fs-12 mb-1","data-tooltip-place":""+(a===t?.header?.length-1?"top-end":"top"),icon:V.mE}),m.createElement(x.m_,{id:"tooltipTable"})))}}))),[t?.header]),b=m.useMemo((()=>t?.data),[t?.data]);return m.createElement(m.Fragment,null,d===c.s.LOADING?m.createElement(w.bg,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):t?m.createElement(r.x,{classNameTable:"mb-0 table",columns:M,data:b,canSort:!0,pagination:a,paginationClass:"fs-14 border-top mt-2",isPaginationAPI:u,paginationResponse:i,selectPage:l,selectPageSize:o,simplePagination:s,limit:h,sortAPI:p,sortAPIHandle:E,sortBy:v}):m.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},m.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},m.createElement(n.Js,{icons:_._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:g("txt_no_data"),width:"w-50"}))))}))),T=(0,g.PA)(class extends m.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{statusTopTable:e}=this.listViewModel;return m.createElement("div",{className:"position-relative h-100"},m.createElement("div",{className:"bg-white rounded-3 shadow-sm h-100 position-relative ChartWrapper"},m.createElement(k,{data:this.listViewModel?.acquisitionsTableData?.list?.toPagesTableTop(this.props.integration),pagination:this.listViewModel?.acquisitionsTableData?.pagination,selectPage:async e=>{await this.listViewModel.handleFilterPages({page:e})},selectPageSize:async e=>{await this.listViewModel.handleFilterPages({page:1,page_size:e})},status:e,sortAPI:!0,handleSort:this.props.handleSort,sortBy:this.listViewModel?.sortBy,...this.props})))}}),q=(0,u.CI)()((0,p.y)(T)),y=(0,g.PA)((s=class extends m.Component{constructor(e){super(e),(0,h.M)(this,"componentDidUpdate",(e=>{this.props.location===e.location&&this.props.activeDomain===e.activeDomain||this.acquisitionDetailListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[acquisition]":!0,..."direct"===this.params?.url?{"filter[filter_not]":""}:{"filter[referrer]":""}})})),(0,h.M)(this,"componentDidMount",(()=>{this.acquisitionDetailListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[acquisition]":!0,..."direct"===this.params?.url?{"filter[filter_not]":""}:{"filter[referrer]":""}})})),(0,h.M)(this,"handleDateRangeChange",((e,t)=>{this.acquisitionDetailListViewModel.handleFilterDateRange(e??t,t??e)})),(0,h.M)(this,"handleSort",(async e=>{this.acquisitionDetailListViewModel.getPages({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[acquisition]":!0,..."direct"===this.params?.url?{"filter[filter_not]":""}:{"filter[referrer]":""}},{},{"sort[]":e?.id,"sort_direction[]":"desc"===this.acquisitionDetailListViewModel?.sortBy["sort_direction[]"]?"asc":"desc"})})),(0,h.M)(this,"handleSearch",(async e=>{this.acquisitionDetailListViewModel.getPages({"filter[domain]":this.context.biListViewModel.activeDomain,"filter[acquisition]":!0,..."direct"===this.params?.url?{"filter[filter_not]":""}:{"filter[referrer]":""}},{},{},{"filter[url]":e})}));const{viewModel:t}=e;this.viewModel=t||null,this.acquisitionDetailListViewModel=this.viewModel?this.viewModel.getAcquisitionDetailListViewModel():null,this.params=O.A.parse(e.location.search)}render(){const{t:e}=this.props;return m.createElement("div",{className:"py-4 px-4 h-100 d-flex flex-column"},m.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24 flex-wrap"},m.createElement("div",{className:"position-relative d-flex align-items-center mb-8px"},m.createElement("div",{className:"back_icon d-flex align-items-center justify-content-center cursor-pointer me-1",onClick:()=>{w.b6.push(`/acquisition/?date_end=${this.context.biListViewModel.dateFilter?.date_end}&date_start=${this.context.biListViewModel.dateFilter?.date_start}&domain=${this.context.biListViewModel.activeDomain}`)}},m.createElement(f.g,{className:"text-success",icon:N.Wzs})),m.createElement("h2",{className:"fw-bold mb-0 fs-3"},e("txt_acquisition_overview"),"/"," ",m.createElement("span",{className:"text-capitalize"},this.params?.url?this.params?.url:"")," ",e("txt_traffic"))),m.createElement("div",{className:"position-relative"},m.createElement(n.Kp,{onChange:this.handleDateRangeChange}))),m.createElement(S.A,null,m.createElement(R.A,{lg:"12"},m.createElement(F,{bars:["visits"],barColors:["#0066FF","#96C0FF"],listViewModel:this.acquisitionDetailListViewModel,status:this.acquisitionDetailListViewModel?.status,data:this.acquisitionDetailListViewModel?.visitorData?.toAreaChart(),filterData:this.acquisitionDetailListViewModel?.visitorData?.getFilterName()}))),m.createElement(S.A,{className:"my-24 pb-24"},m.createElement(R.A,{lg:12,className:"mb-24"},m.createElement(q,{listViewModel:this.acquisitionDetailListViewModel,handleSort:this.handleSort,handleSearch:this.handleSearch,...this.props}))))}},(0,h.M)(s,"contextType",d.Dx),s)),B=(0,u.CI)()((0,p.y)((i=y,e=>m.createElement(i,{...e,viewModel:m.useContext(U)})))),$=(0,g.PA)(class extends m.Component{constructor(e){super(e),(0,h.M)(this,"acquisitionDetailStore",null),(0,h.M)(this,"acquisitionDetailViewModel",null);const{viewModel:t}=e;this.viewModel=t||null,this.biListViewModel=this.viewModel?this.viewModel.getBiListViewModel():null,this.acquisitionDetailStore=new D,this.acquisitionDetailViewModel=new P(this.acquisitionDetailStore,this.biListViewModel)}render(){return m.createElement(A,{viewModel:this.acquisitionDetailViewModel},m.createElement(B,{...this.props}))}}),G=(0,u.CI)()((0,p.y)((0,d.cm)($)))},37932:(e,t,a)=>{a.d(t,{P:()=>c});var s=a(81252),i=a(96540),l=a(99194),o=a(95093),r=a.n(o),n=a(54625),c=class{constructor(e,t){(0,s.M)(this,"data",[]),(0,s.M)(this,"globalViewModel",null),(0,s.M)(this,"toRaw",(()=>this.data)),(0,s.M)(this,"toPagesTableTopDashboard",(()=>{const e=["txt_page","txt_page_views","txt_time_on_page"],t=[l.q_A.URL,l.CEO.NUMBER_OF_PAGE_VIEWS,l.CEO.AVERAGE_SESSION_DURATION],a=Math.max(...this.data.map((e=>e[l.CEO.NUMBER_OF_PAGE_VIEWS])));if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,Cell:({cell:e,column:t,row:s})=>{const o=t.id===l.q_A.URL&&new URL(e?.value);return t.id===l.q_A.URL?i.createElement("a",{href:`${e?.value}`,target:"_blank",rel:"noreferrer",className:"d-block position-relative px-20 py-sm table-link text-gray-900"},i.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0 table-link-bg",style:{width:`${(s.cells[1]?.value/a*100)?.toString()}%`}}),i.createElement("div",{className:"position-relative z-1 text-ellipsis line-clamp-1 pe-20"},i.createElement("div",{className:"position-relative table-link-text"},""===o?"Unknown":o.pathname+o.search))):t.id===l.CEO.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"text-end"},e?.value?r().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),o=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),n=o?.map((e=>{for(let a in e)t.includes(a)||delete e[a];return e}));return{header:s,data:n}}return{header:[],data:[]}})),(0,s.M)(this,"toPagesTableTop",(e=>{const t=["txt_page","txt_visitors","txt_unique_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],a=[l.q_A.URL,l.CEO.NUMBER_OF_VISITORS,l.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS,l.CEO.BOUNCE_RATE,l.CEO.NUMBER_OF_PAGES_PER_SESSION,l.CEO.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=a.map(((a,s)=>({Header:t[s],accessor:a,allowSort:!0,width:a===l.q_A.URL?300:a===l.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,tooltip:a===l.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS?"txt_bounce_rate":"",Cell:({cell:t,column:a})=>{const s=a.id===l.q_A.URL&&new URL(t?.value);return a.id===l.q_A.URL?i.createElement(i.Fragment,null,e?i.createElement("a",{href:"#",onClick:e=>this.handleChangeLink(e,`behavior/detail?url=${t?.value}}`),className:"px-15 d-block text-secondary-50"},i.createElement("span",null,""===s?"Unknown":s.pathname+s.search)):i.createElement(n.k2,{to:`/behavior/detail?url=${t?.value}`,className:"px-15 d-block text-secondary-50"},""===s?"Unknown":s.pathname+s.search)):a.id===l.CEO.BOUNCE_RATE?i.createElement("div",{className:"px-3 text-end"},t?.value+"%"):a.id===l.CEO.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"px-15 text-end"},t?.value?r().utc(1e3*t?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},t?.value??null)}}))),o=this.data?.map((e=>({...e,...a.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),c=o?.map((e=>{for(let t in e)a.includes(t)||delete e[t];return e}));return{header:s,data:c}}return{header:[],data:[]}})),(0,s.M)(this,"transformResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const a=this.data.filter((e=>e[l.q_A.URL]===t[l.q_A.URL]));e={...e,[t[l.q_A.URL]]:a}})),e})),(0,s.M)(this,"toBarChart",(()=>{const e=this.transformResponse();return Object.keys(e).map((t=>{const a=t&&new URL(t);return{name:""===a?"Unknown":a.pathname+a.search,number:e[t]?.reduce(((e,t)=>e+t[l.CEO.NUMBER_OF_VISITORS]),0)}}))})),e&&(this.data=e??[],this.globalViewModel=t)}}},44354:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(46942),i=a.n(s),l=a(96540),o=a(5556),r=a.n(o),n=a(36519),c=a(74848);r().string,r().bool,r().bool,r().bool,r().bool;const d=l.forwardRef((({bsPrefix:e,className:t,fluid:a=!1,rounded:s=!1,roundedCircle:l=!1,thumbnail:o=!1,...r},d)=>(e=(0,n.oU)(e,"img"),(0,c.jsx)("img",{ref:d,...r,className:i()(t,a&&`${e}-fluid`,s&&"rounded",l&&"rounded-circle",o&&`${e}-thumbnail`)}))));d.displayName="Image";const h=d}}]);