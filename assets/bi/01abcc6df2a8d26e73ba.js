"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[202],{99202:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var s,n,i=a(96349),o=a(73524),r=a(80677),l=a(83874),c=a(20513),d=a(70069),m=a(23541),p=a(67294),h=a(91072),u=a(38585),g=a(16550),b=a(34051),w=a(31555),E=a(38994),x=a(40872),y=a(42444),N=a(70982),v=a(56646),_=(a(7034),a(68949)),f=a(30381),C=a.n(f),S=a(47116),M=a.n(S),k=p.createContext(),L=({children:e,viewModel:t})=>p.createElement(k.Provider,{value:t},e),D=(0,h.Zh)()((e=>{const{data:t,t:a}=e,s=p.useMemo((()=>t?.header.map(((e,s)=>{let n="";switch(e?.accessor){case x.lF.NUMBER_OF_VISITORS:n="txt_tooltip_visitors";break;case x.lF.NUMBER_OF_PAGE_VIEWS:n="txt_tooltip_page_views";break;case x.lF.NUMBER_OF_UNIQUE_PAGE_VIEWS:n="txt_tooltip_unique_page_views";break;case x.lF.BOUNCE_RATE:n="txt_tooltip_bounce_rate";break;case x.lF.NUMBER_OF_PAGES_PER_SESSION:n="txt_tooltip_page_session";break;case x.lF.AVERAGE_SESSION_DURATION:n="txt_tooltip_avg_session_duration";break;default:n=""}return{...e,className:`px-3 py-16 fs-sm fw-semibold bg-gray-700 ${s+1===t?.header.length?"rounded-top-end-3":""} ${0===s?"rounded-top-start-3":""}`,width:e.width?e.width:0===s?"auto":170,Header:p.createElement("span",{className:"align-middle"},a(e.Header),n&&p.createElement(p.Fragment,null,p.createElement(N.G,{"data-tooltip-id":"tooltipTable","data-tooltip-content":a(n),className:"mx-sm fs-12 mb-1",icon:v.DB}),p.createElement(y.u,{id:"tooltipTable"})))}}))),[t?.header]),n=p.useMemo((()=>t?.data),[t?.data]);return p.createElement("div",{className:"h-100 position-relative"},p.createElement(l.k,{classNameTable:"mb-0",columns:s,data:n,canSort:!0,pagination:!0}))})),P=(0,u.Pi)((s=class extends p.Component{constructor(e){super(e),(0,m.o)(this,"componentDidUpdate",(e=>{this.props.location===e.location||this.props.integration||this.countryListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain}),this.props.activeDomain!==e.activeDomain&&this.props.integration&&this.countryListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain})})),(0,m.o)(this,"componentDidMount",(()=>{this.countryListViewModel.initialize({"filter[domain]":this.context.biListViewModel.activeDomain})})),(0,m.o)(this,"handleDateRangeChange",((e,t)=>{this.countryListViewModel.handleFilterDateRange(e??t,t??e)}));const{viewModel:t}=e;this.viewModel=t||null,this.countryListViewModel=this.viewModel?this.viewModel.getCountryListViewModel():null}render(){const{t:e}=this.props,{status:t}=this.countryListViewModel;return p.createElement(p.Fragment,null,p.createElement("div",{className:"py-4 px-3 d-flex flex-column"},p.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24 flex-wrap"},p.createElement("div",{className:"position-relative"},p.createElement("h2",{className:"text-blue-0 fw-bold mb-8px"},e("txt_menu_region")),p.createElement("p",{className:"mb-0 text-color"},e("txt_analytic_details"))),p.createElement("div",{className:"position-relative"},p.createElement(r.r,{onChange:this.handleDateRangeChange}))),p.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 p-24 shadow-sm w-100 h-100 mb-24"},t===c.r.LOADING?p.createElement(E.QI,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):p.createElement(p.Fragment,null,p.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24"},p.createElement("h4",{className:"me-24 mb-0 text-blue-0 fw-semibold"},e("txt_Countries"))),p.createElement(b.Z,{className:"align-items-center justify-content-center"},p.createElement(w.Z,{lg:8},this.countryListViewModel?.countriesData?.length?p.createElement(i.C,{data:this.countryListViewModel?.countriesData,continent:"world",markerSize:{dot:4,circle:80}}):p.createElement(l.x,{icons:x.OB.PUBLIC_URL+"/assets/images/ic_project.svg",title:e("txt_no_data"),width:"w-50"}))))),p.createElement("div",{className:"position-relative ChartWrapper"},t===c.r.LOADING?p.createElement(E.QI,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):this.countryListViewModel?.countriesTableData?.list?p.createElement(D,{data:this.countryListViewModel?.countriesTableData?.list,...this.props}):p.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},p.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},p.createElement(l.x,{icons:x.OB.PUBLIC_URL+"/assets/images/ic_project.svg",title:e("txt_no_data"),width:"w-50"}))))))}},(0,m.o)(s,"contextType",d.Fv),s)),V=(0,h.Zh)()((0,g.EN)((n=P,e=>p.createElement(n,{...e,viewModel:p.useContext(k)})))),B=class{constructor(){(0,m.o)(this,"getCountries",(async(e,t,a,s)=>{try{const n=new x.Q2,i=await n.getCountries(e,t);i?(0,_.z)((()=>{a(i)})):s({message:"Something went wrong from Server response"})}catch(e){(0,_.z)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}},F=class{constructor(e,t){(0,m.o)(this,"countriesStore",null),(0,m.o)(this,"status",c.r.READY),(0,m.o)(this,"globalStoreViewModel",null),(0,m.o)(this,"countriesData",null),(0,m.o)(this,"countriesTableData",null),(0,m.o)(this,"initialize",((e,t)=>{this.getCountries(e,t)})),(0,m.o)(this,"getCountries",((e,t)=>{this.status=c.r.LOADING,this.dataFilter={page_size:"1000","sort[]":"number_of_page_views","sort_direction[]":"desc",...this.dataFilter,...e};const a={...this.globalStoreViewModel.dateFilter,...t};this.countriesStore.getCountries(this.dataFilter,a,this.callbackOnCountriesSuccessHandler,this.callbackOnErrorHandler)})),(0,m.o)(this,"handleFilter",(e=>{this.status=c.r.LOADING,this.dataFilter={...this.dataFilter,...e};const t={...this.globalStoreViewModel.dateFilter};this.countriesStore.getCountries(this.dataFilter,t,this.callbackOnCountriesSuccessHandler,this.callbackOnErrorHandler)})),(0,m.o)(this,"handleFilterDateRange",((e,t)=>{this.status=c.r.LOADING;let a={date_start:C()(e).format("YYYY-MM-DD"),date_end:C()(t).endOf("day").format("YYYY-MM-DD")};this.initialize(this.dataFilter,a)})),(0,m.o)(this,"callbackOnErrorHandler",(e=>{this.status=c.r.READY,(0,E.j5)(e.message,"error")})),(0,m.o)(this,"callbackOnCountriesSuccessHandler",(e=>{if(e){this.status=c.r.READY;const t=new o.N(e.list,this.globalStoreViewModel);this.countriesData=t.toCountries(),this.countriesTableData={list:t.toCountriesTable(),pagination:e.pagination}}else this.status=c.r.ERROR,this.data=[]})),(0,_.ky)(this),this.countriesStore=e,this.globalStoreViewModel=t}},R=class{constructor(e,t){(0,m.o)(this,"countryListViewModel",null),(0,m.o)(this,"getCountryListViewModel",(()=>this.countryListViewModel)),e&&(this.countryListViewModel=new F(e,t))}},O=(0,u.Pi)(class extends p.Component{constructor(e){super(e),(0,m.o)(this,"countryStore",null),(0,m.o)(this,"countryViewModel",null),(0,m.o)(this,"componentDidMount",(()=>{this.props.integration||"/"!==E.m8.location.pathname||E.m8.push(`${this.biListViewModel.activeDomain}`)}));const{viewModel:t}=e;this.viewModel=t||null,this.biListViewModel=this.viewModel?this.viewModel.getBiListViewModel():null,this.countryStore=new B,this.countryViewModel=new R(this.countryStore,this.biListViewModel)}render(){return p.createElement(L,{viewModel:this.countryViewModel},p.createElement(M(),{trigger:()=>p.createElement("a",{className:`btn btn-success me-2 text-nowrap fw-semibold py-16 lh-sm printButton ${this.props?.i18n?.language}`,href:"#"},this.props.t("txt_export_pdf")),content:()=>this.componentRef}),p.createElement(I,{ref:e=>this.componentRef=e}))}}),I=(0,u.Pi)(class extends p.Component{constructor(e){super(e)}render(){return p.createElement(V,{...this.props})}}),A=(0,h.Zh)()((0,g.EN)((0,d.NQ)(O)))},80677:(e,t,a)=>{a.d(t,{r:()=>l});var s=a(70069),n=a(67294),i=a(40872),o=a(38994);var r=function({url:e,width:t,height:a,color:s}){return n.createElement("span",{className:"icon d-inline-block align-text-bottom ms-auto",style:{WebkitMaskImage:`url(${e})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",width:t??"24px",height:a??"24px",backgroundColor:s?`${s}`:"var(--body-color)"}})},l=e=>{const[t,a]=(0,n.useState)(!1),l=(0,n.useRef)(null),{onChange:c}=e,{biListViewModel:{dateFilter:{date_start:d,date_end:m},setDateFilter:p}}=(0,s.mQ)(s.Fv);return n.createElement("div",{style:{minHeight:"50px"},ref:l,className:"d-flex align-items-center bg-white rounded-1 shadow-sm daterange-picker-wrapper"},n.createElement(o.yU,{isOpen:t,setIsOpen:a,datePickerRef:l,onChange:c,dateStart:d,dateEnd:m,setDateFilter:p}),n.createElement("div",{className:"calendar-icon position-absolute top-50 translate-middle-y"},n.createElement(r,{url:i.OB.PUBLIC_URL+"/assets/images/calendar.svg",color:"#00B96D"})))}},83874:(e,t,a)=>{a.d(t,{k:()=>h,x:()=>p});var s=a(67294),n=a(91072),i=a(38994),o=a(70982),r=a(73727),l=a(59417),c=a(79521),d=a(40872);document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode("/*\n * @copyright   Copyright (C) 2022 AesirX. All rights reserved.\n * @license     GNU General Public License version 3, see LICENSE.\n */\n.icon-post {\n  background: #cbf8ef;\n}\n\n.icon-project {\n  background: #ffeadc;\n}\n\n.icon-campain {\n  background: #fadae3;\n}"));var m=class extends s.Component{constructor(e){super(e)}render(){const{icons:e,text:t,title:a,link:n,linlText:c,isBtn:d,width:m,className:p,iconColor:h,iconBg:u}=this.props;return s.createElement("div",{className:p||"text-center h-100 d-flex flex-column justify-content-center align-items-center"},s.createElement("p",{style:{width:"48px",height:"55px"},className:`my-2 d-inline-block position-relative rounded-circle ${u}`},s.createElement(i.Ee,{className:`position-absolute top-50 start-50 translate-middle ${h}`,src:e,alt:e})),a&&s.createElement("h5",{className:"mb-2"},a),t&&s.createElement("p",{className:`mb-2 fs-14 text-black-50 w-100 mx-auto ${m}`},t),d&&s.createElement(r.rU,{to:{pathname:n,state:{openModal:!0}},className:"btn btn-success d-inline-block w-fit"},s.createElement("i",{className:"text-white me-2"},s.createElement(o.G,{icon:l.r8p})),c))}},p=(0,n.Zh)()(m);document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode("/*\n * @copyright   Copyright (C) 2022 AesirX. All rights reserved.\n * @license     GNU General Public License version 3, see LICENSE.\n */\n.sort-icon {\n  height: 20px;\n}"));var h=(0,n.Zh)()((({columns:e,data:t,pagination:a,store:n,onSelect:r,dataList:m,classNameTable:h,canSort:u,sortAPI:g,limit:b,paginationClass:w,isPaginationAPI:E,paginationResponse:x,selectPage:y,selectPageSize:N,...v})=>{const{getTableProps:_,getTableBodyProps:f,headerGroups:C,prepareRow:S,rows:M,page:k,pageOptions:L,previousPage:D,canPreviousPage:P,canNextPage:V,pageCount:B,gotoPage:F,setPageSize:R,nextPage:O,state:{pageIndex:I,pageSize:A}}=(0,c.useTable)({columns:e,data:t,onSelect:r,initialState:{pageSize:(E?x?.page_size:b)??5,pageIndex:0}},c.useSortBy,c.usePagination),G=async e=>{await y(e)},{t:T}=v;let U=E?[...Array(x?.total_pages)]:[...Array(L.length)];return s.createElement(s.Fragment,null,s.createElement("div",{className:"bg-white fs-14 shadow-sm text-color rounded-3 position-relative"},M.length?s.createElement("table",{..._(),className:`w-100 ${h}`},s.createElement("thead",null,C.map(((e,t)=>{let a="";return a=m?e.headers.filter((e=>!m.some((t=>e.id===t)))):e.headers,s.createElement("tr",{key:t,...e.getHeaderGroupProps()},a.map(((e,t)=>{let a=e.sortParams??e.id,i="";return e.rowSpan&&u&&!g&&(i=e.columns[0]),s.createElement("th",{key:t,...!g&&{...e.getHeaderProps(u&&!e.rowSpan?e.getSortByToggleProps():i&&i.getSortByToggleProps())},className:`${e.className} ${g&&"number"!==a&&"selection"!==a?"cursor-pointer":""}`,...g&&"number"!==a&&"selection"!==a&&{onClick:async()=>{n.sortBy.id===a&&n.sortBy.desc?n.sortBy={desc:!0}:n.sortBy.id!==a?n.sortBy={id:a,desc:!1}:n.sortBy={id:a,desc:!n.sortBy.desc},await n.getItems()}},rowSpan:`${e.rowSpan??1}`},e.render("Header"),u&&s.createElement("span",{className:"position-relative align-middle"},g?n?.sortBy?.id===a&&"number"!==a&&"selection"!==a?n?.sortBy?.desc?s.createElement(o.G,{className:"sort-icon sort-icon-down ms-sm",icon:l.u9C}):s.createElement(o.G,{className:"sort-icon sort-icon-up ms-sm mb-n8px",icon:l.foy}):s.createElement(s.Fragment,null):e.rowSpan?i.isSorted&&"number"!==a&&"selection"!==a?i.isSortedDesc?s.createElement(o.G,{className:"sort-icon sort-icon-down ms-sm",icon:l.u9C}):s.createElement(o.G,{className:"sort-icon sort-icon-up ms-sm mb-n8px",icon:l.foy}):"":e.isSorted&&"number"!==a&&"selection"!==a?e.isSortedDesc?s.createElement(o.G,{className:"sort-icon sort-icon-down ms-sm",icon:l.u9C}):s.createElement(o.G,{className:"sort-icon sort-icon-up ms-sm mb-n8px",icon:l.foy}):s.createElement(s.Fragment,null)))})))}))),s.createElement("tbody",{...f()},k.length>0&&k.map((e=>{S(e);let t="";return t=m?e.cells.filter((e=>!m.some((t=>e.column.id===t)))):e.cells,s.createElement("tr",{key:e.getRowProps().key,...e.getRowProps()},t.map(((e,t)=>s.createElement("td",{key:t,...e.getCellProps({style:{width:e.column.width}}),className:"py-2 wb-all"},e.render("Cell")))))})))):null,0===M.length?s.createElement("div",{className:""},s.createElement(p,{icons:d.OB.PUBLIC_URL+"/assets/images/ic_project.svg",title:T("txt_no_data"),width:"w-50"})):null),a&&L.length?s.createElement("div",{className:`d-flex align-items-center justify-content-between ${w}`},s.createElement("div",{className:"d-flex align-items-center"},s.createElement("span",{className:"text-gray-600 me-16"},"Showing"),s.createElement("div",{className:"bg-white"},s.createElement(i.nW,{isClearable:!1,isSearchable:!1,isBorder:!1,isShadow:!1,options:[{label:5,value:5},{label:10,value:10},{label:20,value:20},{label:30,value:30},{label:40,value:40},{label:50,value:50}],getOptionLabel:e=>s.createElement("div",{className:"showing-option d-flex align-items-center"},s.createElement("span",null,e.label," items")),className:"shadow-none select-bg-white",onChange:e=>{E?(async e=>{await N(e)})(Number(e.value)):R(Number(e.value))},defaultValue:{label:E?x?.page_size:A,value:E?x?.page_size:A}}))),s.createElement("div",{className:"mt-3 pb-3 text-center pagination d-flex justify-content-end align-items-center"},s.createElement("button",{className:"border-1 border-gray-800 bg-white text-body btn p-0 w-40px h-40px rounded-0 rounded-top-start rounded-bottom-start",onClick:()=>E?G(x?.page-1):D(),disabled:E?1===x?.page:!P},"<")," ",s.createElement("button",{onClick:()=>E?G(1):F(0),className:"border-1 border-gray-800 rounded-0 btn p-0 w-40px h-40px "+((E?1===x?.page:I+1===1)?"bg-gray-900 text-white":"bg-white text-body"),style:{width:"38px",height:"38px"}},1),(E?x?.page>3:I>3)&&s.createElement("button",{className:"border-1 border-gray-800 rounded-0 btn p-0 w-40px h-40px bg-white text-body",style:{width:"38px",height:"38px"}},"..."),U.map(((e,t)=>{let a=E?x?.page===t+1:I+1===t+1;return(E?0!==t&&t!==x?.total_pages-1&&t<x?.page-1+3&&t>x?.page-1-3:0!==t&&t!==L.length-1&&t<I+3&&t>I-3)&&s.createElement("button",{onClick:()=>E?G(t+1):F(t),key:t,className:"border-1 border-gray-800 rounded-0 btn p-0 w-40px h-40px "+(a?"bg-gray-900 text-white":"bg-white text-body"),style:{width:"38px",height:"38px"}},t+1)})),(E?x?.page<x?.total_pages-3:I<L.length-4)&&s.createElement("button",{className:"border-1 border-gray-800 rounded-0 btn p-0 w-40px h-40px bg-white text-body",style:{width:"38px",height:"38px"}},"..."),(E?x?.total_pages>1:L.length>1)&&s.createElement("button",{onClick:()=>E?G(x?.total_pages):F(B-1),className:"border-1 border-gray-800 rounded-0 btn p-0 w-40px h-40px "+((E?x?.page===x?.total_pages:I+1===L.length)?"bg-gray-900 text-white":"bg-white text-body"),style:{width:"38px",height:"38px"}},E?x?.total_pages:L.length),s.createElement("button",{className:"border-1 border-gray-800 bg-white text-body btn p-0 w-40px h-40px rounded-0 rounded-top-end rounded-bottom-end",onClick:()=>E?G(x?.page+1):O(),disabled:E?x?.page===x?.total_pages:!V},">"))):null)}))}}]);