"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[9337],{69337:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var n=a(55270),s=a(4314),l=a(83286),i=a(9783),r=(a(67941),a(2211),a(14164),a(47917)),o=(a(51751),a(53800)),c=(a(81252),a(96540)),m=a(32389),d=a(44015),p=a(56347),g=a(418),u=(0,d.PA)((e=>{const{t}=(0,m.Bd)(),{eventsList:{getVisitor:a,getEvents:d,data:p,dataEvents:u,status:E,statusTable:h,sortBy:f,handleFilterDateRange:v,handleFilterTable:b}}=(0,n.Z)(),{biListViewModel:{activeDomain:y}}=(0,o.jd)(),x=(0,c.useCallback)(((e,t)=>{v(e??t,t??e)}),[]),w=g.A.parse(e.location.search);(0,c.useEffect)((()=>((async()=>{a({"filter[domain]":y,"filter_not[event_name]":"visit",...w?.pagination&&{page:w?.pagination}},{},{"sort[]":"start","sort_direction[]":"desc"}),d({"filter[domain]":y,"filter_not[event_name]":"visit"})})(),()=>{})),[y]);return c.createElement("div",{className:"py-4 px-4 h-100 d-flex flex-column"},c.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24 flex-wrap"},c.createElement("div",{className:"position-relative"},c.createElement("h2",{className:"fw-bold mb-8px"},t("txt_menu_events")),c.createElement("p",{className:"mb-0"},t("txt_analytic_details"))),c.createElement("div",{className:"position-relative"},c.createElement(r.K,{onChange:x}))),c.createElement("div",{className:"row gx-24 mb-24"},c.createElement("div",{className:"col-lg-6 col-12"},c.createElement(s.O,{loading:E,chartTitle:t("txt_menu_overview"),height:390,data:u?.toAreaChart()??[],colors:["#1AB394","#9747FF","#479CFF","#024E6D"],areaColors:["#0066FF","#1AB394","#4747EB","#96C0FF","#D5EEFF"],lineColors:["#1AB394","#9747FF","#479CFF","#024E6D"],lines:u?.getListLine(),filterData:u?.getFilterName(),tooltipComponent:{header:t("txt_number"),value:""},isLegend:!0,filterButtons:["days","weeks","months"]})),c.createElement("div",{className:"col-lg-6 col-12"},c.createElement(i.n,{loading:E,chartTitle:"Event count",height:390,bars:["number"],barColors:["#0066FF"],data:u?.toBarChart(),margin:{left:40},filterButtons:[],isSelection:!1}))),c.createElement("div",{className:"row gx-24 mb-24"},c.createElement("div",{className:"col-12 "},p?.list&&c.createElement(l.X,{data:p?.list?.toEventTable(e.integration),pagination:p.pagination,handleFilterTable:b,statusTable:h,isPaginationAPI:!0,handleSort:async e=>{a({"filter[domain]":y,"filter_not[event_name]":"visit"},{},{"sort[]":e?.id,"sort_direction[]":"desc"===f["sort_direction[]"]?"asc":"desc"})},sortBy:f,handleSearch:async e=>{a({"filter[domain]":y},{},{},{"filter[url]":e})},...e}))))})),E=(0,p.y)(u)},83286:(e,t,a)=>{a.d(t,{X:()=>c});var n=a(2211),s=a(14164),l=a(51751),i=a(99194),r=a(14630),o=a(96540),c=(0,a(32389).CI)()((({data:{header:e=[],data:t=[]},pagination:a,handleFilterTable:c,statusTable:m,t:d,isPaginationAPI:p=!1,isTranslate:g=!1,sortAPI:u=!0,handleSort:E,sortBy:h,limit:f})=>{const v=o.useMemo((()=>e.map(((t,a)=>({...t,className:`px-3 py-16 fs-sm fw-semibold border-bottom border-gray-800 align-middle ${a+1===e.length?"rounded-top-end-3":""} ${0===a?"rounded-top-start-3":""}`,width:t?.width??100,allowSort:t?.allowSort||!1,...g?{Header:o.createElement("span",{className:"align-middle text-gray-900 fw-medium"},d(t.Header))}:{}})))),[e]),b=o.useMemo((()=>t),[t]);return o.createElement("div",{className:"h-100 ChartWrapper position-relative"},m===l.s.LOADING?o.createElement(r.bg,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):t?o.createElement(n.x,{classNameTable:"mb-0",columns:v,data:b,canSort:!0,sortAPI:u,sortAPIHandle:E,sortBy:h,pagination:!0,paginationClass:"fs-14 px-4",isPaginationAPI:p,paginationResponse:a,selectPage:async e=>{await c({page:e})},selectPageSize:async e=>{await c({page:1,page_size:e})},limit:f}):o.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},o.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},o.createElement(s.J,{icons:i._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:d("txt_no_data"),width:"w-50"}))))}))},4314:(e,t,a)=>{a.d(t,{O:()=>v});var n=a(67941),s=a(14164),l=a(51751),i=a(96540),r=a(32389),o=a(44653),c=a(88224),m=a(69107),d=a(77984),p=a(23495),g=a(78687),u=a(97018),E=a(91222),h=a(14630),f=a(99194);document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(".recharts-legend-wrapper ul {\n  list-style-type: none;\n}"));var v=({data:e=[],height:t,areaColors:a,chartTitle:v,lines:b,XAxisOptions:y,YAxisOptions:x,loading:w,tooltipComponent:N,filterData:_=[],isLegend:C,isSelection:F=!0,filterButtons:S})=>{const[A,B]=(0,i.useState)(_[0]),[k,L]=(0,i.useState)(e[0]),[T,P]=(0,i.useState)(n.f.DAY),{t:D}=(0,r.Bd)();(0,i.useEffect)((()=>{const[t,a,s]=e;return T===n.f.MONTH&&L(t),T===n.f.DAY&&L(a),T===n.f.WEEK&&L(s),()=>{}}),[T,e]),(0,i.useEffect)((()=>(B(_[0]),()=>{})),[_]);const I=(0,i.useMemo)((()=>({payload:e})=>i.createElement("div",{className:"areachart-tooltip p-15 text-white rounded-6",style:{backgroundColor:"#132342"}},i.createElement("p",{className:"fw-semibold fs-14 mb-sm"},e?.length>0?e[0].payload.name:""),e&&e.map(((t,a)=>i.createElement("div",{key:a,className:"mb-0 fs-12 d-flex flex-nowrap"},e?.length>1&&i.createElement("div",{className:" fw-bold"},t.name,":"),i.createElement("div",{className:"ps-sm"},i.createElement("p",{className:"mb-0"},i.createElement("span",{className:"mr-2"},N?.value),i.createElement("span",null,t.value)))))))),[N]);return i.createElement("div",{className:"bg-white rounded-3 p-24 shadow-sm h-100 ChartWrapper position-relative"},i.createElement(n.z,{currentSelection:A,onSelectionChange:B,selectionData:_,chartTitle:v,isSelection:F,filterButtons:S,view:T,setView:P}),w===l.s.LOADING?i.createElement(h.bg,{className:"d-flex justify-content-center align-items-center bg-white"}):A?i.createElement(o.u,{width:"100%",height:t??500},i.createElement(c.E,{data:k?.[A.value]},b&&i.createElement("defs",null,b.map(((e,t)=>i.createElement("linearGradient",{key:t,id:`${e?.replace(/\s/g,"")}_${t}`,x1:"0",y1:"0",x2:"0",y2:"1"},i.createElement("stop",{offset:"5%",stopColor:a[t],stopOpacity:.2}),i.createElement("stop",{offset:"95%",stopColor:a[t],stopOpacity:0}))))),i.createElement(m.d,{strokeDasharray:"7 7",horizontal:!0,vertical:!1}),i.createElement(d.W,{dataKey:"name",tickLine:!1,padding:y?.padding,style:{fontSize:"14px"}}),i.createElement(p.h,{tickLine:!1,axisLine:x?.axisLine??!1,padding:x?.padding,style:{fontSize:"14px"}}),i.createElement(g.m,{content:I}),C&&i.createElement(u.s,{content:e=>{const{payload:t}=e;return i.createElement("ul",{className:"ms-3 mt-2 d-flex align-items-center"},t.map(((e,t)=>i.createElement("li",{key:`item-${t}`,className:"me-24 fs-14 d-flex align-items-center"},i.createElement("div",{className:"rounded-circle me-8px d-flex align-items-center justify-content-center",style:{backgroundColor:e?.color,width:14,height:14}}),e.value))))}}),b&&b.map(((e,t)=>i.createElement(E.y,{key:t,dataKey:e,stackId:"a",fill:a[t],barSize:28,maxBarSize:76}))))):i.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},i.createElement(s.J,{icons:f._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:D("txt_no_data"),width:"w-50"})))}}}]);